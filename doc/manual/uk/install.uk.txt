Настанова з інсталяції Debian GNU/Linux

Авторське право © 2004 - 2025 Команда Debian Installer

Цей посібник є безкоштовним програмним забезпеченням; ви можете поширювати його
та/або змінювати згідно з умовами GNU General Public License. Перегляньте
ліцензію у Додаток F, Загальна громадська ліцензія GNU.

Версія збірки цього посібника: 20250803+deb13u1.

Анотація

Цей документ містить інструкції зі встановлення Debian GNU/Linux 13 (кодова
назва «trixie») для архітектури 64-bit PC («amd64»). Тут також містяться
посилання на більш докладну інформацію щодо налаштування системи Debian.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Зміст

Встановлення Debian GNU/Linux 13 amd64
1. Вітаємо в Debian
    1.1. Що таке Debian?
    1.2. Що таке GNU/Linux?
    1.3. Що таке Debian GNU/Linux?
    1.4. Що таке Встановлювач Debian?
    1.5. Отримання Debian
    1.6. Отримання найновішої версії цього документа
    1.7. Організація Цього Документа
    1.8. Про авторські права та ліцензії на програмне забезпечення
2. Системні вимоги
    2.1. Підтримуване обладнання
        2.1.1. Підтримувані архітектури
        2.1.2. Підтримка ЦП
        2.1.3. Ноутбуки
        2.1.4. Багато процесорів
        2.1.5. Підтримка графічного апаратного забезпечення
        2.1.6. Апаратне забезпечення мережевого з'єднання
        2.1.7. Дисплеї зі шрифтом Брайля
        2.1.8. Апаратний мовний синтез
        2.1.9. Периферійне та інше обладнання
    2.2. Пристрої, що потребують прошивки
    2.3. Придбання обладнання спеціально для GNU/Linux
        2.3.1. Уникайте пропрієтарного або закритого обладнання
    2.4. Інсталяційний носій
        2.4.1. CD-ROM/DVD-ROM/BD-ROM
        2.4.2. USB-накопичувач
        2.4.3. Мережа
        2.4.4. Жорсткий диск
        2.4.5. Un*x або GNU система
        2.4.6. Підтримувані системи сховищ
    2.5. Вимоги до памʼяті та дискового простору
3. Перед тим як встановити Debian GNU/Linux
    3.1. Огляд процесу встановлення
    3.2. Зробіть резервну копію своїх даних!
    3.3. Інформація, яка Вам знадобиться
        3.3.1. Документація
        3.3.2. Пошук ресурсів з інформацією про обладнання
        3.3.3. Сумісність обладнання
        3.3.4. Мережеві налаштування
    3.4. Відповідність до мінімальних вимог щодо обладнання
    3.5. Передрозподіл для багатосистемних конфігурацій
    3.6. Передінсталяційне налаштування обладнання та операційної системи
        3.6.1. Виклик меню налаштування BIOS/UEFI
        3.6.2. Вибір завантажувального пристрою
        3.6.3. Системи з прошивкою UEFI
        3.6.4. Безпечне завантаження
        3.6.5. Вимкнення функції «швидкого завантаження»/«швидкого запуску»
        Windows
        3.6.6. Проблеми з обладнанням, на які варто звернути увагу
4. Отримання інсталяційних даних
    4.1. Офіційні Debian GNU/Linux інсталяційні образи
    4.2. Завантаження файлів з Debian Mirrors
        4.2.1. Де знайти інсталяційні файли
    4.3. Підготовка файлів для завантаження з USB-диска
        4.3.1. Підготовка USB-диска з гібридним образом CD/DVD
    4.4. Підготовка файлів для завантаження з жорсткого диска
        4.4.1. Інсталятор жорсткого диска завантажується з Linux за допомогою 
        GRUB
    4.5. Підготовка файлів для завантаження з TFTP
        4.5.1. Налаштування сервера DHCP
        4.5.2. Налаштування сервера BOOTP
        4.5.3. Увімкнення сервера TFTP
        4.5.4. Перемістіть образи TFTP на місце
    4.6. Автоматичне встановлення
        4.6.1. Автоматичне встановлення з інсталятором Debian
    4.7. Перевірка цілісності інсталяційних файлів
5. Завантаження системи встановлення
    5.1. Завантаження встановлювача на 64-bit PC
        5.1.1. Завантаження з USB-накопичувача
        5.1.2. Завантаження з оптичного диска (CD/DVD)
        5.1.3. Завантаження з Linux за допомогою GRUB
        5.1.4. Завантаження разом з TFTP
        5.1.5. Екран завантаження
        5.1.6. Графічний інсталятор
    5.2. Доступність
        5.2.1. Front-end інсталятора
        5.2.2. USB-дисплеї зі шрифтом Брайля
        5.2.3. Серійні дисплеї Брайля
        5.2.4. Програмний синтез мовлення
        5.2.5. Апаратний мовний синтез
        5.2.6. Платові пристрої
        5.2.7. Тема з високим контрастом
        5.2.8. Збільшення
        5.2.9. Експертне встановлення, аварійний режим, автоматичне
        встановлення
        5.2.10. Доступність встановленої системи
    5.3. Параметри завантаження
        5.3.1. Послідовна консоль завантаження
        5.3.2. Debian Параметри встановлення
        5.3.3. Використання параметрів завантаження для відповідей на запитання
        5.3.4. Передача параметрів модулям ядра
        5.3.5. Чорний список модулів ядра
    5.4. Усунення несправностей у процесі встановлення
        5.4.1. Надійність оптичних носіїв
        5.4.2. Налаштування завантаження
        5.4.3. Програмний синтез мовлення
        5.4.4. Загальний 64-bit PC Проблеми встановлення
        5.4.5. Інтерпретація повідомлень запуску ядра
        5.4.6. Повідомлення про проблеми з установкою
        5.4.7. Надсилання звітів про встановлення
6. Використання інсталятора Debian
    6.1. Як працює програма встановлення
        6.1.1. Використання графічного інсталятора
    6.2. Вступ до компонентів
    6.3. Використання окремих компонентів
        6.3.1. Налаштування Debian інсталятора та конфігурації обладнання
        6.3.2. Налаштування користувачів та паролів
        6.3.3. Налаштування годинника і часового поясу
        6.3.4. Створення розділів і вибір точок кріплення
        6.3.5. Встановлення базової системи
        6.3.6. Встановлення додаткового програмного забезпечення
        6.3.7. Як зробити систему завантажувальною
        6.3.8. Завершення встановлення
        6.3.9. Усунення несправностей
        6.3.10. Встановлення через мережеву консоль
    6.4. Завантаження втраченої прошивки
        6.4.1. Підготовка середовища
        6.4.2. Прошивка та встановлена система
        6.4.3. Завершення встановленої системи
    6.5. Кастомізація
        6.5.1. Встановлення альтернативної системи ініціалізації
7. Завантаження у Вашу нову систему Debian
    7.1. Момент істини
    7.2. Монтування зашифрованих томів
        7.2.1. Усунення несправностей
    7.3. Вхід
8. Наступні кроки та куди йти далі
    8.1. Вимкнення системи
    8.2. Власне орієнтування у Debian
        8.2.1. Система пакунків Debian
        8.2.2. Додаткові програми, доступні для Debian
        8.2.3. Керування версіями програмного забезпечення
        8.2.4. Керування завданнями Cron
    8.3. Додаткова інформація
    8.4. Налаштування поштової системи
        8.4.1. Стандартне налаштування е-пошти
        8.4.2. Надсилання пошти за межі системи
        8.4.3. Налаштування поштового сервера Exim4
    8.5. Компіляція нового ядра
    8.6. Відновлення пошкодженої системи
A. Інструкція з установки
    A.1. Передумови
    A.2. Завантаження інсталятора
        A.2.1. Оптичний диск
        A.2.2. Флешка USB
        A.2.3. Завантаження з мережі
        A.2.4. Завантаження з жорсткого диска
    A.3. Встановлення
    A.4. Надішліть нам звіт встановлення
    A.5. І нарешті...
B. Автоматичне встановлення з готовими відповідями
    B.1. Вступ
        B.1.1. Методи попереднього налаштування
        B.1.2. Обмеження
    B.2. Використання preseeding
        B.2.1. Завантаження файлу попередньої конфігурації
        B.2.2. Використання параметрів завантаження для попереднього вибору
        питань
        B.2.3. Автоматичний режим
        B.2.4. Псевдоніми, корисні для попередньої обробки
        B.2.5. Приклади попереднього завантаження завантажувального запиту
        B.2.6. Використання DHCP-сервера для вказівки файлів попередньої
        конфігурації
    B.3. Створення файлу попередньої конфігурації
    B.4. Вміст файлу попередньої конфігурації (для trixie)
        B.4.1. Локалізація
        B.4.2. Синтез мовлення
        B.4.3. Конфігурація мережі
        B.4.4. Мережева консоль
        B.4.5. Дзеркальні налаштування
        B.4.6. Налаштування облікового запису
        B.4.7. Налаштування годинника та часового поясу
        B.4.8. Розбиття на розділи
        B.4.9. Установка базової системи
        B.4.10. Apt setup
        B.4.11. Вибір пакета
        B.4.12. Інсталяція завантажувача
        B.4.13. Завершення установки
        B.4.14. Попередня підготовка інших пакунків
    B.5. Додаткові опції
        B.5.1. Запуск користувацьких команд під час встановлення
        B.5.2. Використання попередньої обробки для зміни значень за
        замовчуванням
        B.5.3. Ланцюгове завантаження файлів попередньої конфігурації
C. Перерозподіл диска для Debian
    C.1. Вибір розділів та розмірів Debian
    C.2. Дерево каталогів
    C.3. Рекомендована схема розподілу
    C.4. Назви пристроїв у Linux
    C.5. Програми для розподілу в Debian
        C.5.1. Розподіл для 64-bit PC
D. Різні поради
    D.1. Пристрої Linux
        D.1.1. Налаштування вашої миші
    D.2. Дисковий простір, необхідний для завдань
    D.3. Встановлення Debian GNU/Linux із системи Unix/Linux
        D.3.1. Початок роботи
        D.3.2. Встановити debootstrap
        D.3.3. Запуск debootstrap
        D.3.4. Конфігурація базової системи
        D.3.5. Встановлення ядра
        D.3.6. Налаштування завантажувача
        D.3.7. Віддалений доступ: Встановлення SSH та налаштування доступу
        D.3.8. Останні штрихи
    D.4. Встановлення Debian GNU/Linux через паралельну лінію IP (PLIP)
        D.4.1. Вимоги
        D.4.2. Налаштування джерела
        D.4.3. Встановлення цілі
    D.5. Встановлення Debian GNU/Linux за допомогою PPP через Ethernet (PPPoE)
E. Адміністративна інформація
    E.1. Про цей документ
    E.2. Зробити внесок у цей документ
    E.3. Основні співрозробники
    E.4. Торговий знак Acknowledgement
F. Загальна громадська ліцензія GNU

Список таблиць

3.1. Інформація про обладнання, корисна для встановлення
3.2. Рекомендовані мінімальні системні вимоги

Встановлення Debian GNU/Linux 13 amd64

Ми раді, що Ви вирішили спробувати Debian і впевнені, що Ви помітите унікальні
речі в розповсюдженні GNU/Linux. Debian GNU/Linux об’єднує високоякісне вільне
програмне забезпечення з усього світу, об’єднуючи його в єдине ціле. Ми віримо,
Ви побачите, що результат справді більше, ніж просто сума доданків.

Ми розуміємо, що багато хто з вас хоче встановити Debian не читаючи цей
посібник, і інсталятор Debian розроблений таки чином, щоб зробити це можливим.
Якщо у Вас немає часу прочитати повну настанову зі встановлення прямо зараз, ми
радимо Вам прочитати короткий посібник із встановлення, який проведе Вас через
основний процес встановлення, а також посилання на посібник для складніших тем
або коли щось піде не так. Посібник зі встановлення можна знайти в Додаток A, 
Інструкція з установки.

Зважаючи на це, ми сподіваємося, що у Вас є достатньо часу, щоби прочитати
більшу частину цього посібника та отримати таким чином більше інформації та
мати, ймовірно, більш успішний досвід встановлення.

Розділ 1. Вітаємо в Debian

Зміст

1.1. Що таке Debian?
1.2. Що таке GNU/Linux?
1.3. Що таке Debian GNU/Linux?
1.4. Що таке Встановлювач Debian?
1.5. Отримання Debian
1.6. Отримання найновішої версії цього документа
1.7. Організація Цього Документа
1.8. Про авторські права та ліцензії на програмне забезпечення

У цьому розділі наведено огляд проектів Debian та Debian GNU/Linux. Якщо ви вже
знаєте про Debian Історія проекту та дистрибутиву Debian GNU/Linux, не вагайся
та переходьте до наступного розділу.

1.1. Що таке Debian?

Debian -- це повністю волонтерська організація, яка займається розробкою
вільного програмного забезпечення та просуванням ідеалів спільноти вільного
програмного забезпечення. Проєкт Debian розпочався у 1993 році, коли Ян Мердок
(Ian Murdock) звернувся до розробників програмного забезпечення з відкритим
запрошенням зробити внесок у повний і узгоджений розподіл програмного
забезпечення на основі відносно нового ядра Linux. Ця відносно невелика група
відданих ентузіастів, яка спочатку була зібрана Фондом вільного програмного
забезпечення (Free Software Foundation) і була під впливом філософії GNU, з
роками перетворилася на організацію, в якій зараз приблизно 1000 Розробників
Debian.

Розробники Debian беруть участь у різноманітних заходах, включаючи
адміністрування Веб- та FTP-сайтів, графічний дизайн, юридичний аналіз
ліцензій, написання документації та, звичайно, підтримку програмного
забезпечення.

Щоб передати нашу філософію та залучити інших розробників, які вірять у
принципи Debian, проєкт Debian опублікував серію документів, які описують наші
цінності та служать настановою для розуміння того, що означає бути розробником
Debian:

  • Соціальний договір Debian є заявою про зобов'язання Debian перед Free
    Software Community. Кожен, хто погоджується дотримуватися соціального
    договору може стати супроводжуючим (maintainer). Кожен, хто супроводжує
    може запропонувати будь-яке програмне забезпечення для Debian -- за умови,
    що програмне забезпечення відповідає нашим критеріям безплатності та
    пакунки відповідають нашим стандартам якості.

  • Правила вільного програмного забезпечення Debian (DFSG) є чітким та
    змістовним твердженням Debian щодо вільного програмного забезпечення. DFSG
    є надзвичайно впливовим документом у Русі вільного програмного забезпечення
    (Free Software Movement - FSM) та є основою для Визначення відкритого коду
    (The Open Source Definition).

  • Настанови з політики Debian (Debian Policy Manual) є розширеним описом
    стандартів якості проєкту Debian.

Розробники Debian також беруть участь у ряді інших проєктів; деякі пов'язані з
Debian, інші стосуються частини або всієї спільноти Linux. Деякі приклади:

  • Стандарт ієрархії файлової системи (FHS) це спроба стандартизувати вигляд
    файлової системи Linux. Стандарт FHS дозволить розробникам більше
    сконцентруватися на дизайні програм, не маючи хвилювань щодо шляхів
    встановлення програм на різних дистрибутивах GNU/Linux.

  • Debian Jr. це внутрішній проєкт, спрямований на те, щоб Debian мав що
    запропонувати нашим наймолодшим користувачам.

Щоб отримати загальну інформацію про Debian, див. Поширені запитання про Debian
.

1.2. Що таке GNU/Linux?

GNU/Linux - це операційна система: серія застосунків, які дозволяють
взаємодіяти з комп’ютером та запускати інші додатки.

Операційна система складається з різноманітних ключових програм, які потрібні
комп’ютеру для спілкування з користувачами та отримання від них інструкцій, для
читання та запису/передачі даних на жорсткі диски, стрічки та принтери, для
контролю використання пам'яті та для запуску іншого програмного забезпечення.
Найважливішою складовою операційної системи є ядро. У системі GNU/Linux
основним компонентом ядра є Linux. Решта системи складається з інших програм,
багато з яких були написані Проєктом GNU або для нього. Оскільки ядро Linux не
є самостійною операційною системою, ми вважаємо за краще для позначення систем,
які багато людей називають просто «Linux» використовувати термін «GNU/Linux».

GNU/Linux змодельовано за зразком операційної системи Unix. Від самого початку
GNU/Linux було розроблено як багатозадачну, багатокористувацьку систему. Цих
фактів достатньо, щоб відрізнити GNU/Linux від інших відомих операційних
систем. Втім, GNU/Linux відрізняється навіть більше, ніж ви можете собі уявити.
На відміну від інших операційних систем, GNU/Linux нікому не належить. Значна
частина його розвитку здійснюється неоплачуваними волонтерами.

Розробка того, що пізніше стало GNU/Linux, почалася у 1984 році, коли Фундація
вільного програмного забезпечення почала розробку вільної Unix-подібної
операційної системи під назвою GNU.

Проєкт GNU розробив повний набір вільного програмного забезпечення для
використання з Unix та Unix-подібними операційними системами, такими як GNU/
Linux. Ці інструменти дозволяють користувачам виконувати завдання від простих
(наприклад, копіювання або видалення файлів із системи) до складних (наприклад,
написання та компіляція програм або складне редагування в різних форматах
документів).

Хоча багато груп і окремих осіб зробили свій внесок у розробку GNU/Linux,
найбільшим дописувачем залишається Фонд вільного програмного забезпечення, який
створив не лише більшість інструментів, що використовуються у GNU/Linux, але й
філософію і спільноту, які зробили GNU/Linux можливою.

Ядро Linux вперше з'явилося у 1991 році, коли фінський студент комп'ютерних
наук Лінус Торвальдс оголосив про ранню версію ядра для заміни Minix у групі
новин Usenet comp.os.minix. Дивіться Сторінку історії Linux на сайті Linux
International.

Лінус Торвальдс продовжує координувати роботу кількох сотень розробників за
допомогою низки супровідників підсистем. Існує офіційний вебсайт для ядра
Linux. Інформацію про список розсилки linux-kernel можна знайти на сторінці FAQ
списку розсилки linux-kernel.

Користувачі GNU/Linux мають величезну свободу вибору програмного забезпечення.
Наприклад, вони можуть вибирати з десятка різних оболонок командного рядка і
декількох графічних робочих столів. Цей вибір часто спантеличує користувачів
інших операційних систем, які не звикли думати про командний рядок або робочий
стіл як про щось, що вони можуть змінювати.

GNU/Linux також менш схильна до збоїв, має кращі можливості для одночасного
запуску декількох програм і є більш безпечною, ніж багато операційних систем.
Завдяки цим перевагам, Linux є найбільш швидкозростаючою операційною системою
на серверному ринку. Зовсім недавно Linux став популярним серед домашніх та
бізнес-користувачів.

1.3. Що таке Debian GNU/Linux?

Поєднання філософії та методології GNU з інструментами GNU, ядром Linux та
іншим важливим вільним програмним забезпеченням утворює унікальний дистрибутив
програмного забезпечення під назвою GNU/Linux. Цей дистрибутив складається з
великої кількості програмних пакунків. Кожен пакунок у дистрибутиві містить
виконувані файли, скрипти, документацію та інформацію про конфігурацію, а також
має супровідника, який несе основну відповідальність за підтримку пакунка у
актуальному стані, відстеження повідомлень про помилки та спілкування з
авторами попередніх версій пакунків програмного забезпечення. Наша надзвичайно
велика база користувачів у поєднанні з системою відстеження помилок гарантує
швидке виявлення та усунення проблем.

Увага до деталей Debian дозволяє нам створювати якісний, стабільний і
масштабований дистрибутив. Інсталяції можна легко конфігурувати для виконання
багатьох ролей, від простих брандмауерів до настільних наукових робочих станцій
і мережевих серверів високого класу.

Debian особливо популярний серед досвідчених користувачів завдяки своїй
технічній досконалості та глибокій прихильності до потреб і очікувань спільноти
Linux. Debian також додав до Linux багато можливостей, які зараз є звичними.

Наприклад, Debian був першим дистрибутивом Linux, який включав систему
керування пакунками для легкого встановлення та видалення програмного
забезпечення. Це також був перший дистрибутив Linux, який можна було оновлювати
без необхідності перевстановлення.

Debian продовжує залишатися лідером у розробці Linux. Процес її розробки є
прикладом того, наскільки добре може працювати модель розробки з відкритим
вихідним кодом -- навіть для дуже складних завдань, таких як створення та
підтримка повноцінної операційної системи.

Особливістю, яка найбільше відрізняє Debian від інших дистрибутивів Linux, є
його система керування пакунками. Ці інструменти надають адміністратору системи
Debian повний контроль над пакунками, встановленими у цій системі, включаючи
можливість встановити один пакунок або автоматично оновити всю операційну
систему. Окремі пакунки також можна захистити від оновлення. Ви навіть можете
розповісти системі керування пакунками про програмне забезпечення, яке ви
скомпілювали самостійно, і про те, які залежності воно виконує.

Щоб захистити вашу систему від «троянських коней» та іншого шкідливого
програмного забезпечення, сервери Debian перевіряють, що завантажені пакунки
надходять від зареєстрованих Debian супровідників. Пакувальники Debian також
дуже уважно ставляться до налаштування своїх пакунків у безпечний спосіб. Коли
проблеми з безпекою в пакунках, що постачаються, з'являються виправлення, як
правило, доступні дуже швидко. За допомогою простих опцій оновлення Debian,
виправлення безпеки можуть бути завантажені і встановлені автоматично через
Інтернет.

Основним і найкращим способом отримання підтримки вашої Debian системи GNU/
Linux та спілкування з Debian Розробниками є численні списки розсилки, що
підтримуються Debian Проєктом GNU/Linux (на момент написання цієї статті їх
налічується більше, ніж 334). Найпростіший спосіб підписатися на один або
декілька з цих списків - відвідати Сторінку підписки на списки розсилки Debian
і заповнити форму, яку ви там знайдете.

1.4. Що таке Встановлювач Debian?

Встановлювач Debian, також відомий як «d-i», є системою програмного
забезпечення для встановлення базової робочої системи Debian. Підтримується
широкий спектр апаратного забезпечення, такого як вбудовані пристрої, ноутбуки,
настільні та серверні машини, а також пропонується великий набір безкоштовного
програмного забезпечення для багатьох цілей.

Інсталяція проводиться за допомогою відповідей на базовий набір запитань. Також
доступні експертний режим, який дозволяє контролювати кожен аспект інсталяції,
і розширена функція для виконання автоматизованої інсталяції. Встановлену
систему можна використовувати як є або додатково налаштувати. Інсталяцію можна
виконати з багатьох джерел: USB, CD/DVD/Blu-Ray або з мережі. Інсталятор
підтримує локалізовані інсталяції більш ніж 80 мовами.

Програма встановлення бере свій початок у проєкті boot-floppies, про який
вперше згадує Джоуї Хесс у 2000 році. Відтоді система інсталяції постійно
розвивається волонтерами, вдосконалюючись і додаючи нові функції.

Додаткову інформацію можна знайти на сторінці програми встановлення Debian, на
Wiki і в списку розсилки debian-boot.

1.5. Отримання Debian

Інформацію про те, як завантажити Debian GNU/Linux з Інтернету або у кого можна
придбати офіційні носії для встановлення Debian, можна знайти на сторінці
дистрибутива. список Debian дзеркал містить повний набір офіційних Debian
дзеркал, тому ви можете легко знайти найближче з них.

Debian можна дуже легко оновити після встановлення. Процедура інсталяції
допоможе налаштувати систему так, щоб ви могли виконати оновлення після
завершення інсталяції, якщо це буде потрібно.

1.6. Отримання найновішої версії цього документа

Цей документ постійно переглядається. Обов'язково перевірте сторінки 13 Debian
для отримання будь-якої інформації про випуск 13 системи Debian GNU/Linux в
останню хвилину. Оновлені версії цього посібника зі встановлення також доступні
на офіційних сторінках посібника зі встановлення.

1.7. Організація Цього Документа

Цей документ має слугувати посібником для користувачів-початківців. Він
намагається робити якомога менше припущень про ваш рівень знань. Однак ми
припускаємо, що ви маєте загальне уявлення про те, як працює апаратне
забезпечення вашого комп'ютера.

Досвідчені користувачі також можуть знайти у цьому документі цікаву довідкову
інформацію, зокрема про мінімальний розмір дистрибутива, деталі про апаратне
забезпечення, яке підтримується системою встановлення Debian тощо. Ми
заохочуємо користувачів-експертів оглянути документ.

Загалом, цей посібник побудований за лінійною схемою, проводячи вас через
процес інсталяції від початку до кінця. Нижче наведено кроки встановлення
Debian GNU/Linux, а також розділи цього документа, які відповідають кожному
кроку:

 1. Визначте, чи відповідає ваше обладнання вимогам для використання
    інсталяційної системи, в Розділ 2, Системні вимоги.

 2. Backup your system, perform any necessary planning and hardware
    configuration prior to installing Debian, in Розділ 3, Перед тим як
    встановити Debian GNU/Linux. Якщо ви готуєте багатозавантажувальну систему,
    вам може знадобитися створити на жорсткому диску розділ для використання
    Debian.

 3. У Розділ 4, Отримання інсталяційних даних ви отримаєте необхідні
    інсталяційні файли для вашого методу встановлення.

 4. Наступний Розділ 5, Завантаження системи встановлення описує завантаження
    до системи встановлення. У цьому розділі також обговорюються процедури
    усунення несправностей на випадок, якщо у вас виникнуть проблеми з цим
    кроком.

 5. Виконайте фактичне встановлення відповідно до Розділ 6, Використання
    інсталятора Debian. Це передбачає вибір мови, налаштування модулів
    драйверів периферійних пристроїв, налаштування мережевого з'єднання, щоб
    решту інсталяційних файлів можна було отримати безпосередньо з сервера
    (якщо ви не встановлюєте з набору інсталяційних образів DVD), розбиття
    жорстких дисків на розділи і встановлення базової системи, а потім вибір і
    встановлення завдань. (Деякі відомості про налаштування розділів для вашої
    системи Debian описано у Додаток C, Перерозподіл диска для Debian.)

 6. Завантажтеся у щойно встановлену базову систему з Розділ 7, Завантаження у
    Вашу нову систему Debian.

Після встановлення системи, ви можете прочитати Розділ 8, Наступні кроки та
куди йти далі. У цьому розділі пояснюється, де шукати додаткову інформацію про
Unix та Debian, а також як замінити ядро.

Нарешті, інформацію про цей документ і про те, як зробити свій внесок у його
створення, можна знайти за посиланням Додаток E, Адміністративна інформація.

1.8. Про авторські права та ліцензії на програмне забезпечення

Ми впевнені, що ви читали деякі ліцензії, які постачаються з більшістю
комерційних програм - зазвичай вони говорять про те, що ви можете
використовувати лише одну копію програми на одному комп'ютері. Ліцензія цієї
системи зовсім не така. Ми рекомендуємо вам поставити копію Debian GNU/Linux на
кожен комп'ютер у вашому навчальному закладі або на робочому місці. Дайте свій
інсталяційний носій друзям і допоможіть їм встановити його на їхні комп'ютери!
Ви навіть можете робити тисячі копій і продавати їх -- хоча і з деякими
обмеженнями. Ваша свобода встановлення та використання системи безпосередньо
пов'язана з тим, що Debian базується на вільному програмному забезпеченні.

Називання програмного забезпечення вільним не означає, що воно не захищене
авторським правом, і не означає, що інсталяційні носії, які містять це
програмне забезпечення, повинні розповсюджуватися безкоштовно. Вільне програмне
забезпечення частково означає, що ліцензії на окремі програми не вимагають від
вас платити за привілей розповсюдження або використання цих програм. Вільне
програмне забезпечення також означає, що будь-хто може не лише розширювати,
адаптувати та модифікувати програмне забезпечення, але й поширювати результати
своєї роботи.

Примітка

Проєкт Debian, як прагматична поступка своїм користувачам, робить доступними
деякі пакунки, які не відповідають нашим критеріям вільності. Однак, ці пакунки
не є частиною офіційного дистрибутива, і доступні лише з contrib або non-free
дзеркал Debian або на сторонніх CD/DVD-ROM; див. Запитання і відповіді Debian,
у розділі «Архіви Debian на FTP», для отримання додаткової інформації про
структуру та вміст архівів.

Багато програм у системі ліцензовано під GNU Загальною суспільною ліцензією,
яку часто називають просто «GPL». GPL вимагає, щоб ви надавали вихідний текст
програм, коли ви розповсюджуєте двійкову копію програми; що надання ліцензії
гарантує, що будь-який користувач зможе модифікувати програмне забезпечення.
Через це положення, вихідний код ^[1] для всіх таких програм доступний у
системі Debian.

Існує декілька інших форм заяв про авторські права та ліцензій на програмне
забезпечення, що використовуються у Debian. Ви можете знайти авторські права та
ліцензії для кожного пакунка, встановленого у вашій системі, переглянувши файл
/usr/share/doc/package-name/copyright після встановлення пакунка у вашій
системі.

Для отримання додаткової інформації про ліцензії і про те, як Debian визначає,
чи є програмне забезпечення достатньо вільним для включення до основного
дистрибутива, див. Правила Debian щодо вільного програмного забезпечення.

Найважливішим юридичним застереженням є те, що це програмне забезпечення
постачається без гарантій. Програмісти, які створили це програмне забезпечення,
зробили це на благо спільноти. Ми не надаємо жодних гарантій щодо придатності
програмного забезпечення для будь-яких цілей. Однак, оскільки програмне
забезпечення є безплатним, ви маєте право змінювати його відповідно до своїх
потреб і користуватися перевагами змін, зроблених іншими користувачами, які
розширили програмне забезпечення таким чином.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[1] Інформацію про те, як знайти, розпакувати та зібрати двійкові файли з
пакунків Debian див. у Запитання і відповіді Debian, у розділі «Основи системи
керування пакунками Debian».

Розділ 2. Системні вимоги

Зміст

2.1. Підтримуване обладнання
    2.1.1. Підтримувані архітектури
    2.1.2. Підтримка ЦП
    2.1.3. Ноутбуки
    2.1.4. Багато процесорів
    2.1.5. Підтримка графічного апаратного забезпечення
    2.1.6. Апаратне забезпечення мережевого з'єднання
    2.1.7. Дисплеї зі шрифтом Брайля
    2.1.8. Апаратний мовний синтез
    2.1.9. Периферійне та інше обладнання
2.2. Пристрої, що потребують прошивки
2.3. Придбання обладнання спеціально для GNU/Linux
    2.3.1. Уникайте пропрієтарного або закритого обладнання
2.4. Інсталяційний носій
    2.4.1. CD-ROM/DVD-ROM/BD-ROM
    2.4.2. USB-накопичувач
    2.4.3. Мережа
    2.4.4. Жорсткий диск
    2.4.5. Un*x або GNU система
    2.4.6. Підтримувані системи сховищ
2.5. Вимоги до памʼяті та дискового простору

Цей розділ містить інформацію щодо апаратного забезпечення, необхідного для
початку роботи з Debian. Ви також знайдете посилання на докладну інформацію про
апаратне забезпечення, підтримуване GNU та Linux.

2.1. Підтримуване обладнання

Debian не накладає вимог до апаратного забезпечення окрім вимог до ядер Linux
та наборів інструментів GNU. Таким чином, будь-яка архітектура чи платформа, на
яку перенесені ядра Linux, libc, gcc тощо, і для якої Debian порт існує, може
запускати Debian. Більш докладно про 64-bit PC архітектурні системи, перевірені
за допомогою Debian GNU/Linux можете переглянути за адресою https://
www.debian.org/ports/amd64/.

Замість спроби описати всі різні конфігурації обладнання, які підтримуються для
64-bit PC, цей розділ містить загальну інформацію та вказівки на те, де можна
знайти додаткову інформацію.

2.1.1. Підтримувані архітектури

Debian GNU/Linux 13 підтримує 6 основні архітектури та декілька варіантів
кожної архітектури, відомі як «смаки».

┌────────────────────────────────┬─────────────┬────────────────────┬─────────┐
│          Архітектура           │   Debian    │   Підархітектура   │ Аромат  │
│                                │ Призначення │                    │         │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│AMD64 & Intel 64                │amd64        │                    │         │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│ARM із апаратним FPU            │armhf        │мультиплатформа     │armmp    │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│64-бітна ARM                    │arm64        │                    │         │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│Системи живлення                │ppc64el      │IBM POWER8 або      │         │
│                                │             │новіші машини       │         │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│64-розрядний RISC-V (з прямим   │riscv64      │                    │         │
│порядком байтів)                │             │                    │         │
├────────────────────────────────┼─────────────┼────────────────────┼─────────┤
│64-бітні IBM S/390              │s390x        │IPL від VM-reader та│загальний│
│                                │             │DASD                │         │
└────────────────────────────────┴─────────────┴────────────────────┴─────────┘

У цьому документі описано встановлення для архітектури 64-bit PC за допомогою
ядра Linux. Якщо ви шукаєте інформацію про будь-яку іншу Debian-підтримувану
архітектуру, перегляньте сторінки Debian-Порти.

2.1.2. Підтримка ЦП

Підтримуються процесори AMD64 та Intel 64.

2.1.3. Ноутбуки

З технічної точки зору, ноутбуки - це звичайні ПК, тому вся інформація, що
стосується систем ПК, стосується і ноутбуків. Установки на ноутбуках сьогодні
зазвичай працюють "з коробки", включаючи такі речі, як автоматичне призупинення
роботи системи при закритті кришки та специфічні для ноутбука апаратні кнопки,
наприклад, для вимкнення інтерфейсів wifi («режим польоту»). Тим не менш, іноді
виробники апаратного забезпечення використовують спеціалізоване або
пропрієтарне апаратне забезпечення для деяких специфічних функцій ноутбуків,
які можуть не підтримуватися. Щоб перевірити, чи ваш конкретний ноутбук добре
працює з GNU/Linux, див., наприклад, Сторінки ноутбуків під Linux.

2.1.4. Багато процесорів

Для цієї архітектури доступна підтримка багатопроцесорності, яку також
називають «симетричною багатопроцесорною обробкою» або SMP --. Стандартний
образ ядра Debian 13 було скомпільовано з підтримкою SMP-альтернатив. Це
означає, що ядро визначить кількість процесорів (або ядер процесора) і
автоматично вимкне SMP на однопроцесорних системах.

Наявність декількох процесорів у комп'ютері спочатку була проблемою лише для
серверних систем високого класу, але останніми роками стала поширеною майже
повсюдно з появою так званих «багатоядерних» процесорів. Вони містять два або
більше процесорних блоків, які називаються «ядра», в одній фізичній мікросхемі.

2.1.5. Підтримка графічного апаратного забезпечення

Підтримка графічних інтерфейсів у Debian визначається базовою підтримкою
системи X11 від X.Org та ядром. Базова графіка фреймбуфера забезпечується
ядром, тоді як десктопні середовища використовують X11. Доступність розширених
можливостей відеокарти, таких як апаратне прискорення 3D або апаратне
прискорення відео, залежить від фактичного графічного обладнання, яке
використовується у системі, а у деяких випадках - від встановлення додаткових
блоків «прошивки» (див. Розділ 2.2, «Пристрої, що потребують прошивки»).

На сучасних комп'ютерах наявність графічного дисплея зазвичай працює "з
коробки". Для багатьох апаратних засобів 3D-прискорення також добре працює "з
коробки", але все ще є обладнання, яке потребує двійкових блоків прошивки, щоб
працювати належним чином. У деяких випадках повідомлялося про апаратне
забезпечення, на якому навіть для базової підтримки графіки потрібно було
встановити додаткову прошивку відеокарти.

Детальну інформацію про підтримуване графічне обладнання та пристрої вказівки
можна знайти за посиланням https://wiki.freedesktop.org/xorg/. Debian 13
постачається з версією X.Org 7.7.

2.1.6. Апаратне забезпечення мережевого з'єднання

Майже будь-яка мережева інтерфейсна карта (NIC), що підтримується ядром Linux,
також має підтримуватися системою встановлення; драйвери зазвичай
завантажуються автоматично. Це стосується більшості карт PCI/PCI-Express, а
також карт PCMCIA/Express у ноутбуках.

ISDN підтримується, але не під час встановлення.

2.1.6.1. Бездротові мережеві карти

Бездротові мережі також підтримуються, і зростаюча кількість бездротових
адаптерів підтримується офіційним ядром Linux, хоча багато з них потребують
завантаження мікропрограми.

Якщо вам потрібна прошивка, програма встановлення запропонує вам завантажити
прошивку. Докладні відомості про те, як завантажити прошивку під час
встановлення, наведено у Розділ 6.4, «Завантаження втраченої прошивки».

Бездротові мережеві карти, які не підтримуються офіційним ядром Linux, як
правило, можна змусити працювати під керуванням Debian GNU/Linux, але вони не
підтримуються під час встановлення.

Якщо є проблеми з бездротовим зв'язком і немає іншої мережевої карти, яку можна
використати під час встановлення, все одно можна встановити Debian GNU/Linux за
допомогою образу DVD. Виберіть опцію, щоб не налаштовувати мережу і встановити
лише пакунки, доступні на DVD-диску. Після завершення інсталяції (після
перезавантаження) ви можете встановити потрібний драйвер і прошивку та
налаштувати мережу вручну.

У деяких випадках потрібний вам драйвер може бути недоступний у вигляді пакунка
Debian. Після цього вам доведеться пошукати в інтернеті вихідний код і
скомпілювати драйвер самостійно. Як це зробити, виходить за рамки цього
посібника. Якщо драйвер для Linux недоступний, ви можете скористатися пакунком
ndiswrapper, який дозволяє використовувати драйвер для Windows.

2.1.7. Дисплеї зі шрифтом Брайля

Підтримка дисплеїв зі шрифтом Брайля визначається базовою підтримкою, яку можна
знайти у brltty. Більшість дисплеїв працюють під управлінням brltty,
під'єднаний через послідовний порт, USB або Bluetooth. Докладні відомості про
підтримувані пристрої Брайля можна знайти на brltty вебсайті. Debian GNU/Linux
13 постачається з версією brltty 6.7.

2.1.8. Апаратний мовний синтез

Підтримка апаратних пристроїв синтезу мовлення визначається базовою підтримкою,
яку можна знайти у speakup. speakup підтримує лише інтегровані плати та
зовнішні пристрої, підключені до послідовного порту (не підтримуються адаптери
USB, послідовний USB або PCI). Детальну інформацію про підтримувані апаратні
пристрої синтезу мовлення можна знайти на сайті speakup. Debian GNU/Linux 13
постачається з версією speakup 3.1.6.

2.1.9. Периферійне та інше обладнання

Linux підтримує велику кількість апаратних пристроїв, таких як миші, принтери,
сканери, PCMCIA/CardBus/ExpressCard та USB-пристрої. Втім, більшість з цих
пристроїв не потрібні під час інсталяції системи.

Апаратне забезпечення USB зазвичай працює нормально. На деяких дуже старих
комп'ютерах деякі USB-клавіатури можуть потребувати додаткової конфігурації
(див. Розділ 3.6.6, «Проблеми з обладнанням, на які варто звернути увагу»). На
сучасних комп'ютерах USB-клавіатури та миші працюють без особливого
налаштування.

2.2. Пристрої, що потребують прошивки

Окрім наявності драйвера пристрою, деяке обладнання також потребує завантаження
так званої прошивки або мікрокоду у пристрій, перш ніж він почне функціонувати.
Найчастіше це стосується мережевих інтерфейсних карт (особливо бездротових
мережевих карт), але, наприклад, деякі USB-пристрої і навіть деякі контролери
жорстких дисків також потребують прошивки.

Для багатьох відеокарт базова функціональність доступна без додаткової
прошивки, але використання розширених можливостей вимагає встановлення в
систему відповідного файлу прошивки.

У багатьох старих пристроях, які потребують прошивки для роботи, файл прошивки
був постійно розміщений виробником в EEPROM/флеш-чіпі на самому пристрої.
Сьогодні більшість нових пристроїв вже не мають вбудованої прошивки, тому файл
прошивки повинен завантажуватися в пристрій хостовою операційною системою при
кожному завантаженні системи.

У більшості випадків, відповідно до критеріїв, що використовуються проєктом
Debian GNU/Linux, мікропрограми є невільними і тому не можуть бути включені до
основного дистрибутива. Якщо драйвер пристрою включено до дистрибутива і якщо
Debian GNU/Linux легально може розповсюджувати прошивку, вона часто буде
доступна окремим пакунком з розділу невільних прошивок архіву (до Debian GNU/
Linux 12.0: з розділу невільних прошивок).

Однак це не означає, що таке обладнання не можна використовувати під час
інсталяції. Починаючи з Debian GNU/Linux 12.0, відповідно до Загальної
резолюції про невільне програмне забезпечення від 2022 року, офіційні
інсталяційні образи можуть містити пакунки з невільним програмним
забезпеченням. За замовчуванням, debian-installer визначить необхідну прошивку
(на основі журналів ядра та інформації про модальності) і встановить відповідні
пакунки, якщо їх буде знайдено на носії для встановлення (наприклад, на
netinst). Менеджер пакунків автоматично налаштовується на відповідні
компоненти, щоб ці пакунки отримували оновлення безпеки. Зазвичай це означає,
що на додаток до основного компонента буде увімкнено компонент невільної
прошивки.

Користувачі, які бажають повністю вимкнути пошук прошивки, можуть зробити це,
встановивши параметр завантаження firmware=never. Це псевдонім для довшої форми
hw-detect/firmware-lookup=never.

Якщо пошук прошивки не вимкнено повністю, debian-installer все одно підтримує
завантаження файлів прошивки або пакунків, що містять прошивку, зі знімного
носія, наприклад, з флешки. Докладні відомості про те, як завантажити файли або
пакунки прошивки під час встановлення, наведено у Розділ 6.4, «Завантаження
втраченої прошивки». Зауважте, що debian-installer з меншою ймовірністю
запитуватиме файли прошивки тепер, коли невільні пакунки прошивки можуть бути
включені до інсталяційних образів.

Якщо debian-installer запитує файл прошивки, а у вас немає цього файлу, або ви
не хочете встановлювати невільний файл прошивки у вашій системі, ви можете
спробувати продовжити без завантаження прошивки. Є кілька випадків, коли
драйвер пропонує встановити додаткову прошивку, оскільки вона може знадобитися
за певних обставин, але пристрій працює без неї у більшості систем (наприклад,
це трапляється з певними мережевими картами, які використовують драйвер tg3).

2.3. Придбання обладнання спеціально для GNU/Linux

Є кілька постачальників, які постачають системи з Debian або іншими
дистрибутивами GNU/Linux передвстановленими. Ви можете заплатити більше за цей
привілей, але за це ви купуєте певний рівень душевного спокою, оскільки ви
можете бути впевнені, що апаратне забезпечення добре підтримується GNU/Linux.

Якщо ви все ж таки купуєте комп'ютер з встановленою Windows, уважно прочитайте
ліцензію на програмне забезпечення, що постачається з Windows; можливо, ви
зможете відмовитися від ліцензії та отримати від продавця знижку. Пошук в
Інтернеті за запитом «windows refund» може дати вам корисну інформацію, яка
допоможе вам у цьому.

Незалежно від того, чи купуєте ви систему з Linux у комплекті, чи навіть
вживану систему, все одно важливо перевірити, що ваше обладнання підтримується
ядром Linux. Перевірте, чи вказано ваше обладнання в переліку посилань,
наведених вище. Повідомте продавця (якщо такий є), що ви купуєте систему Linux.
Підтримка Linux-дружніх постачальників обладнання.

2.3.1. Уникайте пропрієтарного або закритого обладнання

Деякі виробники обладнання просто не скажуть нам, як писати драйвери для
їхнього обладнання. Інші не дозволять нам отримати доступ до документації без
угоди про нерозголошення, що завадило б нам випустити вихідний код драйвера,
який є одним з центральних елементів вільного програмного забезпечення.
Оскільки нам не було надано доступу до придатної для використання документації
на цих пристроях, вони просто не працюватимуть під Linux.

У багатьох випадках існують стандарти (або принаймні деякі стандарти де-факто),
що описують, як операційна система та її драйвери пристроїв взаємодіють з
певним класом пристроїв. Всі пристрої, які відповідають такому (де-факто)
стандарту, можуть використовуватися з одним загальним драйвером пристрою і не
потребують жодних драйверів для конкретних пристроїв. З деякими типами
обладнання (наприклад, USB «пристроями людського інтерфейсу», тобто
клавіатурами, мишами тощо, а також USB-пристроями для зберігання даних, такими
як флеш-диски та зчитувачі карт пам'яті) це працює дуже добре, і практично
кожен пристрій, що продається на ринку, є сумісним зі стандартами.

В інших областях, серед яких, наприклад, принтери, це, на жаль, не так. Хоча є
багато принтерів, до яких можна звертатися за допомогою невеликого набору
(де-факто) стандартних мов керування, і тому вони можуть без проблем працювати
в будь-якій операційній системі, є чимало моделей, які розуміють лише
пропрієтарні команди керування, для яких немає придатної для використання
документації, і тому їх або взагалі не можна використовувати у вільних
операційних системах, або можна використовувати лише з драйвером із закритим
вихідним кодом, що надається виробником.

Навіть якщо під час купівлі пристрою постачальник надає драйвер із закритим
кодом для такого обладнання, практичний термін служби пристрою обмежений
наявністю драйверів. У наш час життєвий цикл продукту став коротким, і не
рідкість, що через деякий час після того, як споживчий пристрій було знято з
виробництва, виробник більше не випускає жодних оновлень драйверів. Якщо старий
драйвер із закритим вихідним кодом перестає працювати після оновлення системи,
пристрій, який в іншому випадку чудово працював, стає непридатним для
використання через відсутність підтримки драйверів, і в цьому випадку нічого не
можна вдіяти. Тому вам слід уникати купівлі закритого обладнання, незалежно від
того, з якою операційною системою ви хочете його використовувати.

Ви можете допомогти покращити цю ситуацію, заохочуючи виробників закритого
обладнання випускати документацію та інші ресурси, необхідні для того, щоб ми
могли надавати вільні драйвери для їхнього обладнання.

2.4. Інсталяційний носій

Цей розділ допоможе вам визначити, які типи носіїв можна використовувати для
встановлення Debian. Носіям присвячено цілий розділ Розділ 4, Отримання
інсталяційних даних, в якому перелічено переваги та недоліки кожного типу
носіїв. Можливо, ви захочете повернутися до цієї сторінки, коли дійдете до
цього розділу.

2.4.1. CD-ROM/DVD-ROM/BD-ROM

Встановлення з оптичного диска підтримується для більшості архітектур.

На ПК підтримуються оптичні накопичувачі SATA, IDE/ATAPI, USB і SCSI, а також
пристрої FireWire, які підтримуються драйверами ohci1394 і sbp2.

2.4.2. USB-накопичувач

Флеш-диски USB, також відомі як USB-накопичувачі, стали широко використовуваним
і дешевим пристроєм зберігання даних. Більшість сучасних комп'ютерних систем
також дозволяють завантажувати debian-installer з такої флешки. Багато сучасних
комп'ютерних систем, зокрема нетбуки і тонкі ноутбуки, взагалі не мають
оптичних приводів, і завантаження з USB-носія є стандартним способом
встановлення на них нової операційної системи.

2.4.3. Мережа

Мережа може бути використана під час інсталяції для отримання файлів,
необхідних для інсталяції. Використання мережі чи ні залежить від обраного вами
способу встановлення та ваших відповідей на певні запитання, які будуть задані
під час інсталяції. Система встановлення підтримує більшість типів мережевих
з'єднань (включаючи PPPoE, але не ISDN або PPP) через HTTP або FTP. Після
завершення інсталяції ви також можете налаштувати систему на використання ISDN
і PPP.

Ви також можете завантажити інсталяційну систему через мережу без використання
локальних носіїв, таких як CD/DVD-диски або флешки. Якщо у вас вже є
інфраструктура netboot (тобто у вашій мережі вже працюють служби DHCP і TFTP),
це дозволяє легко і швидко розгортати велику кількість комп'ютерів.
Налаштування необхідної інфраструктури вимагає певного рівня технічного
досвіду, тому не рекомендується для користувачів-початківців.

Іншим варіантом є бездискова інсталяція, яка використовує мережеве завантаження
з локальної мережі і монтування всіх локальних файлових систем у NFS.

2.4.4. Жорсткий диск

Завантаження інсталяційної системи безпосередньо з жорсткого диска є ще одним
варіантом для різних архітектур. Для цього потрібно, щоб інсталяційну програму
на жорсткий диск завантажила інша операційна система. Цей метод рекомендується
лише в особливих випадках, коли немає іншого способу встановлення.

2.4.5. Un*x або GNU система

Якщо ви використовуєте іншу Unix-подібну систему, ви можете скористатися нею
для встановлення Debian GNU/Linux без використання debian-installer, описаного
у решті частини цього посібника. Цей тип встановлення може бути корисним для
користувачів з непідтримуваним обладнанням або на хостах, які не можуть
дозволити собі простою. Якщо вас зацікавила ця методика, перейдіть за
посиланням Розділ D.3, «Встановлення Debian GNU/Linux із системи Unix/Linux».
Цей спосіб встановлення рекомендується лише досвідченим користувачам, якщо
жоден інший спосіб встановлення не є доступним.

2.4.6. Підтримувані системи сховищ

Програма встановлення Debian містить ядро, яке створено для максимальної
кількості систем, на яких воно може бути запущено.

Загалом, система встановлення Debian включає підтримку накопичувачів IDE (також
відомих як PATA), контролерів і накопичувачів SATA і SCSI, USB і FireWire.
Підтримувані файлові системи включають FAT, розширення Win-32 FAT (VFAT) і
NTFS.

Також підтримуються системи IDE.

2.5. Вимоги до памʼяті та дискового простору

Ми рекомендуємо принаймні 512MB оперативної пам'яті та 4GB місця на жорсткому
диску для виконання інсталяції. Більш детальні значення дивіться у Розділ 3.4,
«Відповідність до мінімальних вимог щодо обладнання».

Розділ 3. Перед тим як встановити Debian GNU/Linux

Зміст

3.1. Огляд процесу встановлення
3.2. Зробіть резервну копію своїх даних!
3.3. Інформація, яка Вам знадобиться
    3.3.1. Документація
    3.3.2. Пошук ресурсів з інформацією про обладнання
    3.3.3. Сумісність обладнання
    3.3.4. Мережеві налаштування
3.4. Відповідність до мінімальних вимог щодо обладнання
3.5. Передрозподіл для багатосистемних конфігурацій
3.6. Передінсталяційне налаштування обладнання та операційної системи
    3.6.1. Виклик меню налаштування BIOS/UEFI
    3.6.2. Вибір завантажувального пристрою
    3.6.3. Системи з прошивкою UEFI
    3.6.4. Безпечне завантаження
    3.6.5. Вимкнення функції «швидкого завантаження»/«швидкого запуску» Windows
    3.6.6. Проблеми з обладнанням, на які варто звернути увагу

Цей розділ розповідає про підготовку до встановлення Debian до того, як Ви
запустите програму встановлення. Це включає резервне копіювання Ваших даних,
збір інформації про Ваше обладнання та визначення іншої необхідної інформації.

3.1. Огляд процесу встановлення

По-перше, лише коротке зауваження щодо повторної інсталяції. З Debian ситуація,
яка вимагатиме повного перевстановлення Вашої системи, є дуже рідкою; і можливо
найпоширенішим випадком була б механічна несправність жорсткого диска.

Більшість відомих операційних систем, якщо станеться щось критичне або для
оновлення ОС можуть вимагати повного перевстановлення. Навіть якщо повне
перевстановлення не потрібне, у більшості випадків після оновлення ОС потрібно
перевстановити програми, якими Ви користуєтеся.

З Debian GNU/Linux набагато ймовірніше, що Вашу ОС можна полагодити, а не
замінити, якщо щось піде не так. Оновлення ніколи не вимагають комплексної
установки; Ви завжди можете оновити лише потрібне. І програми майже завжди
сумісні з наступними випусками ОС. Якщо нова версія програми потребує новішого
допоміжного програмного забезпечення, система пакунків Debian забезпечує
автоматичне визначення та встановлення усього необхідного. Річ у тім, що було
докладено багато зусиль, щоб уникнути необхідності нової інсталяції, тому
розглядайте це як останній варіант. Інсталятор не призначений для встановлення
поверх наявної системи.

Це дорожня карта кроків, які Ви пройдете під час встановлення.

 1. Зробіть резервну копію будь-яких наявних даних або документів з жорсткого
    диска, куди Ви плануєте встановити.

 2. Перед початком встановлення зберіть інформацію про свій комп’ютер та всю
    необхідну документацію.

 3. Знайдіть та/або завантажте програмне забезпечення інсталятора та будь-які
    спеціалізовані драйвери або файли мікропрограм, які потрібні Вашій машині.

 4. Налаштуйте завантажувальний носій, наприклад, CD/DVD або USB-накопичувач,
    або надайте інфраструктуру мережевого завантаження, з якої можна
    завантажити інсталятор.

 5. Завантажте систему встановлення.

 6. Виберіть мову установки.

 7. Активуйте підключення до мережі Ethernet, якщо воно доступне.

 8. Якщо необхідно, змініть розмір наявних розділів на цільовому жорсткому
    диску для звільнення місця під нову систему.

 9. Створіть та змонтуйте розділи, на які буде встановлено Debian.

10. Перегляньте автоматичне завантаження/інсталяцію/налаштування базової
    системи.

11. Оберіть та встановіть додаткові програми.

12. Встановіть завантажувач, який може запускати Debian GNU/Linux та/або наявну
    систему.

13. Завантажте перший раз щойно встановлену систему.

Для 64-bit PC можна використовувати графічну версію системи встановлення.
Більше інформації про цей графічний інсталятор див. Розділ 5.1.6, «Графічний
інсталятор».

Якщо у Вас виникли проблеми під час інсталяції, корисно знати, які пакунки у
яких кроках беруть участь. Представляємо провідних програмних акторів у цій
інсталяційній драмі:

Програма інсталятора, debian-installer, є основним предметом цього посібника.
Він виявляє апаратне забезпечення та завантажує відповідні драйвери,
використовує dhcp-клієнт для налаштування мережевого з’єднання, запускає
debootstrap для встановлення пакетів базової системи та запускає tasksel, щоб
дозволити Вам інсталювати певне додаткове програмне забезпечення. Багато інших
учасників відіграють менші ролі в цьому процесі, але debian-installer закінчує
своє завдання, коли Ви завантажуєте нову систему вперше.

Щоб налаштувати систему до своїх потреб, tasksel дозволяє Вам встановити різні
попередньо визначені комплекти програмного забезпечення, наприклад, вебсервер
або середовище робочого столу.

Одним із важливих параметрів під час інсталяції є те, чи встановлювати графічне
середовище робочого столу, що складається з системи X Window та одного з
доступних середовищ графічного робочого столу. Якщо Ви вирішите не обирати
завдання «Desktop environment», Ви отримаєте лише відносно просту систему,
керовану командним рядком. Встановлення середовища робочого столу є
необов’язковим, оскільки в порівнянні з системою, яка працює лише в текстовому
режимі, Desktop потребує порівняно більшого обсягу на диску та оскільки багато
систем Debian GNU/Linux -- це сервери, яким насправді не потрібен графічний
інтерфейс для роботи.

Просто пам'ятайте, що система X Window повністю відокремлена від
debian-installer та насправді вона набагато складніша. Усунення несправностей
системи X Window не входить до меж рекомендацій цього посібника.

3.2. Зробіть резервну копію своїх даних!

Перш ніж почати, обов’язково створіть резервну копію кожного файлу зі своєї
системи. Якщо на Вашому комп’ютері вперше буде інстальовано нерідну операційну
систему, цілком ймовірно, що вам доведеться перерозподілити диск для звільнення
місця під Debian GNU/Linux. Щоразу, коли Ви розподіляєте свій диск на розділи,
Ви ризикуєте втратити все на диску, незалежно від того, яку програму Ви для
цього використовуєте. Програми, які використовуються під час встановлення
Debian GNU/Linux є досить надійними та служать вже багато років; але вони також
і досить потужні, тож помилковий хід може Вам дорого коштувати. Навіть після
резервного копіювання будьте обережні та обмірковуйте свої відповіді та дії.
Дві хвилини роздумів можуть заощадити години непотрібної роботи. Поспішайте
повільно.

Якщо Ви створюєте систему з завантаженням різних ОС, переконайтеся, що у Вас
поруч на носії є дистрибутив будь-якої іншої наявної операційної системи. Попри
те, що зазвичай це не обов’язково, можуть виникнути ситуації, коли для
відновлення завантаження, може знадобитися перевстановити завантажувач (boot
loader), а в гіршому випадку навіть доведеться перевстановити всю ОС та
відновити попередньо створену резервну копію.

3.3. Інформація, яка Вам знадобиться

3.3.1. Документація

3.3.1.1. Настанови з інсталяції

Цей документ, що Ви зараз читаєте, у форматах ASCII, HTML або PDF.

  • install.uk.txt

  • install.uk.html

  • install.uk.pdf

3.3.1.2. Апаратна документація

Нерідко містить корисну інформацію про налаштування або використання Вашого
обладнання.

  • Сторінка обладнання Debian Wiki

3.3.2. Пошук ресурсів з інформацією про обладнання

У багатьох випадках інсталятор зможе автоматично визначити Ваше обладнання. Але
щоб бути готовим, ми рекомендуємо Вам ознайомитися зі своїм обладнанням перед
встановленням.

Інформацію про обладнання можна отримати з:

  • Посібники, які постачаються з кожним обладнанням.

  • Екрани налаштування BIOS/UEFI Вашого комп’ютера. Ви можете переглядати ці
    екрани під час запуску комп’ютера, натиснувши певну комбінацію клавіш.
    Перевірте свій посібник щодо комбінації. Часто це клавіша Delete або F2, на
    деяких моделях Esc або F10, але різні виробники використовують різні
    клавіші або комбінації клавіш. Зазвичай після запуску комп’ютера
    з’являється повідомлення про те, яку клавішу потрібно натиснути, щоб
    перейти до екрана налаштування.

  • Чохли та коробки для кожного обладнання.

  • Розділ "Система" панелі керування Windows.

  • Системні команди або інструменти в іншій операційній системі. Це джерело
    особливо корисне для отримання інформації про оперативну пам’ять та обсяг
    жорсткого диска.

  • Ваш системний адміністратор або Інтернет-провайдер. Ці джерела можуть
    повідомити Вам параметри налаштування мережі та електронної пошти.

Таблиця 3.1. Інформація про обладнання, корисна для встановлення

┌─────────────────┬────────────────────────────────────────────────┐
│   Обладнання    │        Інформація, яку Ви повинні знати        │
├─────────────────┼────────────────────────────────────────────────┤
│                 │Скільки є.                                      │
│                 ├────────────────────────────────────────────────┤
│                 │Їх порядок в системі.                           │
│                 ├────────────────────────────────────────────────┤
│                 │Тип IDE (він же PATA), SATA чи SCSI.            │
│Жорсткі диски    ├────────────────────────────────────────────────┤
│                 │Доступний вільний простір.                      │
│                 ├────────────────────────────────────────────────┤
│                 │Розділи.                                        │
│                 ├────────────────────────────────────────────────┤
│                 │Розділи, де встановлені інші операційні системи.│
├─────────────────┼────────────────────────────────────────────────┤
│Інтерфейси мережі│Тип/модель доступних мережевих інтерфейсів.     │
├─────────────────┼────────────────────────────────────────────────┤
│Принтер          │Модель та виробник.                             │
├─────────────────┼────────────────────────────────────────────────┤
│Відеокарта       │Тип/модель та виробник.                         │
└─────────────────┴────────────────────────────────────────────────┘


3.3.3. Сумісність обладнання

Багато продуктів працюють на Linux без проблем, більше того його апаратна
підтримка вдосконалюється з кожним днем. Але все одно Linux все ще не підтримує
стільки типів обладнання, як деякі інші операційні системи.

Драйвери у Linux в більшості випадків написані не для певного «продукту» чи
конкретного «бренду», а для певного апаратного забезпечення/чипсета. Багато,
здавалося б, різних продуктів/брендів основані на тому самому дизайні
обладнання; нерідко виробники чипів надають так звані «еталонні проєкти» для
продуктів, заснованих на їхніх чипах, які потім використовуються різними
виробниками пристроїв та продаються під багатьма різними назвами продуктів або
брендів.

Це має як переваги, так і недоліки. Перевагою є те, що драйвер для одного
чипсета працює з багатьма різними продуктами від різних виробників, за умови,
що їх продукт базується на тому самому чипсеті. Недоліком є те, що не завжди
легко побачити, який саме чипсет використовується в певному продукті/бренді. На
жаль, іноді виробники пристроїв змінюють апаратну частину свого продукту, не
змінюючи назву продукту або принаймні номер версії продукту, так що, коли дві
одиниці обладнання однієї марки/назви продукту купуються в різний час, вони
іноді можуть базуватися на двох різних чипсетах і, відповідно, вимагають два
різні драйвери, або для одного з них може не бути драйвера взагалі.

Для пристроїв USB та PCI/PCI-Express/ExpressCard хороший спосіб дізнатися, на
якому чипсеті вони засновані, -- це переглянути їхні ідентифікатори пристроїв.
Усі пристрої USB/PCI/PCI-Express/ExpressCard мають так звані ідентифікатори «
виробника» та «продукту», і комбінація цих двох зазвичай однакова для
будь-якого продукту, заснованого на тому самому чипсеті.

У системах Linux ці ідентифікатори можна прочитати за допомогою команди lsusb
для пристроїв USB і командою lspci -nn для пристроїв PCI/PCI-Express/
ExpressCard. Ідентифікатори виробника та продукту зазвичай подаються у формі
двох шістнадцяткових чисел, розділених двокрапкою, наприклад «1d6b:0001».

Приклад результату команди lsusb: «Bus 001 Device 001: ID 1d6b:0002 Linux
Foundation 2.0 root hub», де 1d6b -- це ідентифікатор виробника, а 0002 --
ідентифікатор продукту.

Приклад результату команди lspci -nn для карти Ethernet: «03:00.0 Ethernet
controller [0200]: Realtek Semiconductor Co., Ltd. RTL8111/8168B PCI Express
Gigabit Ethernet controller [10ec:8168] (rev 06)». Ідентифікатори наведено в
крайніх правих квадратних дужках, тобто тут 10ec -- це виробник, а 8168 --
ідентифікатор продукту.

Як інший приклад, графічна карта може надати такі дані: «04:00.0 VGA compatible
controller [0300]: Advanced Micro Devices [AMD] nee ATI RV710 [Radeon HD 4350]
[1002:954f]».

У системах Windows ідентифікатори пристроїв можна знайти в диспетчері пристроїв
Windows на вкладці «деталі», де ідентифікатор виробника має префікс VEN_, а
ідентифікатор продукту з префіксом DEV_. У новіших системах Windows, щоб
побачити ідентифікатори, оскільки вони не відображаються типово, на вкладці
деталей диспетчера пристроїв потрібно вибрати «Hardware IDs».

Пошук в Інтернеті за ідентифікатором виробника/продукту, «Linux» та «драйвер/
driver» як пошукові терміни допомагає знайти інформацію щодо статусу підтримки
драйвера для певного чипсета. Якщо пошук за ідентифікатором виробника/продукту
не дає потрібних результатів, здійсніть пошук за кодовими назвами мікросхем,
які також часто надаються командами lsusb та lspci («RTL8111»/«RTL8168B» у
прикладі мережевої карти та «RV710» у прикладі відеокарти).

3.3.3.1. Тестування апаратної сумісності з Live-системою

Debian GNU/Linux також доступна для певних архітектур як так звана «жива (live)
система». Жива система -- це попередньо налаштована готова до використання
система у стисненому форматі, яку можна завантажувати та використовувати з
носія лише для читання, наприклад CD або DVD. Його використання типово не
робить змін на Вашому комп’ютері. Ви можете змінювати налаштування користувача
та встановлювати додаткові програми з живої системи, але все це відбувається
лише в оперативній пам’яті комп’ютера, тобто якщо Ви вимкнете комп’ютер і знову
завантажите живу систему, усе буде скинуто до початкових значень. Якщо Ви
хочете перевірити, чи підтримується певне обладнання Debian GNU/Linux,
найпростішим способом буде запустити Debian та перевірити обладнання на цій
живій системі.

Є кілька обмежень щодо використання живих систем. По-перше, через те що всі
зміни, які Ви робите в живій системі, повинні зберігатися в оперативній пам’яті
Вашого комп’ютера, це працює лише на системах, де достатньою для цього
оперативної пам’яті, тому додаткова інсталяція великих програмних пакунків може
бути невдалою через нестачу пам’яті. Іншим обмеженням щодо перевірки апаратної
сумісності є те, що офіційна жива система Debian GNU/Linux містить лише
безплатні компоненти, тобто до неї не входять так звані "не вільні" (non-free)
файли прошивки. Звичайно, такі "не вільні" пакунки можна встановити в системі
вручну, але при цьому немає автоматичного визначення необхідних файлів
прошивки, як у debian-installer, тому інсталяція non-free компонентів має
виконуватися за необхідності вручну.

Інформацію про доступні варіанти живих образів Debian можна знайти на вебсайті
Debian Live Images.

3.3.4. Мережеві налаштування

Якщо Ваш комп’ютер під'єднаний до фіксованої мережі (тобто Ethernet або
еквівалентне з’єднання, а не комутоване чи PPP), якою керує хтось інший, Вам
слід попросити системного адміністратора Вашої мережі надати таку інформацію:

  • Назва Вашого хосту (можливо, Ви зможете це знайти самостійно).

  • Назва Вашого домену.

  • IP адреса Вашого комп'ютера.

  • Маска мережі.

  • IP-адреса шлюзу, тобто комп’ютер, що з’єднує Вашу мережу з іншою мережею
    (або інтернетом), якщо у Вашій мережі є шлюз.

  • Система у Вашій мережі, яку потрібно використовувати як сервер DNS (служба
    доменних імен).

Якщо мережа, до якої Ви під'єднані, використовує для налаштування мережі
протокол DHCP (Dynamic Host Configuration Protocol), Вам не потрібна ця
інформація, оскільки сервер DHCP передасть її безпосередньо на Ваш комп’ютер
під час процесу встановлення.

Якщо у Вас доступ до інтернету через DSL або кабельний модем (тобто через
мережу кабельного телебачення) та є маршрутизатор/роутер (часто надається вже з
налаштуваннями провайдера), який обслуговує підключення до мережі, DHCP
зазвичай доступний типово.

Просте правило: якщо у Вас в домашній мережі основна система Windows та для
отримання доступу до інтернету немає потреби вручну задавати параметри мережі,
підключення до мережі в Debian GNU/Linux також буде налаштовано автоматично.

Якщо Ви використовуєте мережу WLAN/Wi-Fi, Вам слід дізнатися:

  • ESSID («назва») Вашої бездротової мережі.

  • Ключ безпеки WEP або WPA/WPA2 для доступу до мережі (якщо є).

3.4. Відповідність до мінімальних вимог щодо обладнання

Після того, як зберете інформацію про апаратне забезпечення свого комп’ютера,
переконайтеся, що це обладнання дозволяє виконати бажаний тип інсталяції.

Залежно від потреб, можна впоратися з меншою кількістю рекомендованого
обладнання, переліченого в таблиці нижче. Однак більшість користувачів може
розчаруватися, якщо проігнорують ці поради.

Система Pentium 4, з 1 ГГц є мінімально рекомендованою для настільної системи.

Таблиця 3.2. Рекомендовані мінімальні системні вимоги

┌──────────────┬──────────────────────┬───────────────────────────┬───────────┐
│Тип інсталяції│  Оперативна пам'ять  │    Оперативна пам'ять     │ Жорсткий  │
│              │      (мінімум)       │      (рекомендовано)      │   диск    │
├──────────────┼──────────────────────┼───────────────────────────┼───────────┤
│Без робочого  │512MB                 │1GB                        │4GB        │
│столу         │                      │                           │           │
├──────────────┼──────────────────────┼───────────────────────────┼───────────┤
│З робочим     │1GB                   │2GB                        │10GB       │
│столом        │                      │                           │           │
└──────────────┴──────────────────────┴───────────────────────────┴───────────┘


Мінімальні значення припускають, що своп буде увімкнений та не буде
використовуватися live-образ. Значення «No desktop» (без робочого столу)
передбачає, що буде використовуватися текстовий інсталятор (а не графічний).

Фактичні мінімальні вимоги до пам’яті набагато менші за цифри, наведені в цій
таблиці. Якщо ввімкнено своп, можна встановити Debian лише з 350MB. Те саме
стосується вимог до дискового простору, особливо якщо Ви обираєте, які програми
встановити; для отримання додаткової інформації щодо вимог до дискового
простору див. Розділ D.2, «Дисковий простір, необхідний для завдань».

Інсталятор зазвичай автоматично вмикає твіки збереження пам’яті для запуску в
системі з таким малим обсягом пам’яті, але на слабо протестованих архітектурах
він може не робити цього. Однак його можна увімкнути вручну, додавши параметр
завантаження lowmem=1 або навіть lowmem=2 (див. також Розділ 6.3.1.1,
«Перевірка доступної пам'яті / режим низької пам'яті» та Розділ 5.3.2, «Debian
Параметри встановлення»).

Інсталяція в системах із меншим обсягом пам’яті^[2] або доступним простором на
диску може бути, але рекомендується лише для досвідчених користувачів.

Можна запустити графічне середовище робочого столу на старіших або слабких
системах, але в такому випадку рекомендується встановити диспетчер вікон, якому
потрібно менше ресурсів, ніж для GNOME або KDE Plasma; серед альтернатив є такі
менеджери як xfce4, icewm та wmaker, але є й інші.

Практично неможливо вказати загальні вимоги до пам’яті чи до дискового простору
для серверного варіанту встановлення, оскільки це дуже залежить від
запланованого використання сервера.

Зверніть увагу, що всі наведені розміри є приблизними та не включають такі
речі, які зазвичай є в системі, тобто пошту, файли користувача, дані. Завжди
краще думати з запасом, плануючи простір для своїх файлів та даних.

Дисковий простір, необхідний для безперебійної роботи системи Debian GNU/Linux
вже врахований у цих рекомендованих системних вимогах. Примітно, що розділ /var
містить багато інформації про стан Debian на додаток до свого звичайного
вмісту, такої як файли журналу. Файли dpkg (з інформацією про всі встановлені
пакунки) можуть легко зайняти 40 МБ. Крім того, apt розміщує тут звантажені
пакунки перед їх встановленням. Зазвичай, для /var бажано відокремити принаймні
200 МБ та набагато більше, якщо Ви встановлюєте графічне середовище робочого
столу.

3.5. Передрозподіл для багатосистемних конфігурацій

Розподіл диска означає просто розбиття диска на розділи. Тоді кожен розділ
незалежний від інших. Це приблизно як зведення стін в будинку; якщо Ви
доставляєте меблі в одній кімнаті, це не впливає на вільний простір іншої
кімнати.

Якщо у Вас уже є операційна система (Windows, OS/2, MacOS, Solaris, FreeBSD,
...) , яка використовує весь диск, і Ви хочете додати Debian на той самий диск,
Вам потрібно буде його перерозподілити. Для Debian потрібні свої розділи на
диску. Його не можна встановити на розділи Windows або Mac OS X. Він може
спільно користуватися деякими розділами з іншими системами Unix, але це тут не
розглядається. Принаймні Вам буде потрібен для Debian окремий кореневий розділ.

Інформацію про поточні налаштування розділів можна знайти з інструментом для
розподілу розділів для поточної операційної системи, наприклад інтегрованим
Диспетчером дисків у Windows. Інструменти розділення завжди дозволяють
переглянути наявні розділи без внесення змін.

Загалом, зміна розділу з уже наявною файловою системою призведе до знищення
будь-якої там інформації. Це значить, що Вам потрібно завжди робити резервні
копії перед виконанням будь-якого перерозподілу. Використовуючи аналогію з
будинком, Ви, ймовірно, захочете прибрати всі меблі, перш ніж пересунути стіну,
інакше ризикуєте все зруйнувати.

Кілька сучасних операційних систем пропонують можливість переміщення та зміни
розміру окремих наявних розділів без видалення даних. Це дозволяє звільнити
місце для додаткових розділів без втрати даних. Попри те, що в більшості
випадків це працює досить добре, перерозподіл диска є за своєю суттю
небезпечною дією, і його слід виконувати лише після створення повної резервної
копії усіх даних. Для розділів FAT/FAT32 та NTFS, які використовуються Windows,
можливість переміщувати та змінювати розміри без втрат надається так само
debian-installer як і інтегрованим диспетчером дисків Windows.

Для безболісної (без втрати даних) зміни розміру наявного розділу FAT чи NTFS з
debian-installer, перейдіть до кроку розподілу, оберіть параметр ручного
розподілу, оберіть розділ, який потрібно змінити та просто вкажіть його новий
розмір.

3.6. Передінсталяційне налаштування обладнання та операційної системи

У цьому розділі йдеться про те, як перед встановленням налаштувати апаратне
забезпечення, якщо є необхідність цього до інсталяції Debian. Як правило, це
передбачає перевірку та, можливо, зміну параметрів BIOS/UEFI/системи під Вашу
систему. Прошивка «BIOS/UEFI» або «прошивка системи» є основним програмним
забезпеченням, яке використовується обладнанням; воно найбільш критично
залучене під час процесу початкового завантаження (після увімкнення).

3.6.1. Виклик меню налаштування BIOS/UEFI

BIOS/UEFI надає базові функції, необхідні для завантаження комп’ютера та
надання операційній системі доступу до обладнання. У Вашій системі є меню
налаштування BIOS/UEFI, яке відповідно використовується для налаштування BIOS/
UEFI. Щоб увійти в меню налаштування BIOS/UEFI, потрібно натиснути клавішу або
комбінацію клавіш після ввімкнення комп’ютера. Часто це клавіші Delete або F2,
але деякі виробники використовують інші клавіші. Зазвичай після запуску
комп’ютера з’являється повідомлення про те, яку клавішу потрібно натиснути,
щоби перейти до налаштувань.

3.6.2. Вибір завантажувального пристрою

У меню налаштування BIOS/UEFI можна вибрати, які пристрої та в якій
послідовності будуть перевірятися для завантаження операційної системи. Серед
можливих варіантів зазвичай є внутрішні жорсткі диски, пристрій CD/DVD та
накопичувачі USB, такі як USB-флешки чи зовнішні диски USB. У сучасних системах
також часто є можливість вибору мережевого завантаження через PXE.

Залежно від обраних інсталяційних носіїв (CD/DVD-ROM, USB-накопичувач, мережеве
завантаження), потрібно увімкнути відповідні завантажувальні пристрої.

Більшість версій BIOS/UEFI дозволяють викликати меню завантаження під час
запуску системи, де можна вибрати, з якого пристрою комп’ютер повинен
запуститися для поточного сеансу. Якщо ця опція доступна, BIOS/UEFI зазвичай
під час запуску покаже коротке повідомлення на зразок «press F12 for boot menu»
. Необхідна клавіша для виклику цього меню залежить від системи; найчастіше
використовуються F12, F11 та F8. Вибір пристрою в цьому меню не змінює порядок
завантаження BIOS/UEFI в налаштуваннях, тобто Ви можете запустити ПК один раз
із USB-накопичувача, а в налаштуваннях залишиться основним пристроєм внутрішній
жорсткий диск.

Якщо Ваш BIOS/UEFI не надає Вам меню завантаження для вибору тимчасового
завантажувального пристрою, Вам доведеться змінити ці налаштування у BIOS/UEFI,
щоби пристрій, з якого повинен бути завантажений debian-installer був основним
завантажувальним пристроєм.

На жаль, деякі комп’ютери можуть мати збійні версії BIOS/UEFI. Завантаження
debian-installer з USB-накопичувача може не працювати, навіть якщо в меню
налаштувань BIOS/UEFI є відповідний параметр, а носій вибрано як основний
завантажувальний пристрій. У деяких із цих систем використання USB-накопичувача
як завантажувального пристрою неможливе; інших можна змусити завантажитися з
флешки, змінивши тип пристрою в налаштуваннях BIOS/UEFI з «жорсткого диска USB»
або «флешки USB» на «USB ZIP» або «USB CDROM». Зокрема, якщо Ви використовуєте
гібридний інсталяційний образ на USB-накопичувачі (див. Розділ 4.3.1,
«Підготовка USB-диска з гібридним образом CD/DVD»), зміна типу пристрою на «USB
CDROM » допомагає в деяких BIOS, які не завантажуються з USB-накопичувача в
режимі жорсткого диска USB. Можливо, Вам ще знадобиться в налаштуваннях BIOS/
UEFI увімкнути «Підтримку застарілих USB».

Якщо Ви не можете керувати BIOS/UEFI для завантаження безпосередньо з USB у Вас
все одно є можливість використовувати ISO, скопійований на носій. Завантажте
debian-installer за допомогою Розділ 4.4, «Підготовка файлів для завантаження з
жорсткого диска» та після сканування жорстких дисків на наявність ISO-образу
інсталятора оберіть пристрій USB і на ньому інсталяційний образ.

3.6.3. Системи з прошивкою UEFI

UEFI («Unified Extensible Firmware Interface») -- це новий вид системного
мікропрограмного забезпечення, яке використовується в багатьох сучасних
системах і, серед інших цілей, призначене для заміни класичного ПК BIOS.

Наразі більшість комп’ютерних систем, які використовують UEFI, також мають так
званий «Модуль підтримки сумісності» (CSM) у вбудованому програмному
забезпеченні, який забезпечує ті самі інтерфейси до операційної системи, що й
класичний ПК BIOS, тому програмне забезпечення, написане для класичного ПК BIOS
можна використовувати без змін. Тим не менш, UEFI має на меті одного дня
повністю замінити старий BIOS ПК без повної зворотної сумісності, і вже існує
багато систем з UEFI, але без CSM.

У системах з UEFI під час інсталяції операційної системи слід враховувати
кілька моментів. Те, як мікропрограмне забезпечення завантажує операційну
систему, принципово відрізняється між класичним BIOS (або UEFI у режимі CSM) і
рідним UEFI. Однією з основних відмінностей є спосіб запису розділів жорсткого
диска на жорсткий диск. У той час як класичний BIOS і UEFI у режимі CSM
використовують таблицю розділів DOS, рідний UEFI використовує іншу схему
розділення під назвою «Таблиця розділів GUID» (GPT). На одному диску для всіх
практичних цілей може використовуватися лише один із двох, і у випадку
встановлення кількох завантажень із різними операційними системами на одному
диску всі вони повинні використовувати однаковий тип таблиці розділів.
Завантаження з диска з GPT можливе лише у рідному режимі UEFI, але використання
GPT стає все більш поширеним у міру зростання розмірів жорстких дисків,
оскільки класична таблиця розділів DOS не може адресувати диски розміром більше
ніж приблизно 2 терабайти, тоді як GPT дозволяє працювати з набагато більшими
дисками. Інша основна відмінність між BIOS (або UEFI в режимі CSM) і рідним
UEFI полягає в тому, де зберігається завантажувальний код і в якому форматі він
має бути. Це означає, що для кожної системи потрібні різні завантажувачі.

Останнє стає важливим під час завантаження debian-installer у системі UEFI з
CSM, оскільки debian-installer перевіряє, чи було запущено в системі BIOS або у
власній системі UEFI, і встановлює відповідний завантажувач. Зазвичай це просто
працює, але може виникнути проблема в середовищах із кількома завантаженнями. У
деяких системах UEFI з CSM режим завантаження за замовчуванням для знімних
пристроїв може відрізнятися від того, який фактично використовується під час
завантаження з жорсткого диска, тому під час завантаження програми встановлення
з USB-накопичувача в режимі, відмінному від того, який використовується під час
завантаження іншої вже встановленої операційної системи систему з жорсткого
диска, можливо, встановлено неправильний завантажувач, і система може не
завантажуватися після завершення встановлення. Під час вибору завантажувального
пристрою з меню завантаження мікропрограми деякі системи пропонують два окремі
варіанти для кожного пристрою, щоб користувач міг вибрати, у якому завантаженні
виконуватиметься: у режимі CSM чи у рідному режимі UEFI.

3.6.4. Безпечне завантаження

Іншою темою, пов’язаною з UEFI, є так званий механізм «безпечного завантаження»
. Безпечне завантаження означає функцію реалізацій UEFI, яка дозволяє
мікропрограмі завантажувати та виконувати лише код, який криптографічно
підписаний певними ключами, і таким чином блокує будь-який (потенційно
шкідливий) код завантаження, який не підписаний або підписаний невідомими
ключами. На практиці єдиним ключем, прийнятим за замовчуванням у більшості
систем UEFI із безпечним завантаженням, є ключ від Microsoft, який
використовується для підпису завантажувача Windows. Debian містить завантажувач
«shim», підписаний Microsoft, тому має працювати належним чином у системах із
увімкненим безпечним завантаженням.

3.6.5. Вимкнення функції «швидкого завантаження»/«швидкого запуску» Windows

Windows пропонує функцію (так звана «швидке завантаження» у Windows 8, «швидкий
запуск» у Windows 10), щоб скоротити час запуску системи. Технічно, коли цю
функцію ввімкнено, Windows не виконує справжнє завершення роботи та справжнє
холодне завантаження після отримання наказу завершити роботу, а натомість
робить щось схоже на часткове призупинення диска, щоб зменшити час «
завантаження». Поки Windows є єдиною операційною системою на машині, це не
викликає проблем, але це може призвести до проблем і втрати даних, якщо у вас є
налаштування подвійного завантаження, коли інша операційна система отримує
доступ до тих самих файлових систем, що й Windows. У цьому випадку реальний
стан файлової системи може відрізнятися від того, яким Windows вважає його
після «завантаження», і це може спричинити пошкодження файлової системи під час
подальшого доступу до файлової системи для запису. Тому в налаштуваннях
подвійного завантаження, щоб уникнути пошкодження файлової системи, функцію «
швидкого завантаження»/«швидкого запуску» потрібно вимкнути в Windows.

Крім того, відомо, що механізм Windows Update (іноді) автоматично повторно
вмикає цю функцію після того, як її раніше вимкнув користувач. Рекомендується
періодично перевіряти це налаштування.

Також може знадобитися вимкнути «швидке завантаження», щоб навіть дозволити
доступ до налаштувань UEFI, щоб вибрати завантаження іншої операційної системи
або debian-installer. У деяких системах UEFI вбудоване програмне забезпечення
зменшить час «завантаження», не ініціалізуючи контролер клавіатури чи апаратне
забезпечення USB; у цих випадках необхідно завантажити Windows і вимкнути цю
функцію, щоб змінити порядок завантаження.

3.6.6. Проблеми з обладнанням, на які варто звернути увагу

Підтримка USB BIOS і клавіатури. Якщо у вас немає клавіатури у стилі PS/2, а
лише модель USB, на деяких дуже старих ПК вам може знадобитися ввімкнути
емуляцію застарілої клавіатури в налаштуваннях BIOS, щоб мати можливість
використовувати клавіатуру в меню завантажувача, але це не так. проблема для
сучасних систем. Якщо ваша клавіатура не працює в меню завантажувача,
зверніться до посібника з материнської плати та знайдіть у BIOS параметри «
емуляції старої клавіатури» або «підтримки клавіатури USB».


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[2] Інсталяційні образи, які підтримують графічну інсталяцію, вимагають більше
пам’яті за образи, які підтримують лише текстовий інсталятор, тому їх не слід
використовувати в системах із малим обсягом пам’яті, тобто менше за 780MB
пам'яті. Якщо є вибір між завантаженням текстового та графічного інсталятора, у
таких системах слід вибрати текстовий.

Розділ 4. Отримання інсталяційних даних

Зміст

4.1. Офіційні Debian GNU/Linux інсталяційні образи
4.2. Завантаження файлів з Debian Mirrors
    4.2.1. Де знайти інсталяційні файли
4.3. Підготовка файлів для завантаження з USB-диска
    4.3.1. Підготовка USB-диска з гібридним образом CD/DVD
4.4. Підготовка файлів для завантаження з жорсткого диска
    4.4.1. Інсталятор жорсткого диска завантажується з Linux за допомогою GRUB
4.5. Підготовка файлів для завантаження з TFTP
    4.5.1. Налаштування сервера DHCP
    4.5.2. Налаштування сервера BOOTP
    4.5.3. Увімкнення сервера TFTP
    4.5.4. Перемістіть образи TFTP на місце
4.6. Автоматичне встановлення
    4.6.1. Автоматичне встановлення з інсталятором Debian
4.7. Перевірка цілісності інсталяційних файлів

4.1. Офіційні Debian GNU/Linux інсталяційні образи

Найпростіший спосіб встановлення Debian GNU/Linux з набору офіційних Debian
монтажні зображення. Ви можете придбати набір CD/DVD або USB-накопичувач у
постачальника (перегляньте сторінку постачальників компакт-дисків). Ви також
можете завантажити інсталяційні образи з Debian дзеркало та створіть власний
набір, якщо у вас є швидке підключення до мережі та пристрій для запису CD/DVD.
Або сучасний спосіб: записати такий образ на USB-накопичувач (перегляньте
сторінку Debian CD/DVD і Поширені запитання щодо CD Debian для отримання
детальних інструкцій). Якщо у вас є такі інсталяційні носії, і вони є
завантажувальними на вашій машині, що стосується всіх сучасних ПК, ви можете
перейти прямо до Розділ 5, Завантаження системи встановлення. Було витрачено
багато зусиль, щоб гарантувати, що файли, які найчастіше використовуються,
знаходяться на першому образі DVD, щоб базову інсталяцію на робочому столі
можна було виконати лише з першим DVD.

Також пам'ятайте: якщо Ви використовуєте інсталяційні засоби, які не містять
необхідних пакетів, Ви завжди можете встановити ці пакети після запуску нової
системи Debian (по закінченню встановлення). Якщо Вам необхідно знати у якому
інсталяційному образі міститься певний пакет, відвідайте https://
cdimage-search.debian.org/.

Якщо Ваш комп'ютер не підтримує завантаження з оптичних носіїв (актуально лише
для дуже старих систем), але у Вас є набір DVD, Ви можете скористатися такими
варіантами як жорсткий диск, usb-диск, завантаження з мережі або ручне
завантаження ядра з диска для початкового завантаження інсталятора системи.
Файли, необхідні для завантаження в інший спосіб, також є на диску; мережевий
архів Debian та організація тек на диску ідентичні. Отже, коли нижче будуть
надані архівні файлові шляхи для окремих файлів, необхідних для завантаження,
пошукайте ці файли у тих самих каталогах та підкаталогах на інсталяційному
носії.

Після завантаження інсталятора він зможе отримати всі інші файли, які потрібно
з диска.

Якщо у вас немає набору засобів інсталяції, то вам потрібно буде завантажити
файли системи інсталятора і розмістити їх на жорсткий диск або флешка або 
підключений комп'ютер так що вони можуть бути використані для завантаження в
інсталятор.

4.2. Завантаження файлів з Debian Mirrors

Щоб знайти найближче дзеркало (і, мабуть, найшвидше), дивіться список Debian
дзеркала.

4.2.1. Де знайти інсталяційні файли

Різні файли інсталяції можна знайти на кожному Debian mirror в діректорії
debian/dists/trixie/main/installer-amd64/current/images/ -- MANIFEST
перераховує кожен образ і його призначення.

4.3. Підготовка файлів для завантаження з USB-диска

Для підготовки USB-диска, ми радимо використовувати систему, де вже працює GNU/
Linux та підтримується USB. У поточних системах GNU/Linux USB-диск повинен
автоматично розпізнаватися, коли Ви його під'єднуєте. Якщо це не так,
перевірте, чи завантажений модуль ядра для USB-дисків. Коли буде вставлений
USB-диск, він буде порівняний із пристроєм з назвою /dev/sdX, де «X» -- це
літера в діапазоні a-z. Ви зможете побачити, як був визначений USB-диск,
виконавши команду lsblk до та після під'єднання диска. (Результат команди dmesg
(від імені root) також є гарною можливістю для цього.) Також для того, щоб
писати на флешку, можливо, потрібно вимкнути перемикач захисту від запису.

Застереження

Процедури, описані в цьому розділі, знищать все, що вже є на пристрої!
Переконайтеся, що Ви використовуєте правильну назву пристрою для свого
USB-диска. Якщо Ви використовуєте неправильний пристрій, результатом може бути
втрата всієї інформації, наприклад, на жорсткому диску.

4.3.1. Підготовка USB-диска з гібридним образом CD/DVD

Образи для встановлення Debian для цієї архітектури створені за допомогою
технології isohybrid;. Це означає, що їх можна записати безпосередньо на
USB-диск, що є дуже простим способом створення інсталяційного носія. Просто
оберіть образ (наприклад, netinst або DVD-1), який вміститься на Вашому
USB-диску. Для отримання інсталяційного образу перегляньте Розділ 4.1,
«Офіційні Debian GNU/Linux інсталяційні образи».

Обраний Вами інсталяційний образ потрібно записати безпосередньо на USB-диск,
перезаписавши його поточний вміст. Наприклад, якщо використовується система GNU
/Linux, файл образу можна записати на USB-диск таким чином, переконавшись, що
накопичувач відключений:

# cp debian.iso /dev/sdX
# sync

Простий запис інсталяційного образу на USB в такий спосіб має добре працювати
для більшості користувачів. Для особливих потреб є ще сторінка wiki.

Інформацію про те, як це зробити в інших операційних системах, можна знайти у
Debian CD FAQ.

Важливо

Образ має бути записаний на весь диск, а не на розділ, тобто /dev/sdb, не /dev/
sdb1. Не користуйтеся утилітами unetbootin та подібними, які старіше за образ.

4.4. Підготовка файлів для завантаження з жорсткого диска

Інсталятор може бути завантажений за допомогою файлів завантаження, розміщених
на наявному розділі жорсткого диска, або запущених з іншої операційної системи,
або шляхом виклику завантажувача безпосередньо з BIOS. У сучасних системах з
UEFI ядро можна завантажувати безпосередньо з розділу UEFI без окремого
завантажувача.

За допомогою цієї техніки можна досягти повної «чистої мережі». Це дозволяє
уникнути всіх проблем зі знімними носіями, включно з пошуком та записом образів
CD/DVD.

4.4.1. Інсталятор жорсткого диска завантажується з Linux за допомогою GRUB

У цьому розділі пояснюється, як додати або навіть замінити наявну інсталяцію
Linux за допомогою GRUB.

Під час завантаження GRUB підтримує завантаження у пам'ять не лише ядра, а й
образу диска. Цей RAM-диск може використовуватися ядром як коренева файлова
система.

Скопіюйте ці файли з архівів Debian у зручне місце на жорсткому диску,
наприклад у /boot/newinstall/.

  • vmlinuz (образ ядра)

  • initrd.gz (образ ramdisk)

Якщо Ви збираєтеся використовувати жорсткий диск лише для завантаження, а потім
все інше завантажувати через мережу, Вам потрібно звантажити файл netboot/
debian-installer/amd64/initrd.gz та відповідне йому ядро netboot/
debian-installer/amd64/linux. Це дозволить перерозподілити жорсткий диск, з
якого Ви завантажуєте інсталятор, хоча робіть це обережно.

Крім того, якщо Ви маєте намір під час встановлення залишити наявний розділ на
жорсткому диску незмінним, Ви можете звантажити файл hd-media/initrd.gz та його
ядро hd-media/vmlinuz, а також скопіювати інсталяційний образ на жорсткий диск
(переконайтеся, що ім'я файлу закінчується на .iso). Таким чином інсталятор
зможе завантажитися з жорсткого диска та почати установку з інсталяційного
образу без використання мережі.

Нарешті, для налаштування завантажувач, перейдіть до Розділ 5.1.3,
«Завантаження з Linux за допомогою GRUB».

4.5. Підготовка файлів для завантаження з TFTP

Якщо Ваш комп’ютер під'єднаний до локальної мережі, його можна завантажити
через мережу з іншого комп’ютера за допомогою TFTP. Якщо бажаєте завантажити
систему інсталяції з іншого комп’ютера, потрібно завантажувальні файли
розмістити на цьому комп’ютері в певних місцях, а комп’ютер налаштувати для
підтримки завантаження Вашого конкретного комп’ютера.

Вам потрібно налаштувати сервер TFTP, а для декількох комп'ютерів налаштувати
сервер DHCP, чи сервер BOOTP.

BOOTP -- протокол IP, який повідомляє комп'ютерам їх IP-адреси та інформацію
про розташування в мережі образів для завантаження. Протокол DHCP (протокол
динамічної конфігурації вузла) -- це більш гнучке, зворотно сумісне розширення
BOOTP. Деякі системи можуть бути налаштовані лише через DHCP.

Простий протокол обміну файлами (TFTP) використовується для передачі
завантажувального образу до клієнтів. Теоретично Ви можете використовувати
сервер на будь-якій платформі, яка його підтримує. Приклади у цьому розділі
стосуються операційних систем SunOS 4.x, SunOS 5.x (Solaris) та GNU/Linux.

Примітка

Якщо на сервері запущено Debian GNU/Linux, ми рекомендуємо використовувати
TFTP-сервер tftp-hpa того ж автора, що й завантажувач syslinux, оскільки між
ними гарна сумісність. Гарною альтернативою буде також atftpd.

4.5.1. Налаштування сервера DHCP

Одним з безплатних програмних серверів DHCP є ISC dhcpd. Для Debian GNU/Linux
рекомендується пакунок isc-dhcp-server. Нижче зразок файлу конфігурації (див. /
etc/dhcp/dhcpd.conf):

option domain-name "example.com";
option domain-name-servers ns1.example.com;
option subnet-mask 255.255.255.0;
default-lease-time 600;
max-lease-time 7200;
server-name "servername";

subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option routers 192.168.1.1;
}

host clientname {
  filename "/tftpboot.img";
  server-name "servername";
  next-server servername;
  hardware ethernet 01:23:45:67:89:AB;
  fixed-address 192.168.1.90;
}

У цьому прикладі є один сервер servername, який виконує всю роботу сервера
DHCP, сервера TFTP та мережевого шлюзу. Вам майже напевно доведеться змінити
параметри назви домену, а також назву сервера та апаратну адресу клієнта.
Параметр filename має бути назвою файлу, який буде отриманий через TFTP.

Після редагування файлу конфігурації перезапустіть dhcpd за допомогою команди/
etc/init.d/isc-dhcp-server restart.

4.5.1.1. Увімкнення у конфігурації DHCP завантаження PXE

Ось ще один приклад dhcp.conf з використанням методу PXE від TFTP.

option domain-name "example.com";

default-lease-time 600;
max-lease-time 7200;

allow booting;
allow bootp;

# Наступний абзац потрібно змінити відповідно до Вашого випадку
subnet 192.168.1.0 netmask 255.255.255.0 {
  range 192.168.1.200 192.168.1.253;
  option broadcast-address 192.168.1.255;
# адреса шлюзу може бути іншою
# (наприклад, доступ до Інтернету)
  option routers 192.168.1.1;
# вкажіть DNS, який Ви хочете використовувати
  option domain-name-servers 192.168.1.3;
}

group {
  next-server 192.168.1.3;
  host tftpclient {
# фізична адреса клієнта tftp
  hardware ethernet  00:10:DC:27:6C:15;
  filename "pxelinux.0";
 }
}

Зверніть увагу, що у завантаженні PXE ім’я файлу клієнта pxelinux.0 є
завантажувачем, а не образом ядра (див. Розділ 4.5.4, «Перемістіть образи TFTP
на місце» нижче).

Якщо Ваш комп'ютер використовує для завантаження UEFI, Вам доведеться,
наприклад, вказати завантажувач, сумісний з UEFI

group {
  next-server 192.168.1.3;
  host tftpclient {
# фізична адреса клієнта tftp
  hardware ethernet  00:10:DC:27:6C:15;
  filename "debian-installer/amd64/bootnetx64.efi";
 }
}

4.5.2. Налаштування сервера BOOTP

Для GNU/Linux є два сервери BOOTP. Перший -- CMU bootpd. Інший фактично є
сервером DHCP: ISC dhcpd. У Debian GNU/Linux вони містяться в пакетах bootp та
isc-dhcp-server відповідно.

Для використання CMU bootpd, Вам потрібно спочатку розкоментувати (або додати)
відповідні рядку у /etc/inetd.conf. У Debian GNU/Linux, це можна зробити так:
виконати update-inetd --enable bootps, потім /etc/init.d/inetd reload. Якщо Ваш
сервер BOOTP працює не на Debian, рядок у запиті може виглядати приблизно так:

bootps  dgram  udp  wait  root  /usr/sbin/bootpd  bootpd -i -t 120

Тепер потрібно створити файл /etc/bootptab. У нього такий самий формат, як у
файлів у старому доброму BSD printcap, termcap та disktab. Для докладної
інформації подивіться сторінку з настановами щодо bootptab. Для CMU bootpd Вам
потрібно знати фізичну адресу (MAC) клієнта. Тут є приклад /etc/bootptab:

client:\
  hd=/tftpboot:\
  bf=tftpboot.img:\
  ip=192.168.1.90:\
  sm=255.255.255.0:\
  sa=192.168.1.1:\
  ha=0123456789AB:

Вам потрібно змінити хоча би параметр «ha», який містить фізичну адресу.
Параметр «bf» містить назву файлу, який повинен передаватися клієнту через
TFTP; більше інформації у Розділ 4.5.4, «Перемістіть образи TFTP на місце».

На відміну від попереднього налаштування BOOTP за допомогою ISC dhcpd дуже
просте, оскільки dhcpd розглядає клієнтів BOOTP як окремі випадки клієнтів
DHCP. Але деякі архітектури вимагають складного налаштування для завантаження
клієнтів через BOOTP. Якщо це Ваш випадок, прочитайте Розділ 4.5.1,
«Налаштування сервера DHCP». В іншому випадку достатньо додати директиву allow
bootp у файлі конфігурації /etc/dhcp/dhcpd.conf у блок підмережі, в якій
знаходиться клієнт. Потім перезапустіть сервер dhcpd командою /etc/init.d/
isc-dhcp-server restart.

4.5.3. Увімкнення сервера TFTP

Для підготовки до роботи сервера TFTP, переконайтеся спочатку, що tftpd
активований.

У випадку tftpd-hpa існує два способи запуску служби. Можна запустити як
окремий демон inetd під час запуску системи, або як незалежний демон. Який
метод Вам потрібен можна обрати під час встановлення пакунка або можете змінити
налаштування в будь-який час пізніше.

Примітка

Історично сервери TFTP використовували каталог /tftpboot для використання
образів з них. Однак пакунки Debian GNU/Linux можуть використовувати інші
каталоги відповідно до стандарту ієрархії файлової системи. Наприклад,
tftpd-hpa стандартно використовує /srv/tftp. Можливо, Вам доведеться
налаштувати приклади конфігурації в цьому розділі під свої потреби.

Усі альтернативи in.tftpd, доступні в Debian повинні типово реєструвати запити
TFTP у системних журналах. Деякі з них підтримують аргумент -v для збільшення
інформативності. У разі проблем із завантаженням рекомендується перевіряти ці
повідомлення журналу, оскільки вони є гарною відправною точкою для діагностики
помилок та пошуку причин.

4.5.4. Перемістіть образи TFTP на місце

Далі розмістіть потрібний завантажувальний образ TFTP, як описано у
Розділ 4.2.1, «Де знайти інсталяційні файли», до каталогу з образами tftpd.
Можливо, буде потрібно створити посилання з цього файлу на файл, який tftpd
використовуватиме для завантаження певного клієнта. На жаль, імена файлу
визначається клієнтом TFTP і тут немає жорстких стандартів.

Для завантаження PXE все необхідне є в архіві netboot/netboot.tar.gz. Просто
розпакуйте цей архів у каталог для образів tftpd. Переконайтеся, що Ваш
dhcp-сервер налаштований передавати файл pxelinux.0 до tftpd. Для машин UEFI
буде потрібно передати відповідну назву завантажувального образу EFI
(наприклад, /debian-installer/amd64/bootnetx64.efi).

4.6. Автоматичне встановлення

Для установки на декількох комп'ютерах можна зробити автоматичне встановлення.
Пакети Debian, призначені для цього містять fai-quickstart, який можна
використовувати як інсталяційний сервер (більш докладно див. Домашню сторінку
FAI) та як сам інсталятор Debian.

Проект FAI також забезпечує Веб-сервіс для створення індивідуальних безладних
зображень ISO лише за кілька кліків. Ви можете вибрати настільне середовище,
мову, випуск, встановити пароль і додати свій власний список додаткових
пакетів. Через кілька хвилин ваш може завантажувати та завантажувати
зображення, це буде робити повністю автоматичну установку без необхідної
взаємодії. Деякі додаткові налаштування доступні для експертів Linux.

4.6.1. Автоматичне встановлення з інсталятором Debian

Інсталятор Debian підтримує автоматичне встановлення за допомогою файлів
попередньої конфігурації, які можна завантажити з мережі або зі знімного носія
та використовувати потім для заповнення відповідей на запитання під час процесу
встановлення.

Повну документацію про попереднє використання, разом з робочим прикладом, який
можна редагувати, можна знайти у Додаток B, Автоматичне встановлення з готовими
відповідями.

4.7. Перевірка цілісності інсталяційних файлів

Цілісність завантажених файлів Ви можете перевірити за контрольними сумами з
файлів SHA256SUMS або SHA512SUMS, з дзеркал Debian. Їх можна знайти поруч з
інсталяційними образами. Відвідайте ці місця:

  • файли з контрольними сумами образів CD,

  • файли з контрольними сумами DVD,

  • файли з контрольними сумами BD,

  • файли з контрольними сумами інших інсталяційних файлів.

Для обчислення контрольних сум отриманих інсталяційних файлів, скористайтеся

sha256sum filename.iso

відповідно

sha512sum filename.iso

та порівняйте обчислені суми з відповідними у файлах SHA256SUMS та SHA512SUMS.

Посилання Debian CD FAQ містить додаткову корисну інформацію з цього питання
(таку як скрипт check_debian_iso, для напівавтоматичної описаної вище
процедури), а також настанови про те як перевірити цілісність самих файлів з
контрольними сумами.

Розділ 5. Завантаження системи встановлення

Зміст

5.1. Завантаження встановлювача на 64-bit PC
    5.1.1. Завантаження з USB-накопичувача
    5.1.2. Завантаження з оптичного диска (CD/DVD)
    5.1.3. Завантаження з Linux за допомогою GRUB
    5.1.4. Завантаження разом з TFTP
    5.1.5. Екран завантаження
    5.1.6. Графічний інсталятор
5.2. Доступність
    5.2.1. Front-end інсталятора
    5.2.2. USB-дисплеї зі шрифтом Брайля
    5.2.3. Серійні дисплеї Брайля
    5.2.4. Програмний синтез мовлення
    5.2.5. Апаратний мовний синтез
    5.2.6. Платові пристрої
    5.2.7. Тема з високим контрастом
    5.2.8. Збільшення
    5.2.9. Експертне встановлення, аварійний режим, автоматичне встановлення
    5.2.10. Доступність встановленої системи
5.3. Параметри завантаження
    5.3.1. Послідовна консоль завантаження
    5.3.2. Debian Параметри встановлення
    5.3.3. Використання параметрів завантаження для відповідей на запитання
    5.3.4. Передача параметрів модулям ядра
    5.3.5. Чорний список модулів ядра
5.4. Усунення несправностей у процесі встановлення
    5.4.1. Надійність оптичних носіїв
    5.4.2. Налаштування завантаження
    5.4.3. Програмний синтез мовлення
    5.4.4. Загальний 64-bit PC Проблеми встановлення
    5.4.5. Інтерпретація повідомлень запуску ядра
    5.4.6. Повідомлення про проблеми з установкою
    5.4.7. Надсилання звітів про встановлення

5.1. Завантаження встановлювача на 64-bit PC

Застереження

Якщо у Вас на комп’ютері є інші операційні системи, які Ви хочете зберегти (у
меню завантаження), Вам слід переконатися, що вони належним чином вимкнені 
перед запуском інсталятора. Встановлення операційної системи під час сплячого
режиму (гібернації) іншої операційної системи (з записом сеансу на диск) може
призвести до втрати або пошкодження стану сплячої операційної системи та може
спричинити проблеми під час її перезапуску.

Примітка

Щодо інформації як завантажити графічний інсталятор, див. Розділ 5.1.6,
«Графічний інсталятор».

5.1.1. Завантаження з USB-накопичувача

Якщо ваш комп'ютер завантажується з USB, це, ймовірно, найпростіший спосіб
встановлення. Якщо ви підготували все, починаючи з Розділ 3.6.2, «Вибір
завантажувального пристрою» і Розділ 4.3, «Підготовка файлів для завантаження з
USB-диска», просто підключіть флешку до будь-якого вільного USB-роз'єму і
перезавантажте комп'ютер. Система повинна завантажитися, і якщо ви не
використовували гнучкий спосіб збирання флешки і не ввімкнули його, у вас має
з'явитися графічне меню завантаження (на апаратному забезпеченні, яке його
підтримує). Тут ви можете вибрати різні параметри інсталятора або просто
натиснути Enter.

5.1.2. Завантаження з оптичного диска (CD/DVD)

Якщо у вас є набір оптичних дисків, і ваш комп'ютер підтримує завантаження
безпосередньо з них, чудово! Просто налаштуйте систему для завантаження з
оптичного диска, як описано у Розділ 3.6.2, «Вибір завантажувального пристрою»,
вставте диск, перезавантажтеся і перейдіть до наступного розділу.

Зверніть увагу, що для деяких оптичних приводів можуть знадобитися спеціальні
драйвери, які можуть бути недоступні на ранніх стадіях інсталяції. Якщо
виявиться, що стандартний спосіб завантаження з оптичного диска не працює на
вашому обладнанні, поверніться до цього розділу і прочитайте про альтернативні
ядра і методи встановлення, які можуть вам підійти.

Навіть якщо ви не можете завантажитися з оптичного диска, ви можете встановити
з нього системні компоненти та будь-які пакунки, які вам потрібні. Просто
завантажтеся з іншого носія, а коли настане час інсталювати операційну систему,
базову систему та будь-які додаткові пакунки, наведіть інсталяційну систему на
оптичний привід.

Якщо у вас виникли проблеми із завантаженням, див. Розділ 5.4, «Усунення
несправностей у процесі встановлення».

5.1.3. Завантаження з Linux за допомогою GRUB

Щоб завантажити програму встановлення з жорсткого диска, ви повинні спочатку
завантажити і розмістити необхідні файли, як описано у Розділ 4.4, «Підготовка
файлів для завантаження з жорсткого диска».

Для GRUB2 вам потрібно налаштувати дві важливі речі у /boot/grub/grub.cfg:

  • завантажити програму встановлення initrd.gz під час завантаження;

  • щоб ядро vmlinuz використовувало диск оперативної пам'яті як кореневий
    розділ.

Наприклад, запис для інсталятора може бути таким:

menuentry 'Нове встановлення' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}

5.1.4. Завантаження разом з TFTP

Завантаження з мережі вимагає підключення до мережі та сервера TFTP network
boot (і, ймовірно, також DHCP, RARP або BOOTP для автоматичного налаштування
мережі).

Налаштування на стороні сервера для підтримки завантаження з мережі описано в
Розділ 4.5, «Підготовка файлів для завантаження з TFTP».

Існує декілька способів завантаження з TFTP на i386.

5.1.4.1. Мережева карта або материнська плата з підтримкою PXE

Можливо, ваша мережева інтерфейсна карта або материнська плата підтримує
функцію завантаження PXE. Це Intel (tm) повторна реалізація завантаження через
TFTP. Якщо так, ви можете налаштувати BIOS/UEFI на завантаження з мережі.

5.1.4.2. Мережева карта з мережевим завантажувачем

Можливо, ваша мережева карта підтримує функцію завантаження з TFTP.

5.1.4.3. Etherboot

Проєкт etherboot надає завантажувальні дискети і навіть бутроми, які виконують
TFTP-завантаження.

5.1.5. Екран завантаження

Після завантаження програми встановлення у вас має з'явитися дружній графічний
екран з логотипом Debian і меню:

Debian GNU/Linux installer boot menu

Graphical install
Install
Advanced options                            >
Accessible dark contrast installer menu     >
Help
Install with speech synthesis

Примітка

Цей графічний екран буде виглядати дещо інакше залежно від того, як
завантажився ваш комп'ютер (BIOS або UEFI), але на ньому будуть показані ті
самі опції.

Залежно від способу встановлення, який ви використовуєте, параметр «Графічне
встановлення» може бути недоступним. Бі-аркові образи додатково містять
64-розрядний варіант для кожного варіанту встановлення безпосередньо під ним,
таким чином, кількість варіантів збільшується майже вдвічі.

Для звичайного встановлення виберіть пункт «Графічне встановлення» або «
Встановити» за допомогою клавіш зі стрілками на клавіатурі або набравши першу
(виділену) літеру -- і натисніть клавішу Enter для завантаження інсталятора.
Пункт «Графічне встановлення» вже вибрано за замовчуванням.

Пункт «Додаткові параметри» надає доступ до другого меню, за допомогою якого
можна завантажити програму встановлення у експертному режимі, у режимі
відновлення та для автоматизованого встановлення.

Якщо Ви бажаєте або Вам потрібно додати будь-які параметри завантаження для
програми встановлення або ядра, натисніть Tab (завантаження BIOS), або e, потім
down arrow тричі, потім end, для зміни рядка «linux» у записі завантажувача
(завантаження з UEFI). Це додасть команду завантаження для вибраного пункту
меню та дозволить Вам змінити її під власні потреби. Зверніть увагу, що
розкладка клавіатури в цей момент все ще залишається QWERTY. На екранах довідки
(див. нижче) перераховані деякі загальні можливості. Натисніть Enter
(завантаження BIOS) або F10 (завантаження UEFI) для завантаження програми
встановлення з Вашими параметрами; натискання Esc поверне Вас до меню
завантаження та скасує усі внесені Вами зміни.

Вибір пункту «Довідка» призведе до появи першого екрана довідки, на якому буде
показано огляд усіх доступних екранів довідки. Щоб повернутися до меню
завантаження після відображення екранів довідки, введіть «menu» у запрошенні до
завантаження і натисніть Enter. Усі екрани довідки мають запрошення до
завантаження, за допомогою якого можна ввести команду завантаження:

.
Натисніть F1, щоб отримати індекс довідки, або клавішу ENTER, щоб завантажитися:

У цьому вікні ви можете просто натиснути клавішу Enter, щоб завантажити
програму встановлення з параметрами за замовчуванням, або ввести певну команду
завантаження і, за бажанням, параметри завантаження. Ряд параметрів
завантаження, які можуть бути корисними, можна знайти на різних екранах
довідки. Якщо ви додаєте будь-які параметри до командного рядка завантаження,
обов'язково спочатку введіть метод завантаження (за замовчуванням install) і
пробіл перед першим параметром (наприклад, install nomodeset).

Примітка

Наразі передбачається, що клавіатура за замовчуванням має американську
англійську розкладку. Це означає, що якщо ваша клавіатура має іншу (специфічну
для мови) розкладку, символи, які з'являються на екрані, можуть відрізнятися
від тих, що ви очікуєте при введенні параметрів. У Вікіпедії є схема розкладки
клавіатури США, яку можна використовувати як довідник, щоб знайти правильні
клавіші для використання.

Примітка

Якщо ви використовуєте систему, у якій BIOS налаштовано на використання
послідовної консолі, ви можете не побачити початкову графічну заставку під час
завантаження програми встановлення; ви можете навіть не побачити меню
завантаження. Те ж саме може статися, якщо ви встановлюєте систему за допомогою
пристрою дистанційного керування, який надає текстовий інтерфейс до
VGA-консолі. Прикладами таких пристроїв є текстова консоль «інтегрованого
вимкнення світла» (iLO) від Compaq та «інтегрованого віддаленого помічника»
(IRA) від HP.

Щоб обійти графічний екран завантаження, ви можете або наосліп натиснути Esc
для отримання текстового запрошення до завантаження, або (так само наосліп)
натиснути «H», а потім Enter для вибору опції «Help», описаної вище. Після
цього ваші натискання клавіш повинні відлунюватися у підказці. Щоб програма
встановлення не використовувала фреймбуфер під час подальшого встановлення, вам
також слід додати vga=normal nomodeset до запрошення до завантаження, як
описано у тексті довідки.

5.1.6. Графічний інсталятор

Графічна версія інсталятора доступна лише для обмеженої кількості архітектур,
зокрема 64-bit PC. Функціональність графічного інсталятора по суті така ж, як і
текстового, оскільки він використовує ті ж самі програми, але з іншим
інтерфейсом.

Хоча функціональність ідентична, графічний інсталятор все ж має кілька суттєвих
переваг. Основною перевагою є підтримка більшої кількості мов, а саме тих, що
використовують набір символів, які не можуть бути відображені у текстовому
інтерфейсі «newt». Він також має кілька переваг у користуванні, наприклад,
можливість використовувати мишу, а в деяких випадках кілька запитань можуть
відображатися на одному екрані.

Графічний інсталятор доступний для всіх образів CD/DVD і для способу
встановлення з hd-носія. Щоб завантажити графічний інсталятор, просто виберіть
відповідний пункт у меню завантаження. Експертний режим і режим порятунку для
графічної програми встановлення можна вибрати у меню «Додаткові параметри».
Раніше використовувані методи завантаження installgui, expertgui і rescuegui
все ще можна використовувати із запрошення до завантаження, яке з'являється
після вибору пункту «Help» у меню завантаження.

Так само, як і у випадку з текстовою програмою встановлення, під час запуску
графічної програми можна додати параметри завантаження.

Примітка

Графічний інсталятор вимагає значно більше пам'яті для запуску, ніж текстовий:
810MB. Якщо пам'яті не вистачає, програма автоматично повернеться до текстового
інтерфейсу «newt».

Якщо обсяг пам'яті у вашій системі менший за 780MB, графічна програма
встановлення може взагалі не завантажитися, тоді як текстова програма
встановлення працюватиме. Використання текстового інсталятора рекомендується
для систем з невеликою кількістю доступної пам'яті.

5.2. Доступність

Деякі користувачі можуть потребувати спеціальної підтримки, наприклад, через
певні порушення зору. USB-дисплеї Брайля визначаються автоматично (не
послідовні дисплеї, підключені через перетворювач послідовний-USB), але
більшість інших функцій доступності мають бути ввімкнені вручну. На
комп'ютерах, які підтримують цю функцію, меню завантаження видає звукові
сигнали, коли воно готове прийняти натискання клавіш. Він подає один звуковий
сигнал на системах з BIOS і двічі на системах з UEFI. До деяких параметрів
завантаження можна додати, щоб увімкнути функції доступності (див. також
Розділ 5.1.5, «Екран завантаження»). Зауважте, що на більшості архітектур
завантажувач інтерпретує вашу клавіатуру як QWERTY-клавіатуру.

5.2.1. Front-end інсталятора

Програма встановлення Debian підтримує декілька інтерфейсів для постановки
запитань з різною зручністю доступу до них: зокрема, text використовує
звичайний текст, тоді як newt використовує текстові діалогові вікна. Вибір
можна зробити під час завантаження, див. документацію до DEBIAN_FRONTEND у
Розділ 5.3.2, «Debian Параметри встановлення».

За допомогою інтерфейсу newt (використовується переважно з шрифтом Брайля)
користувач здебільшого просто вибирає відповіді за допомогою клавіш зі
стрілками і натискає Enter, щоб підтвердити вибір. Натискання Tab або Shift - 
Tab дозволяє перемикатися між елементами діалогу, зокрема, отримати доступ до
кнопки Go Back, яка повертає до попередніх запитань. Деякі діалогові вікна
містять прапорці, які можна вмикати та вимикати, натискаючи клавішу Space.

За допомогою інтерфейсу text (який використовується здебільшого з мовленням),
користувач здебільшого вибирає відповіді, або вводячи їх номер і натискаючи 
Enter, або вибираючи відповідь за допомогою клавіш зі стрілками і натискаючи 
Enter, щоб підтвердити свій вибір. Ви також можете нічого не вводити і просто
натиснути клавішу Enter, щоб прийняти значення за замовчуванням. Введення < і
натискання Enter повертає до попередніх запитань. Якщо потрібно зробити вибір з
кількох варіантів (наприклад, під час вибору завдання), можна ввести !, щоб
виразити порожній вибір.

5.2.2. USB-дисплеї зі шрифтом Брайля

USB-дисплеї Брайля повинні автоматично визначатися. Після цього буде
автоматично обрано текстову версію інсталятора, а на цільовій системі буде
автоматично встановлено підтримку дисплея Брайля. Таким чином, ви можете просто
натиснути Enter у меню завантаження. Після запуску brltty ви можете вибрати
таблицю Брайля, увійшовши до меню параметрів. Документація щодо прив'язки
клавіш для пристроїв Брайля доступна на вебсайті brltty.

5.2.3. Серійні дисплеї Брайля

Послідовні дисплеї Брайля не можна безпечно автоматично розпізнавати (оскільки
це може пошкодити деякі з них). Таким чином, вам потрібно додати параметр
завантаження brltty=driver,port, щоб вказати brltty, який драйвер і порт йому
слід використовувати. driver слід замінити дволітерним кодом драйвера для
вашого терміналу (див. BRLTTY manual). port слід замінити назвою послідовного
порту, до якого під'єднано дисплей, ttyS0 - за замовчуванням, ttyUSB0 зазвичай
використовується при використанні перетворювача послідовний USB. Можна надати
третій параметр, щоб вибрати назву таблиці Брайля для використання (див. BRLTTY
manual); за замовчуванням використовується англійська таблиця. Зверніть увагу,
що таблицю можна змінити пізніше, увійшовши в меню налаштувань. Четвертий
параметр можна надати для передачі параметрів драйверу Брайля, наприклад,
protocol=foo, який потрібен для деяких рідкісних моделей. Документація щодо
прив'язки клавіш для пристроїв Брайля доступна на вебсайті brltty.

5.2.4. Програмний синтез мовлення

Підтримку програмного синтезу мовлення надають усі образи інсталяторів з
графічним інтерфейсом, тобто всі образи netinst і DVD, а також варіант gtk для
netboot. Його можна активувати, вибравши його у меню завантаження, набравши s 
Enter. Після цього буде автоматично обрано текстову версію інсталятора, а на
цільовій системі буде автоматично встановлено підтримку програмного синтезу
мовлення.

Якщо буде виявлено декілька звукових карт, вам буде запропоновано натиснути 
Enter коли почуєте мову з потрібної звукової карти.

Перше питання (мова) вимовляється англійською, а решта інсталяції - вибраною
мовою (якщо вона доступна у espeak).

Швидкість мовлення за замовчуванням досить повільна. Щоб пришвидшити процес,
натисніть CapsLock+6. Щоб зробити його повільнішим, натисніть CapsLock+5. За
замовчуванням гучність має бути середньою. Щоб зробити його голоснішим,
натисніть CapsLock+2. Щоб зробити його тихішим, натисніть CapsLock+1. Щоб
дізнатись більше про комбінації клавіш, дивіться Speakup guide. Щоб прийняти
відповідь за замовчуванням, просто натисніть Enter у відповідному запиті. Щоб
надати порожню відповідь на питання, введіть ! у вікні запиту. Щоб повернутися
до попереднього питання, введіть < у відповідь на запит.

5.2.5. Апаратний мовний синтез

Підтримка апаратних пристроїв синтезу мовлення доступна у всіх образах
інсталятора з графічним інтерфейсом, тобто у всіх образах netinst і DVD, а
також у варіанті netboot gtk. Отже, вам потрібно вибрати пункт «Графічне
встановлення» у меню завантаження.

Апаратні пристрої синтезу мовлення не можуть бути визначені автоматично. Таким
чином, вам потрібно додати параметр завантаження speakup.synth=driver, щоб
вказати speakup, який драйвер йому слід використовувати. driver слід замінити
кодом драйвера для вашого пристрою (див. список кодів драйверів). Після цього
буде автоматично обрано текстову версію інсталятора, а на цільовій системі буде
автоматично встановлено підтримку пристрою синтезу мовлення.

5.2.6. Платові пристрої

Деякі пристрої для забезпечення доступності - це справжні плати, які
вставляються всередину машини і зчитують текст безпосередньо з відеопам'яті.
Для того, щоб вони працювали, необхідно вимкнути підтримку фреймбуфера за
допомогою параметра завантаження vga=normal nomodeset. Однак це зменшить
кількість доступних мов.

За бажанням, текстову версію завантажувача можна активувати перед додаванням
параметра завантаження, ввівши h Enter.

5.2.7. Тема з високим контрастом

Для користувачів зі слабким зором інсталятор може використовувати
висококонтрастну кольорову тему, яка робить його більш читабельним. Щоб
увімкнути його, ви можете скористатися пунктом «Доступний високий контраст» на
екрані завантаження за допомогою комбінації клавіш d або додати параметр
завантаження theme=dark.

5.2.8. Збільшення

Для користувачів зі слабким зором, графічний інсталятор має базову підтримку
масштабування: комбінації клавіш Control++ та Control+- збільшують і зменшують
розмір шрифту.

5.2.9. Експертне встановлення, аварійний режим, автоматичне встановлення

Також доступні варіанти експертного, рятувального та автоматизованого
встановлення з підтримкою доступності. Щоб отримати до них доступ, потрібно
спочатку увійти до підменю «Додаткові опції» з меню завантаження, набравши a.
Якщо ви використовуєте систему BIOS (завантажувальне меню пролунає лише один
раз), після цього слід натиснути Enter ; для систем UEFI (завантажувальне меню
пролунає двічі) цього робити не слід. Потім, щоб увімкнути синтез мови, можна
додатково натиснути s (після чого знову натиснути Enter у системах з BIOS, але
не у системах з UEFI). Звідти можна використовувати різні ярлики: x для
експертного встановлення, r для режиму відновлення або a для автоматичного
встановлення. Знову ж таки, якщо ви використовуєте систему BIOS, після них
потрібно поставити Enter.

Автоматичний вибір встановлення дозволяє встановити Debian повністю автоматично
за допомогою попереднього встановлення, джерело якого можна вказати після
запуску функцій доступності. Сам процес попереднього підготовлення
задокументовано в Додаток B, Автоматичне встановлення з готовими відповідями.

5.2.10. Доступність встановленої системи

Документація про доступність встановленої системи доступна на Вікі-сторінці
доступності Debian.

5.3. Параметри завантаження

Параметри завантаження - це параметри ядра Linux, які зазвичай використовуються
для забезпечення належної роботи з периферійними пристроями. Здебільшого ядро
може автоматично визначати інформацію про ваші периферійні пристрої. Втім, у
деяких випадках вам доведеться трохи допомогти ядру.

Якщо ви завантажуєте систему вперше, спробуйте параметри завантаження за
замовчуванням (тобто не намагайтеся встановлювати параметри) і перевірте, чи
все працює коректно. Мабуть, так і буде. Якщо ні, ви можете перезавантажитися
пізніше і пошукати будь-які спеціальні параметри, які інформують систему про
ваше обладнання.

Інформацію про багато параметрів завантаження можна знайти у Linux BootPrompt
HOWTO, включно з порадами для незрозумілого обладнання. Цей розділ містить лише
ескіз найбільш важливих параметрів. Деякі поширені помилки наведено нижче у
розділі Розділ 5.4, «Усунення несправностей у процесі встановлення».

5.3.1. Послідовна консоль завантаження

Якщо ви завантажуєтеся за допомогою послідовної консолі, зазвичай ядро
визначить це автоматично. Якщо до комп'ютера під'єднано відеокарту (фреймбуфер)
і клавіатуру, які ви хочете завантажити через послідовну консоль, можливо, вам
доведеться передати ядру аргумент console=device, де device - це послідовний
пристрій цілі, який зазвичай є чимось на кшталт ttyS0.

Вам може знадобитися вказати параметри послідовного порту, такі як швидкість і
парність, наприклад, console=ttyS0,9600n8; інші типові швидкості можуть бути
57600 або 115200. Обов'язково вкажіть цей параметр після «---», щоб його було
скопійовано до конфігурації завантажувача встановлюваної системи (якщо це
підтримується програмою встановлення завантажувача).

Щоб переконатися, що тип терміналу, який використовується програмою
встановлення, відповідає вашому емулятору терміналу, можна додати параметр TERM
=type. Зауважте, що програма встановлення підтримує лише такі типи терміналів:
linux, bterm, ansi, vt102 і dumb. За замовчуванням для послідовної консолі у
debian-installer є vt102. Якщо ви використовуєте консоль IPMI або інструмент
віртуалізації, який сам не забезпечує перетворення у такі типи терміналів,
наприклад, QEMU/KVM, ви можете запустити його у сеансі screen. Це справді
виконає переклад до типу терміналу screen, який є дуже близьким до vt102.

5.3.2. Debian Параметри встановлення

Система встановлення розпізнає декілька додаткових параметрів завантаження^[3]
що може бути корисним.

Деякі параметри мають «коротку форму», що допомагає уникнути обмеження
параметрів командного рядка ядра і спрощує введення параметрів. Якщо параметр
має коротку форму, він буде вказаний у дужках за (звичайною) довгою формою. У
прикладах у цьому посібнику зазвичай також використовується коротка форма.

debconf/priority (пріоритет)

    Цей параметр встановлює найнижчий пріоритет повідомлень для відображення.

    За замовчуванням використовується priority=high. Це означає, що
    повідомлення з високим і критичним пріоритетом відображаються, а
    повідомлення з середнім і низьким пріоритетом пропускаються. Якщо виникають
    проблеми, програма встановлення змінює пріоритет за потреби.

    Якщо ви додасте priority=medium як параметр завантаження, вам буде показано
    меню встановлення і ви отримаєте більше контролю над процесом встановлення.
    Якщо використовується priority=low, буде показано усі повідомлення (це
    еквівалентно методу завантаження expert). За допомогою priority=critical
    система встановлення показуватиме лише критичні повідомлення і
    намагатиметься зробити все правильно і без зайвої метушні.

DEBIAN_FRONTEND

    Цей параметр завантаження керує типом інтерфейсу користувача, який
    використовується для програми встановлення. Наразі можливі наступні
    налаштування параметрів:

      ☆ DEBIAN_FRONTEND=noninteractive

      ☆ DEBIAN_FRONTEND=text

      ☆ DEBIAN_FRONTEND=newt

      ☆ DEBIAN_FRONTEND=gtk

    Frontend за замовчуванням це DEBIAN_FRONTEND=newt. DEBIAN_FRONTEND=text
    може бути кращим для послідовного встановлення на консолі. Деякі
    спеціалізовані типи носіїв можуть пропонувати лише обмежений вибір
    інтерфейсів, але інтерфейси newt і text доступні на більшості типових
    носіїв. На архітектурах, які його підтримують, графічна програма
    встановлення використовує інтерфейс gtk.

BOOT_DEBUG

    Якщо встановити цей параметр завантаження у 2, процес завантаження програми
    встановлення буде записано у словесний журнал. Якщо встановити значення 3,
    налагоджувальні оболонки будуть доступні у стратегічних точках процесу
    завантаження. (Вийдіть з оболонки, щоб продовжити процес завантаження.)

    BOOT_DEBUG=0

        Це є за замовчуванням.

    BOOT_DEBUG=1

        Більш багатослівний, ніж зазвичай.

    BOOT_DEBUG=2

        Багато налагоджувальної інформації.

    BOOT_DEBUG=3

        Оболонки запускаються на різних етапах процесу завантаження, щоб
        забезпечити детальне налагодження. Вийдіть з оболонки, щоб продовжити
        завантаження.

log_host, log_port

    Дозволяє програмі встановлення надсилати повідомлення журналу до
    віддаленого журналу syslog на вказаному хості і порту, а також до
    локального файлу. Якщо порт не вказано, за замовчуванням використовується
    стандартний порт syslog 514.

lowmem

    Може бути використано для примусового встановлення програми встановлення на
    рівень lowmem, вищий за той, який програма встановлення встановлює за
    замовчуванням, виходячи з доступної пам'яті. Можливі значення 1 та 2. Див.
    також Розділ 6.3.1.1, «Перевірка доступної пам'яті / режим низької пам'яті»
    .

noshell

    Забороняє програмі встановлення пропонувати інтерактивні оболонки на tty2
    та tty3. Корисно для установок без нагляду, де фізична безпека обмежена.

debian-installer/framebuffer (fb)

    Деякі архітектури використовують фреймбуфер ядра, щоб запропонувати
    встановлення кількома мовами. Якщо фреймбуфер викликає проблеми у вашій
    системі, ви можете вимкнути його за допомогою параметра vga=normal
    nomodeset. Симптомами проблеми є повідомлення про помилки bterm або bogl,
    порожній екран або зависання протягом декількох хвилин після початку
    встановлення.

debian-installer/theme (theme)

    Тема визначає вигляд інтерфейсу користувача програми встановлення (кольори,
    піктограми тощо). Доступні теми можуть відрізнятися залежно від фронтенду.
    Наразі інтерфейси newt та gtk мають (окрім стандартного вигляду) лише одну
    додаткову тему під назвою «dark», яка була розроблена для користувачів з
    вадами зору. Встановіть цю тему, завантажившись за допомогою theme=dark
    (для цього також є комбінація клавіш d у меню завантаження).

netcfg/disable_autoconfig

    За замовчуванням, debian-installer автоматично перевіряє конфігурацію
    мережі за допомогою автоконфігурації IPv6 і DHCP. Якщо зонд пройде успішно,
    у вас не буде можливості переглянути та змінити отримані налаштування. До
    ручного налаштування мережі можна перейти лише у випадку, якщо автоматична
    конфігурація не спрацювала.

    Якщо у вашій локальній мережі є IPv6-маршрутизатор або DHCP-сервер, але ви
    хочете уникнути їх, оскільки вони, наприклад, дають неправильні відповіді,
    ви можете скористатися параметром netcfg/disable_autoconfig=true, щоб
    запобігти автоматичному налаштуванню мережі (ні v4, ні v6) і ввести
    інформацію вручну.

hw-detect/start_pcmcia

    Встановіть значення false, щоб запобігти запуску служб PCMCIA, якщо це
    спричиняє проблеми. Деякі ноутбуки добре відомі своєю поганою поведінкою.

preseed/url (url)

    Вкажіть URL-адресу файлу попередньої конфігурації для завантаження та
    використання для автоматизації інсталяції. Див. Розділ 4.6, «Автоматичне
    встановлення».

preseed/file (file)

    Вкажіть шлях до файлу попередньої конфігурації, який буде завантажено для
    автоматизації встановлення. Див. Розділ 4.6, «Автоматичне встановлення».

попередній/інтерактивний

    Встановіть значення true для відображення запитань, навіть якщо вони були
    попередньо відібрані. Може бути корисним для тестування або налагодження
    файлу попередньої конфігурації. Зауважте, що це не вплине на параметри, які
    передаються як параметри завантаження, але для них можна використати
    спеціальний синтаксис. Див. Розділ B.5.2, «Використання попередньої обробки
    для зміни значень за замовчуванням» щоб дізнатися подробиці.

автоматичне встановлення/ввімкнення (авто)

    Відкласти питання, які зазвичай ставлять перед попереднім завантаженням,
    можна до завершення налаштування мережі. Див. Розділ B.2.3, «Автоматичний
    режим» щоб дізнатися більше про використання цього інструменту для
    автоматизації інсталяцій.

finish-install/keep-consoles

    Під час встановлення з послідовного порту або консолі керування звичайні
    віртуальні консолі (від VT1 до VT6) зазвичай вимкнено у /etc/inittab.
    Встановіть значення true, щоб запобігти цьому.

cdrom-detect/eject

    За замовчуванням, перед перезавантаженням, debian-installer автоматично
    витягує оптичний носій, який використовувався під час інсталяції. Це може
    бути непотрібним, якщо система не завантажується автоматично з таких
    носіїв. У деяких випадках це може бути навіть небажано, наприклад, якщо
    оптичний привід не може самостійно вставити носій, а користувача немає
    поруч, щоб зробити це вручну. Багато накопичувачів зі слотовим
    завантаженням, тонких накопичувачів і накопичувачів типу "кедді" не можуть
    автоматично перезавантажувати носії.

    Встановіть значення false, щоб вимкнути автоматичне витягування, і майте на
    увазі, що вам може знадобитися зробити так, щоб система не завантажувалася
    автоматично з оптичного приводу після початкового встановлення.

base-installer/install-recommends (рекомендації)

    Якщо встановити для цього параметра значення false, систему керування
    пакунками буде налаштовано так, щоб автоматично не встановлювати «
    Рекомендації», як під час встановлення, так і для встановленої системи.
    Див. також Розділ 6.3.5, «Встановлення базової системи».

    Зверніть увагу, що цей варіант дозволяє отримати більш компактну систему,
    але також може призвести до відсутності функцій, які ви зазвичай очікуєте
    мати в наявності. Можливо, вам доведеться вручну встановити деякі з
    рекомендованих пакунків, щоб отримати повну функціональність, яку ви
    бажаєте. Тому цю опцію слід використовувати лише дуже досвідченим
    користувачам.

debian-installer/allow_unauthenticated

    За замовчуванням програма встановлення вимагає автентифікації сховищ за
    допомогою відомого ключа gpg. Встановіть значення true, щоб вимкнути цю
    автентифікацію. Попередження: небезпечно, не рекомендовано.

рятувати/вмикати

    Встановіть значення true, щоб увійти у режим відновлення, а не виконати
    звичайне встановлення. Див. Розділ 8.6, «Відновлення пошкодженої системи».

5.3.3. Використання параметрів завантаження для відповідей на запитання

За деякими винятками, можна задати значення у запрошенні до завантаження для
будь-якого запитання під час інсталяції, хоча це дійсно корисно лише у певних
випадках. Загальні інструкції про те, як це зробити, можна знайти в
Розділ B.2.2, «Використання параметрів завантаження для попереднього вибору
питань». Деякі конкретні приклади наведені нижче.

debian-installer/language (мова), debian-installer/country (країна), 
debian-installer/locale (місцевість)

    Існує два способи вказати мову, країну і місцевість, які будуть
    використовуватися для інсталяції та інстальованої системи.

    Перший і найпростіший спосіб - передати лише параметр locale. Мова і країна
    потім будуть виведені з його значення. Наприклад, ви можете використати
    locale=de_CH.UTF-8, щоб вибрати німецьку мову і Швейцарію як країну
    (de_CH.UTF-8 буде встановлено як місцевість за замовчуванням для
    встановленої системи). Обмеження полягає в тому, що не всі можливі
    комбінації мови, країни та місцевості можуть бути досягнуті таким чином.

    Другий, більш гнучкий варіант - вказати мову і країну окремо. У цьому
    випадку можна додати locale, щоб вказати локаль за замовчуванням для
    встановленої системи. Приклад: language=en country=DE locale=en_GB.UTF-8.

anna/choose_modules (модулі)

    Може використовуватися для автоматичного завантаження компонентів
    інсталятора, які не завантажуються за замовчуванням. Прикладами
    необов'язкових компонентів, які можуть бути корисними, є
    openssh-client-udeb (щоб ви могли використовувати scp під час встановлення)
    і ppp-udeb (див. Розділ D.5, «Встановлення Debian GNU/Linux за допомогою
    PPP через Ethernet (PPPoE)»).

netcfg/disable_autoconfig

    Встановіть значення true, якщо ви хочете вимкнути автоконфігурацію IPv6 і
    DHCP і натомість примусити до статичної конфігурації мережі.

mirror/protocol (протокол)

    За замовчуванням, програма встановлення використовує протокол http для
    завантаження файлів з дзеркал Debian, і зміна цього протоколу на ftp
    неможлива під час встановлення зі звичайним пріоритетом. Встановивши для
    цього параметра значення ftp, ви можете змусити програму встановлення
    використовувати цей протокол. Зверніть увагу, що ви не можете вибрати
    ftp-дзеркало зі списку, ви повинні ввести ім'я хоста вручну.

tasksel:tasksel/first (завдання)

    Можна використовувати для вибору завдань, недоступних у інтерактивному
    списку завдань, наприклад, завдання kde-desktop. Див. Розділ 6.3.6.2,
    «Вибір та встановлення програмного забезпечення», щоб дізнатися додаткову
    інфомацію.

5.3.4. Передача параметрів модулям ядра

Якщо драйвери скомпільовано у ядро, ви можете передати їм параметри, як описано
у документації до ядра. Однак, якщо драйвери скомпільовано як модулі, і
оскільки модулі ядра під час встановлення завантажуються дещо інакше, ніж під
час завантаження встановленої системи, неможливо передати параметри модулям у
звичайний спосіб. Замість цього, вам потрібно використовувати спеціальний
синтаксис, який розпізнається програмою встановлення, що забезпечить збереження
параметрів у відповідних конфігураційних файлах і, таким чином, буде
використано під час завантаження модулів. Параметри також будуть автоматично
перенесені в конфігурацію встановленої системи.

Зауважте, що зараз досить рідко потрібно передавати параметри в модулі. У
більшості випадків ядро зможе дослідити наявне у системі апаратне забезпечення
і таким чином встановити гарні налаштування за замовчуванням. Однак у деяких
ситуаціях може знадобитися задати параметри вручну.

Синтаксис, який слід використовувати для встановлення параметрів для модулів,
наступний:

module_name.parameter_name=value

Якщо вам потрібно передати кілька параметрів одному або різним модулям, просто
повторіть цю процедуру. Наприклад, щоб налаштувати стару мережеву інтерфейсну
карту 3Com на використання роз'єму BNC (коаксіальний) і IRQ 10, потрібно
виконати такі дії:

3c509.xcvr=3 3c509.irq=10

5.3.5. Чорний список модулів ядра

Іноді може знадобитися внести модуль до чорного списку, щоб запобігти його
автоматичному завантаженню ядром та udev. Однією з причин може бути те, що
певний модуль викликає проблеми з вашим обладнанням. Ядро також іноді показує
два різні драйвери для одного пристрою. Це може призвести до неправильної
роботи пристрою, якщо драйвери конфліктують або якщо першим завантажується
неправильний драйвер.

Ви можете додати модуль до чорного списку, використовуючи наступний синтаксис:
module_name.blacklist=yes. Це призведе до того, що модуль буде додано до
чорного списку в /etc/modprobe.d/blacklist.local як під час інсталяції, так і
для встановленої системи.

Зверніть увагу, що модуль може бути завантажений самою системою встановлення.
Ви можете запобігти цьому, запустивши інсталяцію в експертному режимі і
вилучивши модуль зі списку модулів, що відображаються на етапах виявлення
обладнання.

5.4. Усунення несправностей у процесі встановлення

5.4.1. Надійність оптичних носіїв

Іноді, особливо на старих дисках, програма встановлення може не завантажитися з
оптичного диска. Програма встановлення також може -- навіть після успішного
завантаження з такого диска -- не розпізнати диск або видавати помилки при
читанні з нього під час встановлення.

Існує багато різних можливих причин цих проблем. Ми можемо лише перерахувати
деякі поширені проблеми та надати загальні рекомендації щодо їх вирішення. Все
інше залежить від вас.

Є дві дуже прості речі, які варто спробувати в першу чергу.

  • Якщо диск не завантажується, перевірте, чи правильно він вставлений і чи не
    забруднений.

  • Якщо програмі встановлення не вдається розпізнати диск, спробуйте виконати
    параметр Виявити і змонтувати інсталяційний носій вдруге. Відомо, що деякі
    проблеми, пов'язані з DMA у дуже старих приводах CD-ROM, можна вирішити у
    такий спосіб.

Якщо це не спрацювало, спробуйте скористатися порадами в наступних підрозділах.
Більшість, але не всі, пропозиції, що обговорювалися там, дійсні для CD-ROM і
DVD.

Якщо вам не вдається запустити інсталяцію з оптичного диска, спробуйте один з
інших доступних способів інсталяції.

5.4.1.1. Основні проблеми

  • Деякі старі приводи CD-ROM не підтримують читання з дисків, записаних на
    високих швидкостях за допомогою сучасного пристрою запису компакт-дисків.

  • Деякі дуже старі приводи CD-ROM не працюють належним чином, якщо для них
    увімкнено «прямий доступ до пам'яті» (DMA).

5.4.1.2. Як дослідити і, можливо, вирішити проблеми

Якщо оптичний диск не завантажується, спробуйте скористатися наведеними нижче
порадами.

  • Переконайтеся, що ваш BIOS/UEFI дійсно підтримує завантаження з оптичних
    дисків (це проблема лише для дуже старих систем) і що завантаження з таких
    носіїв увімкнено в BIOS/UEFI.

  • Якщо ви завантажили iso-образ, перевірте, чи md5-сума цього образу
    відповідає md5-сумі, вказаній для образу у файлі MD5SUMS, який має
    знаходитися у тому ж місці, звідки ви завантажили образ.

    $ md5sum debian-testing-i386-netinst.iso
    a20391b12f7ff22ef705cee4059c6b92  debian-testing-i386-netinst.iso

    Далі перевірте, чи збігається md5-сума спаленого диска. Наступна команда
    повинна спрацювати. Вона використовує розмір зображення для зчитування
    потрібної кількості байт з диска.

    $ dd if=/dev/cdrom | \
    > head -c `stat --format=%s debian-testing-i386-netinst.iso` | \
    > md5sum
    a20391b12f7ff22ef705cee4059c6b92  -
    262668+0 записів всередині
    262668+0 записів ззовні
    134486016 байтів (134 МБ) скопійовано, 97.474 секунд, 1.4 МБ/с

Якщо після успішного завантаження програми встановлення диск не виявлено,
інколи проблему можна вирішити простим повторенням спроби. Якщо у вас більше
одного оптичного приводу, спробуйте замінити диск на інший привід. Якщо це не
спрацювало, або якщо диск розпізнано, але виникають помилки під час читання з
нього, спробуйте скористатися наведеними нижче порадами. Для цього потрібні
деякі базові знання про Linux. Щоб виконати будь-яку з команд, слід спочатку
переключитися на другу віртуальну консоль (VT2) і активувати оболонку там.

  • Перейдіть до VT4 або перегляньте вміст /var/log/syslog (використовуйте nano
    як редактор), щоб перевірити наявність певних повідомлень про помилки.
    Після цього, також перевірте вивід dmesg.

  • Перевірте у виводі dmesg, чи було розпізнано ваш оптичний привід. Ви
    повинні побачити щось на кшталт (рядки не обов'язково повинні йти підряд):

    ata1.00: ATAPI: MATSHITADVD-RAM UJ-822S, 1.61, max UDMA/33
    ata1.00: сконфігуровано для UDMA/33
    scsi 0:0:0:0: CD-ROM            MATSHITA DVD-RAM UJ-822S  1.61 PQ: 0 ANSI: 5
    sr0: scsi3-mmc drive: 24x/24x writer dvd-ram cd/rw xa/form2 cdda tray
    cdrom: Уніфікована версія драйвера CD-ROM: 3.20

    Якщо ви не бачите нічого подібного, швидше за все, контролер, до якого
    підключено ваш диск, не було розпізнано або він взагалі не підтримується.
    Якщо ви знаєте, який драйвер потрібен для контролера, ви можете спробувати
    завантажити його вручну за допомогою modprobe.

  • Перевірте, чи є вузол пристрою для вашого оптичного приводу у теці /dev/. У
    наведеному вище прикладі це буде /dev/sr0. Також має бути /dev/cdrom.

  • Використовуйте команду mount, щоб перевірити, чи оптичний диск вже
    змонтовано; якщо ні, спробуйте встановити його вручну:

    $ mount /dev/hdc /cdrom

    Перевірте, чи не з'являються повідомлення про помилки після цієї команди.

  • Перевірте, чи наразі увімкнено DMA:

    $ cd /proc/ide/hdc
    $ grep using_dma settings
    using_dma      1       0       1       rw

    «1» у першому стовпчику після using_dma означає, що його увімкнено. Якщо це
    так, спробуйте вимкнути його:

    $ echo -n "using_dma:0" >settings

    Переконайтеся, що ви перебуваєте в каталозі пристрою, який відповідає
    вашому оптичному приводу.

  • Якщо під час встановлення виникли проблеми, спробуйте перевірити цілісність
    інсталяційного носія за допомогою опції внизу головного меню програми
    встановлення. Цей параметр також можна використовувати як загальну
    перевірку надійності зчитування диска.

5.4.2. Налаштування завантаження

Якщо у вас виникли проблеми і ядро зависає під час завантаження, не розпізнає
периферійні пристрої або неправильно розпізнає диски, перше, що слід перевірити
- це параметри завантаження, як описано у Розділ 5.3, «Параметри завантаження».

У деяких випадках несправності можуть бути спричинені відсутністю прошивки
пристрою (див. Розділ 2.2, «Пристрої, що потребують прошивки» і Розділ 6.4,
«Завантаження втраченої прошивки»).

5.4.3. Програмний синтез мовлення

Якщо програмний синтез мови не працює, найімовірніше, проблема у вашій звуковій
платі, зазвичай через те, що драйвер для неї не включено до інсталятора, або
через те, що вона має незвичні назви рівнів мікшера, які за замовчуванням
налаштовано на вимкнення. Таким чином, ви повинні надіслати звіт про ваду, який
включає виведення наступних команд, запущених на тій самій машині із системи
Linux, яка, як відомо, працює зі звуком (наприклад, з живого компакт-диска).

  • dmesg

  • lspci

  • lsmod

  • amixer

5.4.4. Загальний 64-bit PC Проблеми встановлення

Існує кілька поширених проблем зі встановленням, які можна вирішити або
уникнути, передавши програмі встановлення певні параметри завантаження.

Якщо під час завантаження ядра на екрані з'являється дивна картинка, наприклад,
чистий білий, чистий чорний або кольорове піксельне сміття, можливо, у вашій
системі встановлена відеокарта, яка неправильно перемикається у режим
фреймбуфера. Тоді ви можете використати параметр завантаження vga=normal
nomodeset, щоб вимкнути консоль фреймбуфера. Через обмежені можливості консолі
під час інсталяції буде доступний лише обмежений набір мов. Див. Розділ 5.3,
«Параметри завантаження», щоб дізнатися подробиці.

5.4.4.1. Зависання системи на етапі конфігурації PCMCIA

Відомо, що деякі дуже старі моделі ноутбуків виробництва Dell виходять з ладу,
коли виявлення пристроїв PCMCIA намагається отримати доступ до деяких апаратних
адрес. Інші ноутбуки можуть мати схожі проблеми. Якщо у вас виникла така
проблема і вам не потрібна підтримка PCMCIA під час встановлення, ви можете
вимкнути PCMCIA за допомогою параметра завантаження hw-detect/start_pcmcia=
false. Після завершення інсталяції ви можете налаштувати PCMCIA і виключити
діапазон ресурсів, який спричиняє проблеми.

Крім того, ви можете запустити програму встановлення у експертному режимі.
Потім вам буде запропоновано ввести параметри діапазону ресурсів, необхідних
для вашого обладнання. Наприклад, якщо у вас один зі згаданих вище ноутбуків
Dell, вам слід ввести тут виключити порт 0x800-0x8ff. Також є список деяких
поширених варіантів діапазонів ресурсів у Розділ налаштувань системних ресурсів
настанови PCMCIA HOWTO. Зверніть увагу, що вам слід опустити коми, якщо вони є,
коли ви вводите це значення у програмі встановлення.

5.4.5. Інтерпретація повідомлень запуску ядра

Під час завантаження, ви можете побачити багато повідомлень у вигляді неможливо
знайти щось, або something відсутній, неможливо ініціалізувати щось, або навіть
цей випуск драйвера залежить від чогось. Більшість цих повідомлень нешкідливі.
Ви бачите їх, тому що ядро інсталяційної системи створено для роботи на
комп'ютерах з багатьма різними периферійними пристроями. Очевидно, що жоден
комп'ютер не може мати всі можливі периферійні пристрої, тому операційна
система може видавати кілька скарг під час пошуку периферійних пристроїв, яких
у вас немає. Ви також можете побачити, що система призупиниться на деякий час.
Це трапляється, коли програма очікує на відповідь пристрою, який відсутній у
вашій системі. Якщо ви вважаєте час завантаження системи неприйнятно довгим, ви
можете створити власне ядро пізніше (див. Розділ 8.5, «Компіляція нового ядра»)
.

5.4.6. Повідомлення про проблеми з установкою

Якщо ви пройшли початкову фазу завантаження, але не можете завершити
встановлення, вам може допомогти пункт меню Зберегти журнали налагодження. Він
дозволяє зберігати журнали системних помилок та інформацію про конфігурацію від
інсталятора на носії або завантажувати їх за допомогою браузера. Ця інформація
може дати підказки про те, що пішло не так, і як це виправити. Якщо ви
надсилаєте повідомлення про ваду, ви можете додати цю інформацію до
повідомлення про ваду.

Інші відповідні повідомлення про встановлення можна знайти у /var/log/ під час
встановлення та у /var/log/installer/ після завантаження комп'ютера у
встановлену систему.

5.4.7. Надсилання звітів про встановлення

Якщо у вас все ще виникають проблеми, будь ласка, надішліть звіт про
встановлення (англійською мовою, якщо це можливо). Ми також заохочуємо
надсилати звіти про встановлення, навіть якщо воно пройшло успішно, щоб ми
могли отримати якомога більше інформації про якомога більшу кількість апаратних
конфігурацій.

Зауважте, що ваш звіт про встановлення буде опубліковано у Debian Bug Tracking
System (BTS) і надіслано до відкритого списку розсилки. Переконайтеся, що ви
використовуєте адресу електронної пошти, яку ви не проти зробити публічною.

Якщо у вас працює система Debian, найпростіший спосіб надіслати звіт про
встановлення - це встановити пакунки installation-report та reportbug (apt
install installation-report reportbug), налаштувати reportbug, як описано у
Розділ 8.4.2, «Надсилання пошти за межі системи», та виконати команду reportbug
installation-reports.

Крім того, ви можете використовувати цей шаблон для заповнення звітів про
встановлення і подати звіт як повідомлення про ваду до псевдопакета
installation-reports, надіславши його на адресу <submit@bugs.debian.org>.

Пакунок: installation-reports

Метод завантаження: <Як ви завантажили інсталятор? CD/DVD? Флешка? З мережі?>
Версія образу: <Найкраще - повна URL-адреса зображення, яке ви завантажили>
Дата: <Дата та час встановлення>

Машина: <Опис машини (наприклад, IBM Thinkpad R32)>
Процесор:
Пам'ять:
Розділи?: <df -Tl підійде; бажано використовувати сиру таблицю розділів>

Виведення lspci -knn (або lspci -nn):

Контрольний список встановлення базової системи:
[O] = OK, [E] = Error (будь ласка, поясніть нижче), [ ] = не пробував це

Початкове завантаження:           [ ]
Визначити мережеву карту:    [ ]
Налаштування мережі:      [ ]
Виявити носії:           [ ]
Завантажити модулі інсталятора: [ ]
Виявити жорсткі диски:     [ ]
Розбиття жорстких дисків на розділи:  [ ]
Встановити базову систему:    [ ]
Налаштування годинника/часового поясу:   [ ]
Налаштування користувача/пароля:    [ ]
Встановити завдання:          [ ]
Встановити завантажувач:    [ ]
Загальна установка:        [ ]

Коментарі/Проблеми:

<Опис інсталяції, в прозі, та будь-які думки, коментарі
      та ідеї, які у вас виникли під час початкової інсталяції.>

Будь ласка, переконайтеся, що всі журнали встановлення, які, на вашу думку, могли б
можуть бути корисними, додаються до цього звіту. (Ви можете знайти їх в інсталяторі
system in /var/log/ а згодом і встановлену систему під
/var/log/installer.) Будь ласка, стискайте великі файли за допомогою gzip.


У звіті про ваду, опишіть суть проблеми, включаючи останні видимі повідомлення
ядра у випадку зависання ядра. Опишіть кроки, які ви зробили, щоб привести
систему в проблемний стан.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[3] У поточних ядрах (2.6.9 або новіших) ви можете використовувати 32
параметри командного рядка і 32 параметри оточення. Якщо ці числа буде
перевищено, ядро запанікує. Також існує обмеження у 255 символів для всього
командного рядка ядра, все, що перевищує цей ліміт, може бути автоматично
обрізано.

Розділ 6. Використання інсталятора Debian

Зміст

6.1. Як працює програма встановлення
    6.1.1. Використання графічного інсталятора
6.2. Вступ до компонентів
6.3. Використання окремих компонентів
    6.3.1. Налаштування Debian інсталятора та конфігурації обладнання
    6.3.2. Налаштування користувачів та паролів
    6.3.3. Налаштування годинника і часового поясу
    6.3.4. Створення розділів і вибір точок кріплення
    6.3.5. Встановлення базової системи
    6.3.6. Встановлення додаткового програмного забезпечення
    6.3.7. Як зробити систему завантажувальною
    6.3.8. Завершення встановлення
    6.3.9. Усунення несправностей
    6.3.10. Встановлення через мережеву консоль
6.4. Завантаження втраченої прошивки
    6.4.1. Підготовка середовища
    6.4.2. Прошивка та встановлена система
    6.4.3. Завершення встановленої системи
6.5. Кастомізація
    6.5.1. Встановлення альтернативної системи ініціалізації

6.1. Як працює програма встановлення

Для цієї архітектури debian-installer підтримує два різних інтерфейси
користувача: графічний та текстовий. Типово використовується графічний
інтерфейс, якщо Ви не вибрали опцію «Install» у меню завантаження. Для
отримання додаткової інформації про завантаження графічного інсталятора,
зверніться до Розділ 5.1.6, «Графічний інсталятор».

Програма встановлення Debian складається з низки спеціалізованих компонентів
для виконання кожного завдання встановлення. Кожен компонент виконує своє
завдання, ставлячи користувачеві запитання, необхідні для виконання своєї
роботи. Самі питання мають пріоритети, і пріоритет питань, які будуть
поставлені, встановлюється під час запуску інсталятора.

Під час інсталяції за замовчуванням будуть задані лише важливі (пріоритетні)
питання. Це призводить до високоавтоматизованого процесу встановлення з
мінімальним втручанням користувача. Компоненти запускаються автоматично у
певній послідовності; які саме компоненти запускатимуться, залежить, головним
чином, від методу інсталяції, який ви використовуєте, та вашого обладнання.
Програма встановлення використовуватиме значення за замовчуванням для запитань,
які не буде поставлено.

Якщо виникне проблема, користувач побачить екран з помилкою, а також може бути
показано меню інсталятора для вибору альтернативної дії. Якщо проблем немає,
користувач ніколи не побачить меню інсталятора, а просто відповідатиме на
запитання для кожного компонента по черзі. Сповіщення про серйозні помилки
мають пріоритет «критичні», тому користувач завжди буде повідомлений.

На деякі значення за замовчуванням, які використовує програма встановлення,
можна вплинути, передавши аргументи завантаження під час запуску
debian-installer. Якщо, наприклад, ви хочете примусово застосувати статичну
конфігурацію мережі (автоконфігурація IPv6 і DHCP використовуються за
замовчуванням, якщо вони доступні), ви можете додати параметр завантаження
netcfg/disable_autoconfig=true. Дивіться Розділ 5.3.2, «Debian Параметри
встановлення» для отримання інформації про доступні варіанти.

Досвідченим користувачам може бути зручніше користуватися інтерфейсом,
керованим меню, де кожен крок контролюється користувачем, а не програмою
встановлення, яка виконує всі кроки автоматично і послідовно. Щоб
використовувати програму встановлення вручну, за допомогою меню, додайте
аргумент завантаження priority=medium.

Якщо ваше апаратне забезпечення вимагає передавання параметрів модулям ядра під
час встановлення, вам слід запустити програму встановлення у режимі «експерта».
Це можна зробити або за допомогою команди expert для запуску програми
встановлення, або додавши аргумент завантаження priority=low. Експертний режим
дає вам повний контроль над debian-installer.

У текстовому середовищі використання миші не підтримується. Ось клавіші, які ви
можете використовувати для навігації в різних діалогових вікнах. Клавіші зі
стрілками Tab або вправо переміщують «вперед», а клавіші зі стрілками Shift+Tab
або вліво переміщують «назад» між відображуваними кнопками і виділеннями.
Стрілки вгору і вниз вибирають різні елементи у прокручуваному списку, а також
прокручують сам список. Крім того, у довгих списках ви можете ввести літеру,
щоб прокрутити список безпосередньо до розділу з елементами, що починаються на
введену вами літеру, а також використовувати Pg-Up і Pg-Down для прокручування
списку за розділами. За допомогою пробіл можна вибрати елемент, наприклад,
прапорець. Використовуйте Enter, щоб активувати опції.

Деякі діалоги можуть містити додаткову довідкову інформацію. Якщо довідка
доступна, це буде вказано у нижньому рядку екрана, де буде показано, що доступ
до довідкової інформації можна отримати, натиснувши клавішу F1.

Повідомлення про помилки та журнали перенаправляються на четверту консоль. Ви
можете отримати доступ до цієї консолі, натиснувши Left Alt+F4 (утримуйте ліву
клавішу Alt, одночасно натиснувши функціональну клавішу F4); повернутися до
основного процесу встановлення за допомогою Left Alt+F1.

Ці повідомлення також можна знайти у /var/log/syslog. Після встановлення, цей
журнал буде скопійовано до /var/log/installer/syslog у вашій новій системі.
Інші повідомлення про встановлення можна знайти у /var/log/ під час
встановлення та у /var/log/installer/ після завантаження комп'ютера у
встановлену систему.

6.1.1. Використання графічного інсталятора

Графічний інсталятор працює так само, як і текстовий, тому решту цього
посібника можна використовувати для того, щоб допомогти вам у процесі
інсталяції.

Якщо ви віддаєте перевагу клавіатурі, а не миші, вам потрібно знати дві речі.
Для розгортання згорнутого списку (наприклад, для вибору країн у межах
континентів) можна використовувати клавіші + та -. У питаннях, де можна вибрати
кілька варіантів відповідей (наприклад, вибір завдання), спочатку потрібно
перейти до кнопки Continue після того, як ви зробили вибір; натискання клавіші
Enter переключить вибір, а не активує Continue.

Якщо діалогове вікно пропонує додаткову довідкову інформацію, буде показано
кнопку Допомога. Доступ до довідкової інформації можна отримати, активувавши
кнопку або натиснувши клавішу F1.

Для перемикання на іншу консоль вам також потрібно використовувати клавішу Ctrl
, так само як і у випадку з X Window System. Наприклад, для переходу до VT2
(першої налагоджувальної оболонки) ви можете використати: Ctrl+Left Alt+F2.
Сама графічна програма встановлення працює на VT5, тому ви можете скористатися 
Left Alt+F5 для перемикання назад.

6.2. Вступ до компонентів

Ось список компонентів інсталятора з коротким описом призначення кожного з них.
Детальна інформація про використання певного компонента знаходиться в
Розділ 6.3, «Використання окремих компонентів».

main-menu

    Показує користувачеві список компонентів під час роботи інсталятора і
    запускає компонент після його вибору. Питання головного меню мають середній
    пріоритет, тому якщо ваш пріоритет високий або критичний (високий за
    замовчуванням), ви не побачите меню. З іншого боку, якщо виникла помилка,
    яка вимагає вашого втручання, пріоритет питання може бути тимчасово
    знижений, щоб ви могли вирішити проблему, і в цьому випадку може з'явитися
    меню.

    Ви можете потрапити до головного меню, натиснувши кнопку Go Back декілька
    разів, щоб повернутися назад з поточного компонента.

localechooser

    Дозволяє користувачеві вибрати параметри локалізації для інсталяції та
    інстальованої системи: мова, країна та локалі. Програма встановлення
    показуватиме повідомлення вибраною мовою, якщо тільки переклад для цієї
    мови не є повним, у такому випадку деякі повідомлення можуть бути показані
    англійською.

console-setup

    Показує список клавіатур (розкладок), з яких користувач вибирає ту, яка
    відповідає його моделі.

hw-detect

    Автоматично виявляє більшість апаратних засобів системи, включаючи мережеві
    карти, дискові накопичувачі та PCMCIA.

cdrom-detect

    Шукає і монтує інсталяційний носій Debian.

netcfg

    Налаштовує мережеві з'єднання комп'ютера, щоб він міг спілкуватися через
    Інтернет.

iso-scan

    Шукає ISO-образи (.iso) на жорстких дисках.

choose-mirror

    Показує список дзеркал архіву Debian. Користувач може вибрати джерело своїх
    інсталяційних пакунків.

cdrom-checker

    Перевіряє цілісність інсталяційного носія. Таким чином, користувач може
    бути впевнений, що інсталяційний образ не був пошкоджений.

lowmem

    Lowmem намагається виявити системи з малим обсягом пам'яті, а потім виконує
    різні трюки, щоб видалити непотрібні частини debian-installer з пам'яті
    (ціною втрати деяких функцій).

anna

    Анна не зовсім APT. Встановлює пакунки, отримані з вибраного дзеркала або
    інсталяційного носія.

user-setup

    Встановлює пароль root і додає користувача, який не є root-користувачем.

clock-setup

    Оновлює системний годинник і визначає, чи встановлено час за Гринвічем, чи
    ні.

tzsetup

    Вибирає часовий пояс на основі вибраного раніше місця розташування.

partman

    Дозволяє користувачеві розбивати підключені до системи диски на розділи,
    створювати файлові системи на вибраних розділах і приєднувати їх до точок
    монтування. Також є цікаві функції, такі як повністю автоматичний режим або
    підтримка LVM. Це найкращий інструмент для створення розділів у Debian.

partman-lvm

    Допомагає користувачеві з налаштуванням LVM (Logical Volume Manager).

partman-md

    Дозволяє користувачеві налаштувати програмний RAID (Redundant Array of
    Inexpensive Disks). Цей програмний RAID зазвичай перевершує дешеві IDE
    (псевдоапаратні) RAID-контролери, які можна знайти на нових материнських
    платах.

base-installer

    Встановлює базовий набір пакунків, які дозволять комп'ютеру працювати під
    керуванням Debian GNU/Linux після перезавантаження.

apt-setup

    Налаштовує apt, здебільшого автоматично, на основі того, з якого носія
    запущено програму встановлення.

pkgsel

    Використовує tasksel для вибору та встановлення додаткового програмного
    забезпечення.

os-prober

    Виявляє встановлені на комп'ютері операційні системи і передає цю
    інформацію завантажувачу-інсталятору, який може запропонувати вам
    можливість додати виявлені операційні системи до стартового меню
    завантажувача. Таким чином, користувач міг легко вибрати під час
    завантаження, яку операційну систему запустити.

bootloader-installer

    Різні програми встановлення завантажувачів встановлюють на жорсткий диск
    програму завантажувача, яка необхідна для запуску комп'ютера за допомогою
    Linux без використання USB-накопичувача або CD-ROM. Багато завантажувачів
    дозволяють користувачеві вибирати альтернативну операційну систему при
    кожному завантаженні комп'ютера.

shell

    Дозволяє користувачеві запускати оболонку з меню або у другій консолі.

save-logs

    Надає користувачеві можливість записувати інформацію на USB-накопичувач,
    мережу, жорсткий диск або інший носій у разі виникнення проблем, щоб
    пізніше точно повідомити про проблеми з програмним забезпеченням для
    встановлення розробникам.

6.3. Використання окремих компонентів

У цьому розділі ми детально опишемо кожен компонент інсталятора. Компоненти
були згруповані в етапи, які повинні бути зрозумілими для користувачів. Вони
представлені в тому порядку, в якому з'являються під час інсталяції. Зауважте,
що не всі модулі будуть використані для кожної інсталяції; які саме модулі
будуть використані, залежить від методу інсталяції, який ви використовуєте, і
від вашого обладнання.

6.3.1. Налаштування Debian інсталятора та конфігурації обладнання

Припустимо, що Debian Installer завантажився і ви бачите його перший екран.
Наразі можливості debian-installer все ще досить обмежені. Він не знає багато
про ваше обладнання, мову, якою ви віддаєте перевагу, або навіть про завдання,
які він повинен виконувати. Не турбуйтесь. Оскільки debian-installer досить
розумний, він може автоматично проаналізувати ваше обладнання, знайти решту
його компонентів і оновити себе до здатної інсталяційної системи. Однак, вам
все одно потрібно допомогти програмі з деякою інформацією, яку вона не може
визначити автоматично (наприклад, вибрати мову, розкладку клавіатури або бажане
мережеве дзеркало).

Ви помітите, що debian-installer виконує визначення обладнання кілька разів на
цьому етапі. Перший раз призначено саме для обладнання, необхідного для
завантаження компонентів інсталятора (наприклад, ваш CD-ROM або мережева
карта). Оскільки під час першого запуску можуть бути доступні не всі драйвери,
виявлення обладнання потрібно повторити пізніше.

Під час виявлення обладнання debian-installer перевіряє, чи драйвери для
апаратних пристроїв у вашій системі потребують завантаження мікропрограми. Якщо
запитується будь-яка прошивка, але вона відсутня, буде показано діалогове
вікно, яке дозволить завантажити відсутню прошивку зі знімного носія. Дивіться
Розділ 6.4, «Завантаження втраченої прошивки» для отримання докладнішої
інформації.

6.3.1.1. Перевірка доступної пам'яті / режим низької пам'яті

Одна з перших речей, яку робить debian-installer - це перевірка доступної
пам'яті. Якщо доступна пам'ять обмежена, цей компонент внесе деякі зміни у
процес встановлення, які, сподіваємося, дозволять вам встановити Debian GNU/
Linux у вашій системі.

Першим заходом для зменшення споживання пам'яті інсталятором є вимкнення
перекладу, що означає, що інсталяція може бути виконана лише англійською мовою.
Звичайно, ви можете локалізувати встановлену систему і після завершення
інсталяції.

Якщо цього недостатньо, програма встановлення додатково зменшить споживання
пам'яті, завантаживши лише ті компоненти, які є необхідними для завершення
базового встановлення. Це знижує функціональність інсталяційної системи. Вам
буде надано можливість завантажити додаткові компоненти вручну, але ви повинні
знати, що кожен обраний вами компонент буде використовувати додаткову пам'ять,
що може призвести до збою під час встановлення.

Якщо програма встановлення працює в режимі малої пам'яті, рекомендується
створити відносно великий розділ підкачки (1-2 ГБ). Розділ підкачки буде
використовуватися як віртуальна пам'ять і таким чином збільшить обсяг пам'яті,
доступної системі. Програма встановлення активує розділ підкачки якомога раніше
у процесі встановлення. Зауважте, що інтенсивне використання підкачки знижує
продуктивність вашої системи і може призвести до високої активності диска.

Незважаючи на ці заходи, все ще можливе зависання системи, виникнення
непередбачуваних помилок або завершення процесів ядром через брак пам'яті (що
призведе до появи повідомлень «Немає пам'яті» на VT4 та у системному журналі).

Наприклад, повідомлялося, що створення великої файлової системи ext3 не
вдається в режимі малої пам'яті, коли не вистачає місця підкачки. Якщо
збільшення обсягу пам'яті не допоможе, спробуйте створити файлову систему у
форматі ext2 (який є важливим компонентом програми встановлення). Після
встановлення можна змінити розділ ext2 на ext3.

Можна змусити програму встановлення використовувати вищий рівень lowmem, ніж
той, що базується на доступній пам'яті, за допомогою параметра завантаження «
lowmem», як описано у Розділ 5.3.2, «Debian Параметри встановлення».

6.3.1.2. Вибір опцій локалізації

У більшості випадків перші питання, які вам поставлять, стосуються вибору
варіантів локалізації, які будуть використовуватися як для інсталяції, так і
для інстальованої системи. Опції локалізації складаються з мови, місцевості та
локалі.

Обрана вами мова буде використовуватися протягом усього процесу встановлення за
умови наявності перекладу різних діалогових вікон. Якщо для вибраної мови немає
правильного перекладу, програма встановлення за замовчуванням використовує
англійську мову.

Вибране географічне розташування (у більшості випадків країна) буде використано
пізніше у процесі встановлення для вибору правильного часового поясу і дзеркала
Debian, відповідного для цієї країни. Мова і країна разом допоможуть визначити
локаль за замовчуванням для вашої системи і вибрати правильну розкладку
клавіатури.

Спочатку вам буде запропоновано вибрати мову, якою ви бажаєте користуватися.
Назви мов подано як англійською (ліворуч), так і самою мовою (праворуч); імена
з правого боку також відображаються у відповідному шрифті для цієї мови. Список
відсортовано за англійськими назвами. У верхній частині списку є додаткова
опція, яка дозволяє вибрати локаль «C» замість мови. Вибір локалі «C» призведе
до того, що інсталяцію буде виконано англійською мовою; встановлена система не
матиме підтримки локалізації, оскільки пакунок locales не буде встановлено.

Далі вам буде запропоновано вибрати географічне розташування. Якщо ви вибрали
мову, яка визнана офіційною більш ніж в одній країні^[4], вам буде показано
список лише цих країн. Щоб вибрати країну, якої немає в цьому списку, виберіть 
інше (остання опція). Після цього вам буде представлений список континентів;
вибравши континент, ви побачите список відповідних країн на цьому континенті.

Якщо з мовою пов'язана лише одна країна, буде показано список країн для
континенту або регіону, до якого належить ця країна, з вибором цієї країни за
замовчуванням. Використовуйте опцію Go Back, щоб вибрати країни на іншому
континенті.

Примітка

Важливо вибрати країну, в якій ви живете або перебуваєте, оскільки вона
визначає часовий пояс, який буде налаштовано для встановленої системи.

Якщо ви вибрали комбінацію мови і країни, для якої не визначено жодної локалі,
а для мови існує декілька локалей, програма встановлення дозволить вам вибрати,
якій з цих локалей ви надаєте перевагу як локалі за замовчуванням для
встановленої системи^[5]. У всіх інших випадках буде обрано локаль за
замовчуванням на основі обраної мови та країни.

Будь-яка локаль за замовчуванням, вибрана, як описано у попередньому пункті,
використовуватиме UTF-8 як кодування символів.

Якщо ви встановлюєте систему з низьким пріоритетом, у вас буде можливість
вибрати додаткові локалі, зокрема так звані «застарілі» локалі^[6], який буде
згенеровано для встановленої системи; якщо ви це зробите, вас буде запитано,
яку з вибраних локалей буде встановлено за замовчуванням для інстальованої
системи.

6.3.1.3. Вибір клавіатури

Клавіатури часто пристосовані до символів, що використовуються в тій чи іншій
мові. Виберіть розкладку, яка відповідає клавіатурі, яку ви використовуєте, або
виберіть щось схоже, якщо потрібної вам розкладки немає. Після завершення
встановлення системи ви зможете вибрати розкладку клавіатури з широкого спектра
варіантів (виконайте dpkg-reconfigure keyboard-configuration від імені
користувача root після завершення встановлення).

Перемістіть підсвічування на потрібну клавіатуру і натисніть Enter.
Використовуйте клавіші зі стрілками для переміщення виділення -- вони
знаходяться в одному і тому ж місці в усіх національних мовних розкладках
клавіатури, тому не залежать від конфігурації клавіатури.

6.3.1.4. Шукаємо ISO-образ інсталятора Debian

При встановленні методом hd-media буде момент, коли вам потрібно буде знайти і
змонтувати iso-образ Debian Installer, щоб отримати решту інсталяційних файлів.
Компонент iso-scan робить саме це.

Спочатку, iso-scan автоматично змонтує усі блокові пристрої (наприклад, розділи
і логічні томи), на яких є відома файлова система, і послідовно шукає файли,
назви яких закінчуються на .iso (або .ISO, якщо це має значення). Зауважте, що
перша спроба сканує лише файли у кореневому каталозі та у підкаталогах першого
рівня (тобто знаходить /whatever.iso, /data/whatever.iso, але не /data/tmp/
whatever.iso). Після того, як iso-образ знайдено, iso-scan перевіряє його
вміст, щоб визначити, чи є він дійсним Debian iso-образом чи ні. У першому
випадку ми закінчили, у другому iso-scan шукає інше зображення.

Якщо попередня спроба знайти iso-образ установника виявиться невдалою, iso-scan
запитає вас, чи бажаєте ви виконати ретельніший пошук. Цей прохід не просто
переглядає верхні каталоги, а дійсно обходить всю файлову систему.

Якщо iso-scan не виявить ваш образ iso-файлу інсталятора, перезавантажтеся у
вихідну операційну систему і перевірте, чи правильно названо образ
(закінчується на .iso), чи розміщено його у файловій системі, яку можна
розпізнати за допомогою debian-installer, і чи не пошкоджено його (перевірте
контрольну суму). Досвідчені користувачі Unix можуть зробити це без
перезавантаження на другій консолі.

Зауважте, що розділ (або диск), на якому міститься ISO-образ, не можна
використовувати повторно під час процесу встановлення, оскільки він буде
використовуватися програмою встановлення. Щоб обійти цю проблему і за умови, що
у вас достатньо системної пам'яті, програма встановлення може скопіювати
ISO-образ до оперативної пам'яті перед тим, як змонтувати його. Це
контролюється питанням debconf з низьким пріоритетом iso-scan/copy_iso_to_ram
(воно задається лише у випадку, якщо вимога до пам'яті виконана).

6.3.1.5. Налаштування мережі

На цьому кроці, якщо система виявить, що у вас більше одного мережевого
пристрою, вам буде запропоновано вибрати, який пристрій буде вашим первинним
мережевим інтерфейсом, тобто тим, який ви хочете використовувати для
інсталяції. Інші інтерфейси наразі не будуть налаштовані. Ви можете налаштувати
додаткові інтерфейси після завершення встановлення; див. інтерфейси(5)
сторінку.

6.3.1.5.1. Автоматичне налаштування мережі

За замовчуванням, debian-installer намагається налаштувати мережу вашого
комп'ютера автоматично, наскільки це можливо. Якщо автоматична конфігурація не
вдається, це може бути викликано багатьма факторами, починаючи від відключеного
мережевого кабелю і закінчуючи відсутністю інфраструктури для автоматичної
конфігурації. Для отримання додаткових пояснень у разі виникнення помилок,
зверніться до повідомлень про помилки на четвертій консолі. У будь-якому
випадку, вас запитають, чи хочете ви повторити спробу, чи хочете виконати
налаштування вручну. Іноді мережеві служби, що використовуються для
автоконфігурації, можуть відповідати повільно, тому, якщо ви впевнені, що все
на місці, просто повторіть спробу автоконфігурації. Якщо автоконфігурація
неодноразово не вдається, ви можете вибрати ручне налаштування мережі.

6.3.1.5.2. Ручне налаштування мережі

Ручне налаштування мережі, у свою чергу, ставить вам низку запитань про вашу
мережу, зокрема IP-адреса, Маска мережі, Шлюз, Адреси серверів імен і Ім'я
хоста. Крім того, якщо у вас є бездротовий мережевий інтерфейс, вас попросять
вказати ваш Wireless ESSID («ім'я бездротової мережі») і WEP ключ або WPA/WPA2
парольну фразу. Заповніть відповіді з Розділ 3.3, «Інформація, яка Вам
знадобиться».

Примітка

Деякі технічні деталі, які можуть виявитися корисними, а можуть і ні: програма
вважає, що IP-адреса мережі - це побітове AND з IP-адреси вашої системи і маски
мережі. Широкомовна адреса за замовчуванням обчислюється як побітове OR
IP-адреси вашої системи з побітовим запереченням маски мережі. Це також вгадає
ваш шлюз. Якщо ви не можете знайти жодної з цих відповідей, скористайтеся
запропонованими значеннями за замовчуванням -- при необхідності ви можете
змінити їх, відредагувавши /etc/network/interfaces після інсталяції системи.

6.3.1.5.3. IPv4 та IPv6

Починаючи з Debian GNU/Linux 7.0 («Wheezy»), debian-installer підтримує IPv6, а
також «класичний» IPv4. Підтримуються всі комбінації IPv4 і IPv6 (тільки IPv4,
тільки IPv6 і двостекові конфігурації).

Автоконфігурація для IPv4 виконується за допомогою DHCP (Dynamic Host
Configuration Protocol - протокол динамічної конфігурації хоста).
Автоконфігурація для IPv6 підтримує автоконфігурацію без стану за допомогою NDP
(Neighbor Discovery Protocol, включаючи рекурсивне призначення DNS-сервера
(RDNSS)), автоконфігурацію зі станом за допомогою DHCPv6 і змішану
автоконфігурацію без стану/зі станом (конфігурація адреси за допомогою NDP,
додаткових параметрів за допомогою DHCPv6).

6.3.2. Налаштування користувачів та паролів

Безпосередньо перед налаштуванням годинника, програма встановлення дозволить
вам налаштувати обліковий запис «кореневого користувача» та/або обліковий запис
першого користувача. Інші облікові записи користувачів можна створити після
завершення інсталяції.

6.3.2.1. Встановлення пароля root

Обліковий запис root також називається над-користувачем; це логін, який
обходить усі засоби захисту у вашій системі. Обліковий запис root слід
використовувати лише для виконання системного адміністрування, і лише якомога
коротший час.

Будь-який пароль, який ви створюєте, повинен містити щонайменше 6 символів,
причому як великі, так і малі літери, а також знаки пунктуації. Будьте особливо
уважні, встановлюючи пароль root, оскільки це дуже потужний обліковий запис.
Уникайте словникових слів або використання будь-якої особистої інформації, про
яку можна здогадатися.

Якщо хтось коли-небудь скаже вам, що йому потрібен ваш пароль root, будьте
вкрай обережні. Зазвичай ви ніколи не повинні повідомляти свій пароль root,
якщо тільки ви не адмініструєте комп'ютер, на якому працює більше одного
системного адміністратора.

Якщо ви не вкажете тут пароль для користувача «root», цей обліковий запис буде
вимкнено, але пізніше буде встановлено пакунок sudo, який дозволить виконувати
адміністративні завдання у новій системі. За замовчуванням, першому
користувачеві, створеному у системі, буде дозволено використовувати команду 
sudo, щоб стати root.

6.3.2.2. Створення звичайного користувача

Система запитає вас, чи бажаєте ви створити звичайний обліковий запис
користувача на цьому етапі. Цей обліковий запис має бути вашим основним
особистим логіном. Ви не повинні використовувати обліковий запис root для
щоденного використання або як особистий логін.

Чому не варто? Однією з причин не використовувати привілеї root є те, що від
імені користувача root дуже легко завдати непоправної шкоди. Інша причина
полягає в тому, що вас можуть обманом змусити запустити троянського коня, тобто
програму, яка використовує ваші повноваження суперкористувача, щоб
скомпрометувати безпеку вашої системи за вашою спиною. Будь-яка хороша книга з
системного адміністрування Unix висвітлює цю тему більш детально -- почитайте
її, якщо вона для вас нова.

Спочатку вам буде запропоновано ввести повне ім'я користувача. Потім вас
попросять ввести ім'я для облікового запису користувача; як правило, вашого
імені або чогось подібного буде достатньо, і за замовчуванням це ім'я буде
використано. Нарешті, вам буде запропоновано ввести пароль для цього облікового
запису.

Якщо в будь-який момент після встановлення ви захочете створити інший обліковий
запис, скористайтеся командою adduser.

6.3.3. Налаштування годинника і часового поясу

Спочатку програма встановлення спробує з'єднатися з сервером часу в Інтернеті
(за протоколом NTP), щоб правильно встановити системний час. Якщо це не
вдасться, програма встановлення вважатиме правильними час і дату, отримані з
системного годинника під час завантаження системи встановлення. Неможливо
вручну встановити системний час під час інсталяції.

Залежно від місця, вибраного раніше в процесі встановлення, вам може бути
показано список часових поясів, що відповідають цьому місцю. Якщо у вашому
регіоні є лише один часовий пояс і ви встановлюєте систему за замовчуванням,
вам не буде запропоновано нічого запитувати, і система прийме цей часовий пояс.

У режимі експерта або при встановленні з середнім пріоритетом, у вас буде
додаткова можливість вибрати «Всесвітній координований час» (UTC) як часовий
пояс.

Якщо з якихось причин ви хочете встановити часовий пояс для інстальованої
системи, який не відповідає вибраному місцезнаходженню, є два варіанти.

 1. Найпростіший варіант - просто вибрати інший часовий пояс після завершення
    інсталяції та завантаження нової системи. Команда для цього є такою:

    # dpkg-reconfigure tzdata

 2. Крім того, часовий пояс можна встановити на самому початку встановлення,
    передавши параметр time/zone=value під час завантаження системи
    встановлення. Звичайно, значення повинно відповідати дійсному часовому
    поясу, наприклад, Europe/London або UTC.

Для автоматизованих установок часовий пояс можна встановити на будь-яке
потрібне значення за допомогою попереднього налаштування.

6.3.4. Створення розділів і вибір точок кріплення

В цей час, після того, як визначення апаратного забезпечення було виконано в
останній раз, debian-installer має бути на повну потужність, налаштований під
потреби користувача і готовий до виконання реальної роботи. Як випливає з назви
цього розділу, основне завдання наступних компонентів полягає у розбитті дисків
на розділи, створенні файлових систем, призначенні точок монтування і
додатковому налаштуванні тісно пов'язаних з ними опцій, таких як RAID, LVM або
зашифровані пристрої.

Якщо вам незручно працювати з розділами або ви просто хочете дізнатися більше
деталей, див. Додаток C, Перерозподіл диска для Debian.

Спочатку вам буде надано можливість автоматично розбити на розділи або весь
диск, або доступне вільне місце на диску. Це також називається «кероване»
розбиття на розділи. Якщо ви не бажаєте використовувати автоматичне створення
розділів, виберіть Вручну з меню.

6.3.4.1. Підтримувані параметри розбиття на розділи

Розділювач, який використовується в debian-installer є досить універсальним.
Він дозволяє створювати безліч різних схем розбиття на розділи, використовуючи
різні таблиці розділів, файлові системи та сучасні блокові пристрої.

Які саме варіанти доступні, залежить головним чином від архітектури, а також
від інших факторів. Наприклад, на системах з обмеженою внутрішньою пам'яттю
деякі опції можуть бути недоступні. Значення за замовчуванням також можуть
відрізнятися. Тип таблиці розділів, що використовується за замовчуванням, може,
наприклад, відрізнятися для жорстких дисків великої ємності від жорстких дисків
меншої ємності. Деякі параметри можна змінити лише під час встановлення із
середнім або низьким пріоритетом debconf; при вищих пріоритетах будуть
використовуватися розумні значення за замовчуванням.

Програма встановлення підтримує різні форми розширеного розбиття на розділи та
використання пристроїв зберігання даних, які у багатьох випадках можна
використовувати у комбінації.

  • Керування логічними томами (LVM)

  • Програмний RAID

    Підтримувані рівні RAID 0, 1, 4, 5, 6 і 10.

  • Шифрування

  • Мультишлях (експериментальний)

    Дивіться нашу Вікі для отримання інформації. Підтримка багатоканальності
    наразі доступна, лише якщо її увімкнено під час завантаження програми
    встановлення.

Підтримувані наступні файлові системи.

  • ext2, ext3, ext4

    Типовою файловою системою за замовчуванням у більшості випадків є ext4.

  • jfs (доступний не на всіх архітектурах)

  • xfs (доступний не на всіх архітектурах)

  • reiserfs (необов'язково; доступно не на всіх архітектурах)

    Підтримка файлової системи Reiser більше не доступна за замовчуванням. Якщо
    програму встановлення запущено із середнім або низьким пріоритетом debconf,
    його можна увімкнути, вибравши компонент partman-reiserfs. Підтримується
    лише версія 3 файлової системи.

  • qnx4

    Існуючі розділи будуть розпізнані, і для них можна буде призначити точки
    монтування. Неможливо створити нові розділи qnx4.

  • FAT16, FAT32

  • NTFS (лише читання)

    Існуючі розділи NTFS можна змінювати за розміром і призначати для них точки
    монтування. Неможливо створити нові розділи NTFS.

Розділювач приймає одиниці як десяткової степені (1 МБ = 1000 кБ = 1000000 Б),
так і двійкової степені (1 Мб = 1024 кБ = 1048576 Б). Префікси одиниць
підтримуються до EB/EiB (ексабайт/ексбібайт).

6.3.4.2. Кероване створення розділів

Якщо ви обираєте кероване створення розділів, у вас може бути три варіанти:
створити розділи безпосередньо на жорсткому диску (класичний спосіб), або
створити їх за допомогою Керування логічними томами (LVM), або створити їх за
допомогою зашифрованого LVM^[7].

Примітка

Можливість використання (зашифрованого) LVM може бути доступна не на всіх
архітектурах.

У разі використання LVM або зашифрованого LVM, програма встановлення створить
більшість розділів у межах одного великого розділу; перевагою цього методу є
те, що розділи у цьому великому розділі можна буде відносно легко змінити
згодом. У випадку зашифрованого LVM великий розділ неможливо буде прочитати без
знання спеціальної ключової фрази, що забезпечує додатковий захист ваших
(персональних) даних.

Якщо ви використовуєте зашифрований LVM, програма встановлення також
автоматично видалить диск, записавши на нього випадкові дані. Це додатково
підвищує безпеку (оскільки унеможливлює визначення того, які частини диска
використовуються, а також гарантує, що всі сліди попередніх інсталяцій буде
стерто), але може зайняти деякий час, залежно від розміру вашого диска.

Примітка

Якщо ви вибрали кероване створення розділів за допомогою LVM або зашифрованого
LVM, деякі зміни у таблиці розділів потрібно буде записати на вибраний диск під
час налаштування LVM. Ці зміни фактично видаляють всі дані, які знаходяться на
вибраному жорсткому диску, і ви не зможете скасувати їх пізніше. Однак програма
встановлення попросить вас підтвердити ці зміни, перш ніж їх буде записано на
диск.

Якщо ви виберете кероване розбиття на розділи (класичне або з використанням
(зашифрованого) LVM) для всього диска, вам буде запропоновано вибрати диск,
який ви хочете використати. Перевірте, чи всі ваші диски є в списку, і, якщо у
вас кілька дисків, переконайтеся, що ви вибрали правильний. Порядок, в якому
вони перераховані, може відрізнятися від того, до якого ви звикли. Розмір
дисків може допомогти їх ідентифікувати.

Будь-які дані на обраному вами диску з часом будуть втрачені, але вам завжди
буде запропоновано підтвердити будь-які зміни, перш ніж вони будуть записані на
диск. Якщо ви вибрали класичний метод розбиття на розділи, ви зможете скасувати
будь-які зміни до самого кінця; при використанні (зашифрованого) LVM це
неможливо.

Далі Ви зможете обрати одну зі схем, наведених у таблиці нижче. Всі схеми мають
свої плюси та мінуси, деякі з яких обговорені в Додаток C, Перерозподіл диска
для Debian. Якщо Ви не впевнені, оберіть першу. Майте на увазі, що керований
розподіл потребує певної мінімальної кількості вільного простору для роботи.
Якщо Ви не надасте принаймні 3 ГБ місця (залежить від обраної схеми), керований
розподіл на розділи буде невдалий. Отже, на малих дисках Ви, радше за все, не
побачите усі згадані нижче схеми.

┌────────────────────────────────────────────┬────────────┬───────────────────┐
│         Схема розбиття на розділи          │ Мінімальне │ Створені розділи  │
│                                            │   місце    │                   │
├────────────────────────────────────────────┼────────────┼───────────────────┤
│Всі файли в одному розділі                  │8 ГБ        │/, обмін           │
├────────────────────────────────────────────┼────────────┼───────────────────┤
│Окремий розділ /home                        │9 ГБ        │/, /home, обмін    │
├────────────────────────────────────────────┼────────────┼───────────────────┤
│Окремі розділи /home, /var та /tmp          │12 ГБ       │/, /home, /var, /  │
│                                            │            │tmp, обмін         │
├────────────────────────────────────────────┼────────────┼───────────────────┤
│Окремі розділи /srv та /var; своп обмежений │8 ГБ        │/, /srv, /var, swap│
│1 ГБ (для сервера)                          │            │                   │
├────────────────────────────────────────────┼────────────┼───────────────────┤
│Схема особливо для малих дисків             │3 ГБ        │/, обмін           │
└────────────────────────────────────────────┴────────────┴───────────────────┘

Якщо ви виберете кероване створення розділів за допомогою (зашифрованого) LVM,
програма встановлення також створить окремий розділ /boot. Інші розділи,
зокрема розділ підкачки, буде створено всередині розділу LVM.

Якщо ви завантажилися у режимі EFI, то під час автоматичного створення розділів
буде створено додатковий розділ, відформатований як завантажувальна файлова
система FAT32, для завантажувача EFI. Цей розділ називається системним розділом
EFI (ESP). У меню форматування також є додатковий пункт, за допомогою якого
можна вручну налаштувати розділ як ESP.

Після вибору схеми на наступному екрані буде показано вашу нову таблицю
розділів, включно з інформацією про те, чи будуть відформатовані розділи, як
вони будуть відформатовані і де будуть змонтовані.

Список розділів може виглядати так:

  SCSI1 (0,0,0) (sda) - 6.4 GB WDC AC36400L
        #1 primary   16.4 MB  B f ext2       /boot
        #2 primary  551.0 MB      swap       swap
        #3 primary    5.8 GB      ntfs
           pri/log    8.2 MB      FREE SPACE

  SCSI2 (1,0,0) (sdb) - 80.0 GB ST380021A
        #1 primary   15.9 MB      ext3
        #2 primary  996.0 MB      fat16
        #3 primary    3.9 GB      xfs        /home
        #5 logical    6.0 GB    f ext4       /
        #6 logical    1.0 GB    f ext3       /var
        #7 logical  498.8 MB      ext3

У цьому прикладі показано два жорсткі диски, розділені на кілька розділів; на
першому диску є трохи вільного місця. Кожен рядок розділу складається з номера
розділу, його типу, розміру, необов'язкових прапорів, файлової системи та точки
монтування (якщо є). Примітка: цей конкретний приклад не може бути створений за
допомогою керованого створення розділів, але він показує можливі варіанти, яких
можна досягти за допомогою ручного створення розділів.

На цьому кероване розділення завершується. Якщо вас влаштовує створена таблиця
розділів, ви можете вибрати пункт Завершити розбиття на розділи і записати
зміни на диск з меню, щоб застосувати нову таблицю розділів (як описано
наприкінці цього розділу). Якщо вас щось не влаштовує, ви можете вибрати пункт 
Скасувати зміни до розділів і запустити кероване створення розділів знову, або
змінити запропоновані зміни, як описано нижче для ручного створення розділів.

6.3.4.3. Ручне розбиття на розділи

Якщо ви виберете ручне створення розділів, буде показано екран, подібний до
наведеного вище, за винятком того, що буде показано наявну таблицю розділів,
але без точок монтування. Про те, як вручну налаштувати таблицю розділів та
використання розділів вашою новою системою, буде описано у наступних частинах
цього розділу.

Якщо ви виберете чистий диск, на якому немає ні розділів, ні вільного місця,
вам буде запропоновано створити нову таблицю розділів (це потрібно для того,
щоб ви могли створювати нові розділи). Після цього, у таблиці під вибраним
диском має з'явитися новий рядок під назвою «FREE SPACE».

Якщо ви виділите трохи вільного місця, у вас буде можливість створити новий
розділ. Вам потрібно буде відповісти на кілька запитань про його розмір, тип
(первинний чи логічний) та розташування (початок чи кінець вільного простору).
Після цього, вам буде представлено детальний огляд вашого нового розділу.
Основним параметром є Використовувати як:, який визначає, чи буде на розділі
встановлено файлову систему, чи його буде використано для підкачки, програмний
RAID, LVM, зашифровану файлову систему, чи не буде використано взагалі. Інші
параметри включають точку монтування, параметри монтування і прапорець
завантажуваного розділу; які саме параметри буде показано, залежить від того,
як буде використано розділ. Якщо вам не подобаються попередньо вибрані
налаштування за замовчуванням, не соромтеся змінити їх на свій смак. Наприклад,
вибравши пункт Використовувати як:, ви можете вибрати іншу файлову систему для
цього розділу, зокрема використати розділ для підкачки, програмного RAID, LVM,
або не використовувати його взагалі. Коли ви будете задоволені новим розділом,
виберіть пункт Завершення створення розділу і ви повернетеся до головного
екрана partman.

Якщо ви вирішите змінити щось у розділі, просто виберіть розділ, після чого
з'явиться меню конфігурації розділу. Це той самий екран, що й під час створення
нового розділу, тому ви можете змінити ті самі параметри. Одна річ, яка може
бути не дуже очевидною на перший погляд, полягає в тому, що ви можете змінити
розмір розділу, вибравши елемент, що відображає розмір розділу. Відомо, що
працюють такі файлові системи: щонайменше fat16, fat32, ext2, ext3 та swap. Це
меню також дозволяє видалити розділ.

Обов'язково створіть принаймні два розділи: один для файлової системи root
(який має бути змонтовано як /) і один для swap. Якщо ви забули змонтувати
кореневу файлову систему, partman не дозволить вам продовжити роботу, доки ви
не виправите цю помилку.

Якщо ви завантажитеся у режимі EFI, але забудете вибрати і відформатувати
системний розділ EFI, partman виявить це і не дозволить вам продовжити роботу,
доки ви не виділите його.

Можливості partman можна розширити за допомогою модулів інсталятора, але це
залежить від архітектури вашої системи. Тож, якщо ви не бачите всіх обіцяних
можливостей, перевірте, чи ви завантажили всі необхідні модулі (наприклад,
partman-ext3, partman-xfs, або partman-lvm).

Після того, як ви закінчите розбиття на розділи, виберіть Закінчити розбиття на
розділи і записати зміни на диск у меню розбиття на розділи. Вам буде показано
підсумок змін, зроблених на дисках, і запропоновано підтвердити, що файлові
системи слід створити відповідно до запиту.

6.3.4.4. Налаштування багатодискових пристроїв (програмний RAID)

Якщо у вас більше одного жорсткого диска^[8] у вашому комп'ютері, ви можете
скористатися partman-md для налаштування дисків для підвищення продуктивності
та/або надійності ваших даних. Результат називається Мультидисковий пристрій
(або за його найвідомішим варіантом програмний RAID).

MD - це, по суті, набір розділів, розташованих на різних дисках і об'єднаних
разом, щоб сформувати логічний пристрій. Потім цей пристрій можна
використовувати як звичайний розділ (тобто у partman ви можете відформатувати
його, призначити точку монтування тощо).

Які переваги це дає, залежить від типу MD-пристрою, який Ви створюєте. Зараз
підтримуються:

RAID0

    Переважно спрямований на продуктивність. RAID0 розбиває усі вхідні дані на
    смуги і розподіляє їх порівну на кожен диск у масиві. Це може збільшити
    швидкість операцій читання/запису, але якщо один з дисків вийде з ладу, Ви
    втратите все (частина інформації залишиться на цілому(их) диску(ах), а інша
    частина була на несправному диску).

    Типовим використанням RAID0 є розділ для редагування відео.

RAID1

    Підходить для систем, де надійність на першому місці. Він складається з
    декількох (зазвичай двох) розділів однакового розміру, кожен з яких містить
    абсолютно однакові дані. По суті, це означає три речі. По-перше, якщо один
    з Ваших дисків вийде з ладу, у Вас все одно буде дзеркальна копія даних на
    інших дисках. По-друге, Ви можете використовувати лише частину доступної
    місткості (точніше, розмір найменшого розділу в RAID-масиві). По-третє,
    читання файлів розподіляє навантаження між дисками, що може підвищити
    продуктивність, наприклад, для файлового сервера, який, як правило,
    завантажений більше зчитуванням з диска, ніж записом.

    За бажанням Ви можете мати в масиві запасний диск, яким можна замінити
    збійний.

RAID5

    Це гарний компроміс між швидкістю, надійністю та надлишковістю даних. RAID5
    розбиває всі вхідні дані на смуги та розподіляє їх порівну на всі диски,
    крім одного (подібно до RAID0). На відміну від RAID0, RAID5 також обчислює
    парність даних, які записуються на останній диск. Диск парності не є
    статичним (це можна було б назвати RAID4), а періодично змінюється, тому
    інформація про парність розподіляється рівномірно на усіх дисках. Коли один
    з дисків виходить з ладу, відсутню частину інформації можна обчислити на
    основі даних, що залишилися, та їх парності. RAID5 повинен складатися
    щонайменше з трьох активних розділів. За бажанням можна мати в масиві
    запасний диск, який замінить збійний.

    Як видно, RAID5 має такий самий ступінь надійності, як і RAID1, але при
    цьому досягає меншого надлишку. З іншого боку, він може бути трохи
    повільнішим при операціях запису за RAID0, через обчислення інформації про
    парність.

RAID6

    Схожий на RAID5, за винятком того, що використовує два пристрої парності
    замість одного.

    Масив RAID6 може витримати до відмови двох дисків.

RAID10

    RAID10 поєднує в собі чергування (як у RAID0) та дзеркальний запис (як у
    RAID1). Він створює n копій вхідних даних та розподіляє їх між розділами
    таким чином, щоб жодна з копій тих самих даних не знаходилася на одному
    пристрої. Стандартне значення n дорівнює 2, але його можна змінити в
    експертному режимі. Кількість використовуваних розділів має бути не менше n
    . RAID10 має різні схеми розподілу копій. Стандартно це ближні копії. Вони
    мають приблизно однаковий зсув на усіх дисках. Дальні копії містять копії з
    різним зсувом. Копії зсуву копіюють смугу, а не окремі копії.

    RAID10 можна використовувати для досягнення надійності та надлишковості без
    необхідності обчислювати парність.

Підбиваючи підсумки:

┌──────┬─────────┬────────┬────────────┬──────────────────────────────────────┐
│      │ Мінімум │Запасний│Чи витримує │                                      │
│ Тип  │пристроїв│пристрій│  відмову   │          Доступний простір           │
│      │         │        │   диска?   │                                      │
├──────┼─────────┼────────┼────────────┼──────────────────────────────────────┤
│RAID0 │2        │ні      │ні          │Розмір найменшого розділу помножений  │
│      │         │        │            │на кількість пристроїв у RAID         │
├──────┼─────────┼────────┼────────────┼──────────────────────────────────────┤
│RAID1 │2        │за      │так         │Розмір найменшого розділу в RAID      │
│      │         │бажанням│            │                                      │
├──────┼─────────┼────────┼────────────┼──────────────────────────────────────┤
│      │         │за      │            │Розмір найменшого розділу помножений  │
│RAID5 │3        │бажанням│так         │на (кількість пристроїв у RAID мінус  │
│      │         │        │            │один)                                 │
├──────┼─────────┼────────┼────────────┼──────────────────────────────────────┤
│      │         │за      │            │Розмір найменшого розділу помножений  │
│RAID6 │4        │бажанням│так         │на (кількість пристроїв у RAID мінус  │
│      │         │        │            │два)                                  │
├──────┼─────────┼────────┼────────────┼──────────────────────────────────────┤
│      │         │за      │            │Сума всіх розділів, поділена на       │
│RAID10│2        │бажанням│так         │кількість копій chunk (за             │
│      │         │        │            │замовчуванням - дві)                  │
└──────┴─────────┴────────┴────────────┴──────────────────────────────────────┘

Якщо ви хочете дізнатися більше про програмний RAID, перегляньте Програмний
RAID HOWTO.

Для створення MD-пристрою потрібно, щоб потрібні розділи, з яких він має
складатися, були позначені для використання в RAID. (Це робиться за допомогою 
partman у меню Параметри розділу, де слід вибрати Використовувати як: → 
фізичний том для RAID.)

Примітка

Переконайтеся, що систему можна завантажити зі схемою розбиття на розділи, яку
ви плануєте. Загалом при використанні RAID для кореневої файлової системи (/
boot) потрібно створити окрему файлову систему для /boot. Більшість
завантажувачів (зокрема grub) підтримують дзеркальний (не смугастий!) RAID1,
тому використання, наприклад, RAID5 для / і RAID1 для /boot може бути
варіантом.

Далі слід вибрати Налаштувати програмний RAID з головного меню partman. (Меню
з'явиться лише після того, як ви позначите принаймні один розділ для
використання як фізичний том для RAID.) На першому екрані partman-md просто
виберіть Створити пристрій MD. На екрані з'явиться список підтримуваних типів
MD-пристроїв, з якого ви повинні вибрати один (наприклад, RAID1). Те, що буде
далі, залежить від обраного вами типу MD.

  • RAID0 простий -- вам буде видано список доступних розділів RAID, і ваше
    завдання - вибрати розділи, з яких буде сформовано MD.

  • RAID1 трохи складніший. Спочатку, вам буде запропоновано ввести кількість
    активних пристроїв та кількість резервних пристроїв, які будуть формувати
    MD. Далі потрібно вибрати зі списку доступних розділів RAID ті, які будуть
    активними, а потім ті, які будуть резервними. Кількість вибраних розділів
    має дорівнювати кількості, вказаній раніше. Не турбуйтеся. Якщо ви
    помилитеся і виберете іншу кількість розділів, debian-installer не
    дозволить вам продовжити, поки ви не виправите помилку.

  • Процедура налаштування RAID5 схожа на процедуру налаштування RAID1, за
    винятком того, що вам потрібно використовувати принаймні три активних
    розділи.

  • Процедура налаштування RAID6 також схожа на процедуру налаштування RAID1,
    за винятком того, що потрібно щонайменше чотири активних розділи.

  • Процедура налаштування RAID10 знову ж таки схожа на процедуру налаштування
    RAID1, за винятком експертного режиму. В експертному режимі
    debian-installer запитає вас про макет. Макет складається з двох частин.
    Перша частина - це тип макета. Це або n (для ближніх копій), або f (для
    дальніх копій), або o (для зміщених копій). Друга частина - це кількість
    копій, які потрібно зробити з даних. Активних пристроїв має бути принаймні
    стільки, щоб усі копії можна було розподілити на різні диски.

Цілком можливо мати кілька типів MD одночасно. Наприклад, якщо у вас є три
жорсткі диски по 200 ГБ, призначені для MD, кожен з яких містить два розділи по
100 ГБ, ви можете об'єднати перші розділи на всіх трьох дисках у RAID0 (швидкий
розділ 300 ГБ для редагування відео), а інші три розділи (2 активних і 1
запасний) використати для RAID1 (досить надійний розділ 100 ГБ для /home).

Після того, як ви налаштували MD-пристрої на свій смак, ви можете Завершити 
partman-md повернутися до partman, щоб створити файлові системи на ваших нових
MD-пристроях і призначити їм звичайні атрибути, наприклад, точки монтування.

6.3.4.5. Налаштування диспетчера логічних томів (LVM)

Якщо ви працюєте з комп'ютером на рівні системного адміністратора або «
просунутого» користувача, вам напевно доводилося стикатися з ситуацією, коли на
якомусь розділі диска (зазвичай найважливішому) не вистачало місця, в той час
як інший розділ використовувався вкрай недостатньо, і вам доводилося вирішувати
цю проблему, переміщуючи дані, об'єднуючи їх у симлінк тощо.

Щоб уникнути описаної ситуації, ви можете скористатися диспетчером логічних
томів (LVM). Простіше кажучи, у LVM ви можете об'єднати ваші розділи (фізичні
томи у термінології LVM) у віртуальний диск (так звану групу томів), який потім
можна розбити на віртуальні розділи (логічні томи). Річ у тім, що логічні томи
(і, звичайно, групи томів, що лежать в їх основі) можуть розташовуватися на
кількох фізичних дисках.

Тепер, коли ви зрозумієте, що вам потрібно більше місця для вашого старого
160-гігабайтного розділу /home, ви можете просто додати до комп'ютера новий
300-гігабайтний диск, приєднати його до існуючої групи томів, а потім змінити
розмір логічного тому, який містить вашу файлову систему /home, і вуаля - у
ваших користувачів знову з'явилося місце на оновленому 460-гігабайтному
розділі. Цей приклад, звичайно, дещо спрощений. Якщо ви ще не читали його, вам
варто ознайомитися з LVM HOWTO.

Налаштування LVM у debian-installer досить просте і повністю підтримується у 
partman. По-перше, вам слід позначити розділ(и), які буде використано як
фізичні томи для LVM. Це робиться у меню Налаштування розділу, де слід вибрати 
Використовувати як: → фізичний том для LVM.

Застереження

Зверніть увагу: нове налаштування LVM знищить усі дані на всіх розділах,
позначених кодом типу LVM. Отже, якщо ви вже маєте LVM на якомусь з ваших
дисків, і хочете встановити Debian додатково на цю машину, старий (вже
існуючий) LVM буде знищено! Те саме стосується розділів, які (з якихось причин)
помилково позначено кодом типу LVM, але які містять щось інше (наприклад,
зашифрований том). Ви повинні видалити такі диски з системи, перш ніж
виконувати нове налаштування LVM!

Коли ви повернетеся до головного екрана partman, ви побачите новий пункт 
Настроїти диспетчер логічних томів. Коли ви виберете цей пункт, вам буде
запропоновано підтвердити очікувані зміни у таблиці розділів (якщо такі є),
після чого буде показано меню конфігурації LVM. Над меню показано коротку
інформацію про конфігурацію LVM. Саме меню є контекстно-залежним і показує лише
допустимі дії. Можливі дії такі:

  • Відобразити деталі конфігурації: показує структуру LVM-пристроїв, назви та
    розміри логічних томів тощо

  • Створити групу томів

  • Створити логічний том

  • Видалити групу томів

  • Видалити логічний том

  • Розширити групу томів

  • Зменшити групу томів

  • Завершити: повернутися до головного екрана partman

За допомогою пунктів цього меню спочатку створіть групу томів, а потім створіть
логічні томи всередині неї.

Після повернення до головного екрана partman, будь-які створені логічні томи
буде показано так само, як і звичайні розділи (і ви повинні поводитися з ними
саме так).

6.3.4.6. Налаштування зашифрованих томів

debian-installer дозволяє створювати зашифровані розділи. Кожен файл, який ви
записуєте в такий розділ, негайно зберігається на пристрої в зашифрованому
вигляді. Доступ до зашифрованих даних надається лише після введення ключової
фрази , яку було використано під час створення зашифрованого розділу. Ця
функція корисна для захисту конфіденційних даних на випадок крадіжки ноутбука
або жорсткого диска. Злодій може отримати фізичний доступ до жорсткого диска,
але без знання правильної парольної фрази дані на ньому будуть виглядати як
випадкові символи.

Два найважливіші розділи для шифрування: домашній розділ, де зберігаються ваші
особисті дані, і розділ підкачки, де можуть тимчасово зберігатися конфіденційні
дані під час роботи. Звичайно, ніщо не заважає вам зашифрувати будь-які інші
розділи, які можуть представляти інтерес. Наприклад, /var, де сервери баз
даних, поштові сервери або сервери друку зберігають свої дані, або /tmp, який
використовується різними програмами для зберігання потенційно цікавих
тимчасових файлів. Деякі люди можуть навіть захотіти зашифрувати всю свою
систему. Загалом, єдиним винятком є розділ /boot, який має залишатися
незашифрованим, оскільки історично не існувало способу завантажити ядро із
зашифрованого розділу. (GRUB тепер може це робити, але наразі йому бракує
вбудованої підтримки зашифрованого /boot. Тому налаштування описано в окремому
документі.)

Примітка

Зверніть увагу, що продуктивність зашифрованих розділів буде нижчою, ніж
незашифрованих, оскільки дані потрібно розшифровувати або шифрувати при кожному
читанні або записі. Вплив на продуктивність залежить від швидкості вашого
процесора, обраного шифру та довжини ключа.

Щоб використовувати шифрування, вам потрібно створити новий розділ, виділивши
трохи вільного місця у головному меню розбиття на розділи. Інший варіант -
вибрати наявний розділ (наприклад, звичайний розділ, логічний том LVM або том
RAID). У меню Налаштування розділу потрібно вибрати фізичний том для шифрування
у пункті Використовувати як:. Після цього меню зміниться і міститиме кілька
варіантів криптографічного захисту розділу.

Методом шифрування, який підтримує debian-installer, є dm-crypt (включений у
новіші ядра Linux, здатні розміщувати фізичні томи LVM).

Давайте подивимося на опції, доступні при виборі шифрування за допомогою
Device-mapper (dm-crypt). Як завжди: якщо ви сумніваєтеся, використовуйте
значення за замовчуванням, оскільки вони були ретельно підібрані з урахуванням
вимог безпеки.

Шифрування: aes

    За допомогою цього пункту ви можете вибрати алгоритм шифрування (шифр),
    який буде використано для шифрування даних на розділі. debian-installer
    наразі підтримує наступні блокові шифри: aes, blowfish, serpent, та twofish
    . Обговорення якостей цих різних алгоритмів виходить за рамки цього
    документа, однак, можливо, вам буде корисно знати, що в 2000 році AES був
    обраний Американським національним інститутом стандартів і технологій як
    стандартний алгоритм шифрування для захисту конфіденційної інформації в 21
    столітті.

Розмір ключа: 256

    Тут ви можете вказати довжину ключа шифрування. З більшим розміром ключа,
    як правило, підвищується стійкість шифрування. З іншого боку, збільшення
    довжини ключа зазвичай негативно впливає на продуктивність. Доступні
    розміри ключів залежать від шифру.

IV алгоритм: xts-plain64

    Алгоритм Initialization Vector або IV використовується в криптографії для
    того, щоб гарантувати, що застосування шифру до тих самих чистих даних з
    тим самим ключем завжди призводить до отримання унікального шифрованого
    тексту. Ідея полягає в тому, щоб не дати зловмиснику витягти інформацію з
    повторюваних шаблонів у зашифрованих даних.

    Із запропонованих альтернатив, стандартний xts-plain64 наразі є найменш
    вразливим до відомих атак. Використовуйте інші альтернативи лише тоді, коли
    вам потрібно забезпечити сумісність з якоюсь раніше встановленою системою,
    яка не може використовувати новіші алгоритми.

Ключ шифрування: Парольна фраза

    Тут ви можете вибрати тип ключа шифрування для цього розділу.

    Парольна фраза

        Ключ шифрування буде обчислено^[9] на основі ключової фрази, яку ви
        зможете ввести пізніше.

    Випадковий ключ

        Новий ключ шифрування буде згенеровано з випадкових даних щоразу, коли
        ви спробуєте відкрити зашифрований розділ. Іншими словами: при кожному
        вимкненні вміст розділу буде втрачено, оскільки ключ буде видалено з
        пам'яті. (Звичайно, можна спробувати вгадати ключ за допомогою атаки
        грубої сили, але якщо в алгоритмі шифру немає невідомої слабкості, то
        за нашого життя це недосяжно.)

        Випадкові ключі корисні для розділів підкачки, оскільки вам не потрібно
        обтяжувати себе запам'ятовуванням парольної фрази або стиранням
        конфіденційної інформації з розділу підкачки перед вимкненням
        комп'ютера. Однак, це також означає, що ви не зможете скористатися
        функцією «призупинення на диск», яку пропонують новіші ядра Linux,
        оскільки відновити призупинені дані, записані на розділ підкачки, буде
        неможливо (під час наступного завантаження).

Стерти дані: так

    Визначає, чи потрібно перезаписувати вміст цього розділу випадковими даними
    перед налаштуванням шифрування. Це рекомендується, оскільки в іншому
    випадку зловмисник може визначити, які частини розділу використовуються, а
    які ні. Крім того, це ускладнить відновлення залишків даних з попередніх
    інсталяцій^[10].

Після того, як ви вибрали потрібні параметри для ваших зашифрованих розділів,
поверніться до головного меню розбиття на розділи. Тепер має з'явитися новий
пункт меню з назвою Налаштування зашифрованих томів. Після вибору вам буде
запропоновано підтвердити видалення даних на розділах, позначених як такі, що
підлягають видаленню, і, можливо, інші дії, такі як запис нової таблиці
розділів. Для великих розділів це може зайняти деякий час.

Далі вам буде запропоновано ввести парольну фразу для розділів, налаштованих на
її використання. Хороші паролі повинні бути довшими за 8 символів, складатися з
букв, цифр та інших символів і не містити загальновживаних слів зі словника або
інформації, яка легко асоціюється з вами (наприклад, дати народження, хобі,
клички домашніх тварин, імена членів сім'ї або родичів і т.д.).

Застереження

Перш ніж вводити будь-які паролі, ви повинні переконатися, що ваша клавіатура
налаштована правильно і генерує очікувані символи. Якщо ви не впевнені, ви
можете переключитися на другу віртуальну консоль і ввести текст у відповідь на
запит. Це гарантує, що згодом ви не будете здивовані, наприклад, спробою ввести
парольну фразу за допомогою qwerty-розкладки клавіатури, коли під час
інсталяції ви використовували розкладку azerty. Така ситуація може мати кілька
причин. Можливо, ви переключилися на іншу розкладку клавіатури під час
інсталяції, або вибрану розкладку клавіатури ще не було налаштовано під час
введення ключової фрази для кореневої файлової системи.

Якщо ви вибрали для створення ключів шифрування інші методи, окрім ключової
фрази, їх буде згенеровано зараз. Оскільки ядро могло не зібрати достатньої
кількості ентропії на цій ранній стадії встановлення, процес може зайняти
багато часу. Ви можете допомогти прискорити процес, генеруючи ентропію:
наприклад, натискаючи випадкові клавіші, або переключившись у командну оболонку
на другій віртуальній консолі і генеруючи деякий мережевий і дисковий трафік
(завантажуючи деякі файли, завантажуючи великі файли у /dev/null і т.д.). Це
буде повторено для кожного розділу, який потрібно зашифрувати.

Після повернення до головного меню розбиття на розділи, ви побачите всі
зашифровані томи як додаткові розділи, які можна налаштувати так само, як і
звичайні розділи. У наступному прикладі показано том, зашифрований за допомогою
dm-crypt.

Зашифрований том (sda2_crypt) - 115.1 ГБ Linux device-mapper
     #1 115.1 GB  F ext3

Настав час призначити точки монтування томам і за бажанням змінити типи
файлових систем, якщо значення за замовчуванням вас не влаштовують.

Зверніть увагу на ідентифікатори у круглих дужках (у цьому випадку sda2_crypt)
і точки монтування, які ви призначили для кожного зашифрованого тому. Ця
інформація знадобиться вам пізніше під час завантаження нової системи.
Відмінності між звичайним процесом завантаження і процесом завантаження з
шифруванням будуть розглянуті пізніше в Розділ 7.2, «Монтування зашифрованих
томів».

Після того, як ви задоволені схемою розбиття на розділи, продовжуйте
інсталяцію.

6.3.5. Встановлення базової системи

Хоча цей етап є найменш проблемним, він займає значну частину інсталяції,
оскільки завантажує, перевіряє і розпаковує всю базову систему. Якщо у вас
повільний комп'ютер або мережеве з'єднання, це може зайняти деякий час.

Під час встановлення базової системи, повідомлення про розпакування пакунків та
встановлення перенаправляються на tty4. Ви можете отримати доступ до цього
терміналу, натиснувши Left Alt+F4; поверніться до основного процесу
встановлення за допомогою Left Alt+F1.

Повідомлення про розпакування/встановлення, створені під час цієї фази, також
зберігаються у /var/log/syslog. Ви можете перевірити їх там, якщо інсталяція
виконується через послідовну консоль.

Під час інсталяції буде встановлено ядро Linux. За замовчуванням, програма
встановлення вибере для вас той пріоритет, який найкраще відповідає вашому
обладнанню. У режимах з нижчим пріоритетом, ви зможете вибирати зі списку
доступних ядер.

Якщо пакунки встановлено за допомогою системи керування пакунками, за
замовчуванням також буде встановлено пакунки, рекомендовані цими пакунками.
Рекомендовані пакунки не є обов'язковими для основної функціональності
вибраного програмного забезпечення, але вони покращують це програмне
забезпечення і, на думку розробників пакунків, мають бути встановлені разом з
цим програмним забезпеченням.

Примітка

З технічних причин пакунки, встановлені під час інсталяції базової системи,
встановлюються без їхніх «рекомендацій». Правило, описане вище, набуває
чинності лише після цього моменту в процесі встановлення.

6.3.6. Встановлення додаткового програмного забезпечення

На цьому етапі у вас є придатна для використання, але обмежена система.
Більшість користувачів захочуть встановити додаткове програмне забезпечення на
систему, щоб налаштувати її під свої потреби, та інсталятор дозволяє це
зробити. Цей крок може зайняти навіть більше часу, ніж встановлення базової
системи, якщо у вас повільний комп'ютер або мережеве з'єднання.

6.3.6.1. Налаштування apt

Одним з інструментів для встановлення пакунків у системі Debian GNU/Linux є
програма apt, з пакунка apt ^[11]. Також використовуються інші інтерфейси для
керування пакунками, такі як aptitude та synaptic. Ці інтерфейси рекомендується
використовувати новим користувачам, оскільки вони інтегрують деякі додаткові
функції (пошук пакунків і перевірку статусу) у приємний користувацький
інтерфейс.

apt має бути налаштовано так, щоб він знав, звідки отримувати пакунки.
Результати цієї конфігурації записуються у файл /etc/apt/sources.list. Ви
можете переглянути і відредагувати цей файл на свій розсуд після завершення
інсталяції.

Якщо ви встановлюєте систему з пріоритетом за замовчуванням, програма
встановлення значною мірою подбає про конфігурацію автоматично, базуючись на
методі встановлення, який ви використовуєте, і, можливо, використовуючи вибір,
зроблений раніше під час інсталяції. У більшості випадків програма встановлення
автоматично додасть дзеркало безпеки і, якщо ви встановлюєте стабільний
дистрибутив, дзеркало для служби «stable-updates».

Якщо ви встановлюєте з нижчим пріоритетом (наприклад, в експертному режимі), ви
зможете приймати більше рішень самостійно. Ви можете вибрати, чи
використовувати служби безпеки та/або стабільних оновлень, а також додати
пакунки з розділів «contrib», «non-free» та «non-free-firmware» архіву.

6.3.6.1.1. Встановлення з кількох образів DVD

Якщо ви встановлюєте з образу DVD, який є частиною більшого набору, програма
встановлення запитає, чи потрібно відсканувати додаткові носії. Якщо у вас є
такі додаткові носії, ви, ймовірно, захочете зробити це, щоб програма
встановлення могла використовувати пакунки, що містяться на них.

Якщо у вас немає додаткових носіїв, це не проблема: їх використання не є
обов'язковим. Якщо ви також не використовуєте мережеве дзеркало (як описано у
наступному розділі), це може означати, що не всі пакунки, які належать до
завдань, вибраних на наступному кроці встановлення, буде встановлено.

Примітка

Пакунки включено до DVD-образів у порядку їхньої популярності. Це означає, що
для більшості застосувань потрібен лише перший образ набору, і що дуже мало
людей насправді використовують будь-які пакунки, що містяться на останніх
образах набору.

Це також означає, що купувати або завантажувати і записувати повний набір DVD -
марна трата грошей, оскільки ви ніколи не будете користуватися більшістю з них.
У більшості випадків краще придбати лише перші 1-2 DVD-диски, а всі додаткові
пакунки, які вам можуть знадобитися, встановити з Інтернету за допомогою
дзеркала.

Якщо ви проскануєте декілька носіїв, програма встановлення запропонує вам
обміняти їх, коли їй знадобляться пакунки з одного з них, якого наразі немає у
накопичувачі. Зауважте, що сканувати слід лише диски, які належать до одного
набору. Порядок, в якому вони скануються, не має особливого значення, але
сканування в порядку зростання зменшить ймовірність помилок.

6.3.6.1.2. Використання мережевого дзеркала

Одне з питань, яке виникатиме під час більшості інсталяцій, - чи варто
використовувати мережеве дзеркало як джерело пакунків. У більшості випадків
відповідь за замовчуванням має бути прийнятною, але є деякі винятки.

Якщо ви не встановлюєте з образу DVD, вам слід скористатися мережевим
дзеркалом, оскільки інакше ви отримаєте лише мінімальну систему. Однак, якщо у
вас обмежене з'єднання з Інтернетом, краще не вибирати завдання на робочому
столі на наступному кроці інсталяції.

Якщо ви встановлюєте з DVD, усі пакунки, необхідні для встановлення, мають бути
присутніми на першому образі DVD. Використання мережевого дзеркала не є
обов'язковим.

Однією з переваг додавання мережевого дзеркала є те, що оновлення, які вийшли з
моменту створення образів DVD і були включені в точковий реліз, стануть
доступними для встановлення, таким чином продовжуючи термін служби вашого
набору DVD без шкоди для безпеки або стабільності встановленої системи.

Підсумовуючи: вибір мережевого дзеркала, як правило, є гарною ідеєю, за
винятком випадків, коли у вас поганий інтернет-зв'язок. Якщо поточна версія
пакунка доступна на носії, програма встановлення завжди використовуватиме її.
Таким чином, обсяг даних, які будуть завантажені, якщо ви виберете дзеркало,
залежить від

 1. завдання, які ви виберете на наступному кроці інсталяції,

 2. які пакети потрібні для цих завдань,

 3. які з цих пакунків присутні на відсканованому вами інсталяційному носії, та

 4. чи доступні оновлені версії пакунків, що містяться на інсталяційному носії,
    на дзеркалі (звичайному дзеркалі пакунків, дзеркалі безпеки або стабільних
    оновлень).

Зауважте, що останній пункт означає, що навіть якщо ви вирішите не
використовувати мережеве дзеркало, деякі пакунки все одно можуть бути
завантажені з Інтернету, якщо для них доступні оновлення безпеки або стабільних
оновлень, і ці служби налаштовані.

6.3.6.1.3. Вибір мережевого дзеркала

Якщо ви не вирішили не використовувати мережеве дзеркало, вам буде представлено
список мережевих дзеркал на основі обраної вами країни на початку процесу
встановлення. Вибір запропонованого значення за замовчуванням, як правило, є
нормальним.

За замовчуванням пропонується deb.debian.org, який не є дзеркалом, але буде
перенаправляти на дзеркало, яке має бути актуальним і швидким. Ці дзеркала
підтримують TLS (протокол https) і IPv6. Ця служба підтримується командою
системного адміністрування Debian (DSA).

Дзеркало також можна вказати вручну, вибравши «ввести інформацію вручну» .
Потім ви можете вказати ім'я дзеркального хоста і необов'язковий номер порту.
Насправді це має бути база URL-адрес, тобто, вказуючи IPv6-адресу, потрібно
взяти її у квадратні дужки, наприклад, «[2001:db8::1]».

Якщо ваш комп'ютер перебуває в мережі з підтримкою лише IPv6 (що, ймовірно, не
стосується переважної більшості користувачів), використання дзеркала за
замовчуванням для вашої країни може не спрацювати. Всі дзеркала в списку
доступні через IPv4, але тільки деякі з них можна використовувати через IPv6.
Оскільки підключення окремих дзеркал може змінюватися з часом, ця інформація
недоступна в інсталяторі. Якщо для дзеркала за замовчуванням для вашої країни
немає IPv6-з'єднання, ви можете спробувати інші запропоновані вам дзеркала або
вибрати опцію «ввести інформацію вручну». Потім ви можете вказати «
ftp.ipv6.debian.org» як назву дзеркала, яка є псевдонімом для дзеркала,
доступного через IPv6, хоча вона, ймовірно, не буде найшвидшою з можливих.

6.3.6.2. Вибір та встановлення програмного забезпечення

Під час інсталяції вам буде надана можливість вибрати додаткове програмне
забезпечення для встановлення. Замість того, щоб вибирати окремі пакунки
програмного забезпечення з 102687 доступних пакунків, цей етап процесу
встановлення зосереджується на виборі та встановленні попередньо визначених
наборів програмного забезпечення для швидкого налаштування комп'ютера для
виконання різних завдань.

Ці завдання у загальному вигляді представляють низку різних завдань або речей,
які ви хочете виконати на вашому комп'ютері, наприклад, «середовище робочого
столу», «веб сервер» або «SSH-сервер»^[12]. Розділ D.2, «Дисковий простір,
необхідний для завдань» перераховує вимоги до простору для доступних завдань.

Деякі завдання можуть бути попередньо вибрані на основі характеристик
комп'ютера, який ви встановлюєте. Якщо ви не згодні з цим вибором, ви можете
скасувати його. Ви навіть можете не встановлювати жодних завдань на цьому
етапі.

Підказка

У стандартному інтерфейсі користувача програми встановлення ви можете
використовувати клавішу пробіл для перемикання вибору завдання.

Примітка

Завдання «Середовище робочого столу» встановить графічне середовище робочого
столу.

За замовчуванням, debian-installer встановлює середовище робочого столу Gnome .
Під час інсталяції можна інтерактивно вибрати інше оточення робочого столу.
Також можна встановити кілька робочих столів, але деякі комбінації робочих
столів можуть бути не сумісними для спільного встановлення.

Зауважте, що це спрацює лише у тому випадку, якщо пакунки, необхідні для
бажаного середовища робочого столу, дійсно доступні. Встановлення будь-якого з
доступних стільничних середовищ у такий спосіб має спрацювати, якщо ви
використовуєте образ DVD або будь-який інший спосіб встановлення за допомогою
мережевого дзеркала.

Різні завдання на сервері встановлюють програмне забезпечення приблизно
наступним чином. Веб сервер: apache2; SSH сервер: openssh.

Завдання «Стандартні системні утиліти» встановить будь-який пакунок, який має
пріоритет «стандартний». Сюди входить багато поширених утиліт, які зазвичай
доступні в будь-якій системі Linux або Unix. Вам слід залишити це завдання
вибраним, якщо ви не знаєте, що ви робите, і не хочете отримати дійсно
мінімальну систему.

Якщо під час вибору мови було обрано локаль за замовчуванням, відмінну від
локалі «C», tasksel перевірить, чи визначено завдання локалізації для цієї
локалі, і автоматично спробує встановити відповідні пакунки з локалізацією.
Сюди входять, наприклад, пакунки зі списками слів або спеціальними шрифтами для
вашої мови. Якщо вибрано середовище робочого столу, буде також інстальовано
відповідні пакунки локалізації для нього (якщо вони доступні).

Примітка

Починаючи з Debian Trixie, debian-installer дозволяє безпосередньо
встановлювати Debian Pure Blends. У нижній частині списку завдань є запис «
Виберіть суміш Debian для встановлення», яка дає змогу відобразити додаткове
діалогове вікно вибору після завершення tasksel.

У цьому діалоговому вікні (blendsel) ви можете вибрати, яку суміш встановити,
подібно до цього вибору завдань.

Перегляньте веб-сайт Debian, щоб дізнатися більше про Debian Pure Blends.

Після того, як ви вибрали завдання, натисніть Continue. У цей момент apt
встановить пакунки, які є частиною вибраних завдань. Якщо певна програма
потребує додаткової інформації від користувача, вона запитає вас про це під час
цього процесу.

Ви повинні знати, що особливо завдання Робочого столу є дуже великими. Особливо
під час встановлення з образу компакт-диска netinst у поєднанні з дзеркалом для
пакунків, яких немає на netinst, програмі встановлення може знадобитися
отримати багато пакунків через мережу. Якщо у вас відносно повільне
інтернет-з'єднання, це може зайняти багато часу. Немає можливості скасувати
встановлення пакунків після того, як його розпочато.

Навіть якщо пакунки включено до образу, програма встановлення може отримати їх
із дзеркала, якщо версія, доступна на дзеркалі, є новішою за ту, що включено до
образу. Якщо ви встановлюєте стабільний дистрибутив, це може статися після
точкового випуску (оновлення початкового стабільного випуску); якщо ви
встановлюєте тестовий дистрибутив, це станеться, якщо ви використовуєте
старіший образ.

6.3.7. Як зробити систему завантажувальною

Якщо ви встановлюєте бездискову робочу станцію, очевидно, що завантаження з
локального диска не має сенсу, і цей крок буде пропущено.

6.3.7.1. Виявлення інших операційних систем

Перед встановленням завантажувача програма встановлення спробує знайти інші
операційні системи, встановлені на комп'ютері. Якщо він знайде підтримувану
операційну систему, вам буде повідомлено про це під час встановлення
завантажувача, і комп'ютер буде налаштовано на завантаження цієї іншої
операційної системи на додаток до Debian.

Зауважте, що завантаження декількох операційних систем на одному комп'ютері все
ще залишається чимось на кшталт чорного мистецтва. Автоматична підтримка
виявлення та налаштування завантажувачів для завантаження інших операційних
систем залежить від архітектури і навіть від підархітектури. Якщо це не
спрацює, зверніться до документації до вашого менеджера завантаження для
отримання додаткової інформації.

6.3.7.2. Встановіть завантажувач Grub на диск

Завантажувач amd64 називається «grub». Grub - це гнучкий і надійний
завантажувач і хороший вибір за замовчуванням як для нових користувачів, так і
для досвідчених.

За замовчуванням, grub буде встановлено на розділ UEFI/запис завантаження
основного диска, де він повністю контролюватиме процес завантаження. За
бажанням, ви можете встановити його в іншому місці. Повну інформацію див. у
посібнику з експлуатації grub.

Якщо ви не бажаєте встановлювати grub, скористайтеся кнопкою Go Back для
переходу до головного меню, а звідти виберіть будь-який завантажувач, який ви
бажаєте використовувати.

6.3.7.3. Продовження без завантажувача

Цей параметр можна використати для завершення встановлення, навіть якщо не
потрібно встановлювати завантажувач, або тому, що у архіві/підархіві його не
передбачено, або тому, що він не потрібен (наприклад, ви використовуватимете
наявний завантажувач).

Якщо ви плануєте налаштувати завантажувач вручну, перевірте назву встановленого
ядра у /target/boot. Вам також слід перевірити цей каталог на наявність initrd;
якщо він присутній, вам, ймовірно, доведеться вказати завантажувачу
використовувати його. Інша інформація, яка вам знадобиться, - це диск і розділ,
який ви вибрали для вашої файлової системи /, і, якщо ви вирішили встановити /
boot на окремий розділ, також ваша файлова система /boot.

6.3.8. Завершення встановлення

Це останній крок у процесі встановлення Debian, під час якого програма
встановлення виконує останні завдання. Здебільшого вона полягає у прибиранні
після debian-installer.

6.3.8.1. Налаштування системного годинника

Програма встановлення може запитати вас, чи годинник на комп'ютері встановлено
у часовому поясі UTC. Зазвичай цього питання уникають, якщо це можливо, і
програма встановлення намагається з'ясувати, чи встановлено годинник за UTC,
виходячи з того, які інші операційні системи встановлено.

В експертному режимі ви завжди зможете вибрати, встановлювати годинник на UTC
чи ні. Системи, які (також) працюють під управлінням Windows, зазвичай
налаштовані на місцевий час. Якщо ви хочете використовувати подвійне
завантаження, виберіть місцевий час замість UTC.

У цей момент debian-installer також спробує зберегти поточний час у апаратному
годиннику системи. Це буде зроблено або за UTC, або за місцевим часом, залежно
від вибору, який ви щойно зробили.

6.3.8.2. Перезавантажити систему

Вам буде запропоновано витягнути завантажувальний носій (компакт-диск, флешку
тощо), з якого ви завантажували програму встановлення. Після цього система буде
перезавантажена у вашу нову Debian систему.

6.3.9. Усунення несправностей

Компоненти, перелічені у цьому розділі, зазвичай не беруть участі у процесі
встановлення, але чекають у фоновому режимі, щоб допомогти користувачеві, якщо
щось піде не так.

6.3.9.1. Збереження журналів інсталяції

Якщо встановлення пройшло успішно, файли журналів, створені під час процесу
встановлення, буде автоматично збережено до каталогу /var/log/installer/ у
вашій новій системі Debian.

Вибір пункту Зберегти журнали налагодження у головному меню дозволить вам
зберегти файли журналів на USB-накопичувач, мережу, жорсткий диск або інший
носій. Це може бути корисно, якщо ви зіткнулися з фатальними проблемами під час
інсталяції і хочете вивчити журнали на іншій системі або додати їх до звіту про
інсталяцію.

6.3.9.2. Використання оболонки та перегляд журналів

Існує декілька способів отримати оболонку під час виконання інсталяції. На
більшості систем, якщо ви не встановлюєте через послідовну консоль,
найпростіший спосіб - переключитися на другу віртуальну консоль, натиснувши 
Left Alt+F2^[13] (на клавіатурі Mac: Option+F2). Використовуйте Left Alt+F1,
щоб повернутися до самої програми встановлення.

Про графічну програму встановлення див. також Розділ 6.1.1, «Використання
графічного інсталятора».

Якщо ви не можете перемикати консолі, у головному меню також є пункт Виконати
оболонку, за допомогою якого можна запустити оболонку. Ви можете перейти до
головного меню з більшості діалогових вікон, натиснувши кнопку Go Back один або
декілька разів. Введіть exit, щоб закрити оболонку і повернутися до програми
встановлення.

На цьому етапі ви завантажуєтеся з оперативної пам'яті, і вам доступний
обмежений набір утиліт Unix. Ви можете побачити, які програми доступні за
допомогою команди ls /bin /sbin /usr/bin /usr/sbin і набравши help. Це клон
оболонки Борна під назвою ash і має деякі приємні можливості, такі як
автозавершення та історія.

Для редагування та перегляду файлів використовуйте текстовий редактор nano.
Файли журналів системи встановлення можна знайти у каталозі /var/log.

Примітка

Хоча ви можете робити в оболонці практично все, що вам дозволяють доступні
команди, можливість використання оболонки насправді існує лише на випадок, якщо
щось піде не так, і для налагодження.

Виконання дій вручну з оболонки може завадити процесу встановлення і призвести
до помилок або незавершеного встановлення. Зокрема, вам слід завжди дозволяти
програмі встановлення активувати ваш розділ підкачки, а не робити це самостійно
з командного рядка.

6.3.10. Встановлення через мережеву консоль

Одним з найцікавіших компонентів є network-console. Це дозволяє виконати більшу
частину встановлення по мережі через SSH. Використання мережі передбачає, що
вам доведеться виконувати перші кроки встановлення з консолі, принаймні до
моменту налаштування мережі. (Хоча ви можете автоматизувати цю частину за
допомогою Розділ 4.6, «Автоматичне встановлення».)

За замовчуванням цей компонент не завантажується у головне меню інсталяції,
тому ви маєте явно попросити його про це. Якщо ви встановлюєте з оптичного
носія, вам потрібно завантажитися із середнім пріоритетом або іншим чином
викликати головне меню встановлення і вибрати Завантажити компоненти
інсталятора з інсталяційного носія і зі списку додаткових компонентів вибрати 
мережева консоль: Продовжити встановлення віддалено за допомогою SSH. Про
успішне завантаження свідчить новий пункт меню під назвою Продовжити
встановлення віддалено за допомогою SSH.

Після вибору цього нового запису, вам буде запропоновано ввести новий пароль,
який буде використано для підключення до системи встановлення та його
підтвердження. Це все. Тепер ви побачите екран, на якому вам буде запропоновано
віддалено увійти від імені користувача installer за допомогою пароля, який ви
щойно вказали. Ще одна важлива деталь, яку слід помітити на цьому екрані, - це
відбиток пальця цієї системи. Вам потрібно безпечно передати відбиток пальця
людині, яка буде продовжувати встановлення віддалено.

Якщо ви вирішите продовжити встановлення локально, ви завжди можете натиснути 
Enter, що поверне вас до головного меню, де ви зможете вибрати інший компонент.

Тепер перейдемо на інший бік дроту. Перш за все, вам потрібно налаштувати ваш
термінал на кодування UTF-8, оскільки саме його використовує система
встановлення. Якщо ви цього не зробите, віддалене встановлення все одно буде
можливим, але ви можете зіткнутися з дивними артефактами відображення, такими
як зруйновані межі діалогових вікон або нечитабельні не ascii символи.
Встановити з'єднання з інсталяційною системою так само просто, як і набрати
текст:

$ ssh -l installer install_host

Де install_host - ім'я або IP-адреса комп'ютера, що встановлюється. Перед
фактичним входом буде відображено відбиток пальця віддаленої системи, і вам
потрібно буде підтвердити його правильність.

Примітка

Сервер ssh у програмі встановлення використовує конфігурацію за замовчуванням,
яка не надсилає пакети keep-alive. В принципі, з'єднання із системою, що
встановлюється, повинно залишатися відкритим на невизначений час. Однак, у
деяких ситуаціях - залежно від налаштувань вашої локальної мережі - з'єднання
може бути втрачено після певного періоду бездіяльності. Один з поширених
випадків, коли це може статися, це коли між клієнтом і системою, що
встановлюється, існує певна форма трансляції мережевих адрес (NAT). Залежно від
того, на якому етапі інсталяції було втрачено з'єднання, ви зможете або не
зможете відновити інсталяцію після повторного підключення.

Ви можете уникнути розриву з'єднання, додавши параметр -o ServerAliveInterval=
value коли з'єднуєтеся через ssh або додавши цей параметр до свого
конфігураційного файлу ssh. Але зверніть увагу, що у деяких випадках додавання
цього параметра може також призвести до розриву з'єднання (наприклад, якщо
пакети keep-alive надсилаються під час короткого збою мережі, після якого ssh
могла би відновити з'єднання), тому його краще використовувати лише у разі
потреби.

Примітка

Якщо ви встановлюєте кілька комп'ютерів по черзі і вони мають однакову
IP-адресу або ім'я хоста, ssh відмовиться з'єднуватися з таким хостом. Причина
в тому, що він матиме інший відбиток пальця, що зазвичай є ознакою
спуфінг-атаки. Якщо ви впевнені, що це не так, вам потрібно видалити
відповідний рядок з ~/.ssh/known_hosts^[14] та спробуйте знову.

Після входу ви побачите початковий екран, де у вас є дві можливості: Стартове
меню і Стартова оболонка. Перший з них відкриває головне меню інсталятора, де
ви можете продовжити інсталяцію у звичайному режимі. Останній запускає
оболонку, з якої ви можете дослідити і, можливо, виправити віддалену систему.
Ви повинні розпочати лише один сеанс SSH для меню встановлення, але можете
розпочати декілька сеансів для командних оболонок.

Застереження

Після того, як ви розпочали встановлення віддалено через SSH, не слід
повертатися до сеансу встановлення на локальній консолі. Це може призвести до
пошкодження бази даних, яка містить конфігурацію нової системи. Це, в свою
чергу, може призвести до невдалого встановлення або проблем зі встановленою
системою.

6.4. Завантаження втраченої прошивки

Як описано у розділі Розділ 2.2, «Пристрої, що потребують прошивки», деякі
пристрої потребують завантаження мікропрограми. У більшості випадків пристрій
взагалі не працюватиме, якщо прошивка відсутня; іноді базова функціональність
не порушується, якщо вона відсутня, а прошивка потрібна лише для того, щоб
увімкнути додаткові функції.

Починаючи з Debian GNU/Linux 12.0, відповідно до Загальної резолюції про
невільне програмне забезпечення від 2012 року, офіційні інсталяційні образи
(наприклад, netinst) можуть містити пакунки з невільним програмним
забезпеченням. Навіть за наявності цих пакунків прошивок деякі файли прошивок
можуть бути відсутніми. Або ви можете використовувати файли netboot, які не
містять пакунків прошивки.

Якщо драйвер пристрою запитує прошивку, яка відсутня, debian-installer покаже
діалогове вікно з пропозицією завантажити відсутню прошивку. Якщо цей параметр
вибрано, debian-installer скануватиме доступні пристрої на наявність вільних
файлів прошивок або пакунків із прошивками. Якщо прошивку буде знайдено, її
буде скопійовано у правильне місце (/lib/firmware), а модуль драйвера буде
перезавантажено.

Примітка

Які пристрої скануються і які файлові системи підтримуються, залежить від
архітектури, способу інсталяції та етапу інсталяції. Особливо на ранніх стадіях
встановлення, завантаження прошивки, найімовірніше, буде успішним з
USB-накопичувача, відформатованого у форматі FAT. На i386 і amd64 прошивку
також можна завантажити з MMC або SD-карти.

Зауважте, що ви можете пропустити завантаження прошивки, якщо знаєте, що
пристрій працюватиме і без неї, або якщо пристрій не потрібен під час
інсталяції.

6.4.1. Підготовка середовища

Найпоширеніший спосіб завантаження такої прошивки - зі знімного носія,
наприклад, флешки. Щоб підготувати USB-накопичувач (або інший носій, наприклад,
розділ жорсткого диска), файли або пакунки з прошивкою потрібно розмістити у
кореневому каталозі або каталозі з назвою /firmware файлової системи на носії.
Рекомендованою файловою системою для використання є FAT, оскільки вона з
великою ймовірністю підтримується на ранніх етапах встановлення.

Tar-архіви та zip-файли, що містять поточні пакунки для найпоширеніших
прошивок, а також пов'язані з ними метадані для забезпечення правильного
виявлення програмою встановлення (каталог dep11), можна завантажити за адресою:

  • https://cdimage.debian.org/cdimage/firmware/trixie/

Просто завантажте tar-архів або zip-файл потрібного релізу і розпакуйте його у
файлову систему на носії.

Також можна скопіювати окремі файли прошивки на носій. Вільну прошивку можна
отримати, наприклад, з уже встановленої системи або від постачальника
обладнання.

6.4.2. Прошивка та встановлена система

Будь-яка прошивка, завантажена під час встановлення, буде автоматично
скопійована до встановленої системи. У більшості випадків це гарантує, що
пристрій, який потребує прошивки, також працюватиме коректно після
перезавантаження системи у встановлену систему. Однак, якщо встановлена система
має іншу версію ядра, ніж програма встановлення, існує невелика ймовірність
того, що прошивку не вдасться завантажити через невідповідність версій.

Якщо прошивку було завантажено з пакунка прошивок, debian-installer також
встановить цей пакунок для встановленої системи і автоматично додасть розділ
невільних прошивок до архіву пакунків у sources.list APT. Перевага цього методу
полягає в тому, що прошивка автоматично оновлюється, якщо з'являється нова
версія.

Якщо завантаження прошивки було пропущено під час інсталяції, відповідний
пристрій, ймовірно, не працюватиме з інстальованою системою, доки прошивку
(пакунок) не буде інстальовано вручну.

Примітка

Якщо мікропрограму було завантажено з вільних файлів мікропрограми,
мікропрограму, скопійовану до встановленої системи, не буде автоматично
оновлено, якщо після завершення встановлення не буде встановлено відповідний
пакунок мікропрограми (за наявності).

6.4.3. Завершення встановленої системи

Залежно від того, як було виконано інсталяцію, може статися так, що потреба в
певній прошивці не була виявлена під час інсталяції, що відповідна прошивка
була недоступна або що користувач вирішив не встановлювати певну прошивку на
той момент. У деяких випадках, успішне встановлення може закінчитися чорним
екраном або спотвореним відображенням при перезавантаженні у встановлену
систему. Якщо це сталося, можна спробувати наступні обхідні шляхи:

  • Передайте параметр nomodeset у командному рядку ядра. Це може допомогти
    завантажитися у «резервний графічний режим».

  • Використовуйте комбінацію клавіш Ctrl+Alt+F2 для переходу до VT2, яка може
    запропонувати функціональний запит на вхід.

6.5. Кастомізація

За допомогою оболонки (див. Розділ 6.3.9.2, «Використання оболонки та перегляд
журналів») процес встановлення можна ретельно налаштувати, щоб він відповідав
винятковим випадкам використання:

6.5.1. Встановлення альтернативної системи ініціалізації

Debian використовує systemd як систему ініціалізації за замовчуванням. Втім,
підтримуються й інші системи ініціалізації (наприклад, sysvinit та OpenRC), і
найпростіше вибрати альтернативну систему ініціалізації під час інсталяції.
Докладні інструкції про те, як це зробити, див. на сторінці Init у вікі Debian.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[4] З технічної точки зору: де для цієї мови існує кілька локалізацій з
різними кодами країн.

^[5] За середнього і низького пріоритету ви завжди можете вибрати бажану локаль
з тих, що доступні для вибраної мови (якщо їх більше однієї).

^[6] Застарілі локалі - це локалі, які використовують не UTF-8, а один зі
старих стандартів кодування символів, таких як ISO 8859-1 (використовується у
західноєвропейських мовах) або EUC-JP (використовується у японській мові).

^[7] Програма встановлення зашифрує групу томів LVM за допомогою 256-бітного
ключа AES і скористається підтримкою «dm-crypt» у ядрі.

^[8] Щиро кажучи, ви можете створити MD-пристрій навіть з розділів,
розташованих на одному фізичному диску, але це не дасть жодних переваг.

^[9] Використання ключової фрази як ключа наразі означає, що розділ буде
створено за допомогою LUKS.

^[10] Вважається, що хлопці з агентств з трьох букв можуть відновити дані
навіть після кількох перезаписів магнітооптичних носіїв, хоча.

^[11] Зауважте, що програма, яка власне встановлює пакунки, називається dpkg.
Однак, ця програма є скоріше низькорівневим інструментом. apt є інструментом
вищого рівня, який викличе dpkg за необхідності. Він знає, як отримати пакунки
з вашого інсталяційного носія, мережі або звідки завгодно. Він також може
автоматично встановлювати інші пакунки, необхідні для коректної роботи пакунка,
який ви намагаєтеся встановити.

^[12] Вам слід знати, що для показу цього списку програма встановлення просто
викликає програму tasksel. Його можна запустити у будь-який час після
встановлення, щоб встановити додаткові пакунки (або видалити їх), або
скористатися більш тонким інструментом, таким як aptitude. Якщо ви шукаєте
певний окремий пакунок, після завершення встановлення просто виконайте aptitude
install package, де package - це назва пакунка, який ви шукаєте.

^[13] Тобто: одночасно натисніть клавішу Alt ліворуч від пробіл і функціональну
клавішу F2.

^[14] Наступна команда видалить наявний запис для хоста: ssh-keygen -R <
hostname|IP address>.

Розділ 7. Завантаження у Вашу нову систему Debian

Зміст

7.1. Момент істини
7.2. Монтування зашифрованих томів
    7.2.1. Усунення несправностей
7.3. Вхід

7.1. Момент істини

Перше завантаження Вашої системи на власному живленні, це те, що
інженери-електрики називають «тест на дим».

Якщо Ви зробили типове встановлення, то перша річ, яку Ви маєте бачити під час
завантаження системи -- це меню завантажувача grub. Першим пунктом меню буде
Ваша нова система Debian. Якщо на Вашому компʼютері були інші операційні
системи (як-от Windows), які були виявлені системою інсталяції, вони будуть
перелічені в меню нижче.

Якщо система не може коректно завантажитися, не впадайте у відчай. Якщо
встановлення було вдалим, існують гарні шанси, що Ви зіткнулися з відносно
малою проблемою, яка впливає на завантаження системи Debian. У більшості
випадків такі проблеми можна виправити без перевстановлення. Один з варіантів
виправлення -- це використання вбудованого режиму відновлення (див. Розділ 8.6,
«Відновлення пошкодженої системи»).

Якщо для Вас Debian and Linux щось новеньке, можливо Вам знадобиться допомога
від більш досвічених користувачів. Для отримання онлайн-допомоги можете
спробувати канали IRC #debian або #debian-boot в мережі OFTC. Крім того, можете
зв'язатися з debian-користувацьким списком розсилки. Також Ви можете надіслати
звіт про встановлення як описано за посиланням Розділ 5.4.7, «Надсилання звітів
про встановлення». Будь ласка, пересвідчіться, що Ви описали свою проблему
разом з усіма баченими повідомленнями -- це допоможе краще діагностувати Вашу
проблему.

Якщо на Вашому компʼютері є інші операційні системи, які не були виявлені або
виявлені не коректно, будь ласка, повідомте у звіті про інсталяцію.

7.2. Монтування зашифрованих томів

Якщо під час встановлення Ви створили зашифровані розділи та призначили їм
точки приєднання, система запитуватиме пароль під час завантаження для кожного
такого розділу.

Під час завантаження для зашифрованих з dm-crypt розділів буде таке запрошення:

Starting early crypto disks... part_crypt(starting)
Enter LUKS passphrase:

У першому рядку запрошення, part -- назва основного розділу, напр. sda2 або
md0. Ви, мабуть, дещо невпевнені для якого тому Ви набираєте пароль. Чи це
стосується Вашого /home? Чи /var? Дійсно, якщо у Вас лише один зашифрований
том, це легко і Ви можете просто написати пароль, використаний під час
створення цього тому. Але якщо під час інсталяції Ви створили декілька
зашифрованих томів, Вам допоможуть нотатки, записані Вами на останньому кроці у
Розділ 6.3.4.6, «Налаштування зашифрованих томів». Якщо у Вас немає нотаток
щодо відповідності part_crypt до точок приєднання, Ви все ще можете знайти цю
інформацію у /etc/crypttab та /etc/fstab Вашої системи.

Коли зашифрована коренева файлова система приєднана, запрошення може дещо
відрізнятися. Це залежить від генератора initramfs, з яким був створений initrd
для завантаження системи. Приклад, наведений нижче, відповідає initramfs-tools:

Begin: Mounting root file system... ...
Begin: Running /scripts/local-top ...
Enter LUKS passphrase:

Під час написання пароля не буде жодного символу (навіть зірочки). Якщо Ви
введете хибний пароль, Вам буде надано дві додаткові спроби. Після третьої
спроби процедура завантаження пропустить цей том і продовжить приєднувати інші
файлові системи. Для додаткової інформації ознайомтеся, будь ласка, з
Розділ 7.2.1, «Усунення несправностей».

Після введення всіх паролів завантаження повинно продовжитися як зазвичай.

7.2.1. Усунення несправностей

Якщо деякі з зашифрованих томів не вийде приєднати через хибні паролі, Вам буде
потрібно приєднати їх після завантаження системи вручну. Тут декілька випадків.

  • Перший випадок стосується кореневого розділу. Якщо він не приєднаний,
    процес завантаження зупиняється і тоді потрібно перезавантажити комп'ютер.

  • Найлегший випадок -- це зашифровані томи на кшталт /home або /srv. Їх можна
    приєднати вручну після завантаження.

    Проте з dm-crypt трішки складніше. Вам буде потрібно зареєструвати томи з 
    device mapper:

    # /etc/init.d/cryptdisks start

    Це просканує усі томи, згадані у /etc/crypttab та після введення правильних
    паролів створить відповідні пристрої у директорії /dev. (Вже приєднані томи
    будуть пропущені, тож Ви можете повторювати цю команду стільки, скільки це
    буде потрібно) Після успішної реєстрації можете просто приєднати томи у
    звичайний спосіб:

    # mount /точка_приєднання

  • Якщо будь-який том з некритичними системними файлами не можна приєднати (/
    usr або /var), система все ще може завантажитися та Ви можете вручну
    приєднати томи, як описано у попередньому випадку. Хоча, Вам також буде
    потрібно (пере)запустити вручну сервіси, які зазвичай працюють у Вашому
    оточенні, тому що найімовірніше вони не будуть запущені. Найлегший шлях --
    просто перезавантажитися.

7.3. Вхід

Як тільки Ваша система завантажиться, Ви побачите запрошення для входу в
систему. Увійдіть, використовуючи власні дані для входу, обрані Вами під час
інсталяції. Тепер Ваша система готова до використання.

Якщо Ви новачок, Вам напевно потрібно ознайомитися з документацією, яка вже
встановлена у Вашій системі. Зараз наявні декілька систем документації, триває
робота з інтеграції різних типів документації. Ось кілька відправних точок.

Супровідну документацію для встановленої програми можна знайти у /usr/share/doc
/, у підкаталозі відповідно до назви програми (або, якщо точніше, до назви
пакету Debian, який містить програму). У той самий час, більш розширена
документація часто запакована в окремих пакетах документації, які у більшості
випадків типово не встановлюються. Наприклад, документацію пакета apt
(інструмент керування) можна знайти в пакеті apt-doc або apt-howto.

На додаток, є декілька особливих каталогів у структурі /usr/share/doc/. Linux
HOWTOs встановлені у .gz (стиснутому) форматі, у /usr/share/doc/HOWTO/en-txt/.
Після встановлення dhelp, Ви знайдете індекс документації (який можна
переглядати) у /usr/share/doc/HTML/index.html.

Один з простих шляхів, щоби переглянути ці документи використовуючи текстовий
браузер -- це скористатися такими командами:

$ cd /usr/share/doc/
$ w3m .

Крапка після команди w3m для відтворення змісту поточного каталогу.

Якщо у Вас активований графічний інтерфейс робочого столу, можете
використовувати веббраузер. Запустіть його у меню програм та введіть в
адресному рядку /usr/share/doc/.

Також, щоби побачити документацію на більшість команд, доступних у командному
рядку, можете використати команду info або команду man. Використавши help Ви
побачите допомогу на команди командної консолі. А команда з параметром --help
зазвичай показує коротку та стислу інформацію щодо використання команди. Якщо
результат підказки заходить за верхній край екрана, додайте після команди |
 more -- таким чином по досягненні текстом верхнього краю екрана виведення
призупиниться. Для перегляду списку усіх доступних команд, що починаються з
певної літери, напишіть літеру та двічі натисніть TAB.

Розділ 8. Наступні кроки та куди йти далі

Зміст

8.1. Вимкнення системи
8.2. Власне орієнтування у Debian
    8.2.1. Система пакунків Debian
    8.2.2. Додаткові програми, доступні для Debian
    8.2.3. Керування версіями програмного забезпечення
    8.2.4. Керування завданнями Cron
8.3. Додаткова інформація
8.4. Налаштування поштової системи
    8.4.1. Стандартне налаштування е-пошти
    8.4.2. Надсилання пошти за межі системи
    8.4.3. Налаштування поштового сервера Exim4
8.5. Компіляція нового ядра
8.6. Відновлення пошкодженої системи

8.1. Вимкнення системи

Для того, щоб завершити роботу Debian GNU/Linux не можна перезавантажувати
систему за допомогою кнопки скидання на передній чи задній панелі комп’ютера
або просто вимкненням комп’ютера. Debian GNU/Linux потрібно вимикати в
контрольований спосіб, інакше файли можуть бути втрачені та/або може статися
пошкодження диска. Якщо Ви працюєте в середовищі робочого столу, зазвичай є
опція «вийти» в меню програм, яка дозволяє вимкнути (або перезавантажити)
систему.

Крім того, Ви можете натиснути комбінацію клавіш Ctrl+Alt+Del . Якщо комбінації
клавіш не працюють, останньою можливістю є вхід в систему як root і введення
необхідних команд. Використовуйте reboot для перезавантаження системи.
Використовуйте halt для зупинки системи, не вимикаючи її ^[15]. Щоб вимкнути
комп'ютер, скористайтеся командою poweroff або shutdown -h now. Система
ініціалізації systemd надає додаткові команди, які виконують ті самі функції;
наприклад systemctl reboot або systemctl poweroff.

8.2. Власне орієнтування у Debian

Debian трохи відрізняється від інших дистрибутивів. Навіть якщо Ви знайомі з
іншими дистрибутивами Linux, є речі, які слід знати про Debian для підтримання
системи у справному та чистому стані. Цей розділ містить матеріал, який
допоможе Вам зорієнтуватися; це не настанови з використання Debian, а лише
стислий огляд системи для тих, хто завжди поспішає.

8.2.1. Система пакунків Debian

Найважливіша концепція, яку потрібно зрозуміти -- це система пакунків Debian.
Більшою частиною система керується через систему пакунків. Це включає:

  • /usr (окрім /usr/local)

  • /var (можна створити /var/local та бути там в безпеці)

  • /bin

  • /sbin

  • /lib

. Наприклад, якщо замінити /usr/bin/perl, це спрацює, але після оновлення
пакунка perl збережені там файли будуть замінені. Досвідчені користувачі можуть
обійти це перевівши пакунок в aptitude у стан «hold» (утримання).

Один з найкращих способів установки -- це apt. Можна користуватися як командою 
apt у вікні термінала, так і інструментами aptitude або synaptic (які є лише
графічним інтерфейсом для apt). Зауважте, що apt також дозволяє поєднати main,
contrib, non-free, and non-free-firmware, тож Ви можете мати доступ до
обмежених пакунків (кажучи прямо, які не є частиною Debian) так само й водночас
як і пакунки з Debian GNU/Linux.

8.2.2. Додаткові програми, доступні для Debian

Існують офіційні та неофіційні репозиторії програмного забезпечення, які типово
не доступні під час встановлення Debian. Вони містять програми, які для когось
можуть бути важливими та необхідними. Інформацію про ці додаткові репозиторії
можна знайти на Debian сторінці Wiki The Software Available for Debian's Stable
Release (Програмне забезпечення, доступне для стабільних випусків Debian).

8.2.3. Керування версіями програмного забезпечення

Альтернативні версії програм керуються через update-alternatives. Якщо Ви
обслуговуєте різні версії програм, ознайомтеся зі сторінкою man
update-alternatives.

8.2.4. Керування завданнями Cron

Усі періодичні завдання, пов’язані з адмініструванням системи мають бути у /
etc, оскільки це файли конфігурації. Якщо у Вас є адміністративні завдання cron
для щоденного, щотижневого або щомісячного запуску, розмістіть їх у /etc/cron.
{daily,weekly,monthly}. Вони викликатимуться з /etc/crontab та виконуватимуться
в алфавітному порядку.

З іншого боку, якщо у Вас є завдання cron, яке (які) потрібно запускати від
імені спеціального користувача, або їх потрібно запускати в певний час або з
якоюсь певною частотою, можна використовувати /etc/crontab або, ще краще, /etc/
cron.d/що-завгодно. У цих конкретних файлах також є додаткове поле, яке
дозволяє вказати обліковий запис користувача, від імені якого виконуватиметься
завдання cron.

У будь-якому випадку Ви просто редагуєте файли, і cron це помітить автоматично.
Нема потреби запускати якусь спеціальну команду. Для отримання додаткової
інформації перегляньте cron(8), crontab(5) та /usr/share/doc/cron/
README.Debian.

8.3. Додаткова інформація

На сайті Debian є багато різноманітної документації щодо Debian. Особливої
уваги заслуговують Debian GNU/Linux FAQ та Довідник Debian. Перелік іншої
документації Debian доступний у Проєкт документації Debian (Debian
Documentation Project). Користувачі зі спільноти Debian підтримують один
одного; На сторінці Списку розсилки можна зареєструватися в одному або у
декількох розсилках. І наостанок, але не менш важливе, Архіви списків розсилки
Debian також містять велику кількість інформації щодо Debian.

Якщо Вам потрібна інформація щодо використання певної програми, потрібно
спочатку спробувати man назва-програми або info назва-програми.

У каталозі /usr/share/doc також є багато корисної документації. Зокрема, у /usr
/share/doc/HOWTO та /usr/share/doc/FAQ. Щоби надіслати звіт про помилки,
перегляньте /usr/share/doc/debian/bug*. Щоби дізнатися про специфічні проблеми
Debian для певних програм, перегляньте /usr/share/doc/(назва-пакунку)/
README.Debian.

Загальне джерело інформації щодо GNU/Linux є Проєкт документації Linux. Там Ви
знайдете HOWTO та посилання на іншу дуже цінну інформацію щодо компонентів
системи GNU/Linux.

Linux є реалізацією Unix. Проєкт документації Linux (LDP) містить значну
кількість HOWTO та онлайн-книг, що стосуються Linux.

Якщо Ви новачок в Unix, можливо Вам варто придбати декілька книг та гарно
ознайомитися з ними. Цей список поширених запитань щодо Unix містить низку
документів UseNet, які своєю чергою містять гарну історичну довідку.

8.4. Налаштування поштової системи

Сьогодні е-пошта є важливим компонентом життя багатьох людей. Оскільки існує
багато варіантів її налаштування, а правильне налаштування є важливим для
деяких утиліт Debian, ми спробуємо у цьому розділі торкнутися основ.

Існує три основні функції, які складають систему електронної пошти. По-перше,
це програма-клієнт (агент) електронної пошти (MUA), в якій користувач створює
та читає е-листи. Крім того, є програма-сервер (агент передачі) е-пошти (MTA),
який опікується обміном повідомленнями між комп'ютерами. І нарешті, є агент
доставки повідомлень (MDA), який опікується доставкою вхідної пошти до
користувацької теки Вхідні.

Ці три функції можуть виконуватися окремими програмами, але їх можна також
об’єднати в одній або у двох програмах. Також можна мати різні програми для цих
функцій з різними типами пошти.

У системах Linux та Unix історично є дуже популярним MUA з назвою mutt. Як і
більшість традиційних програм Linux, вона працює в текстовому режимі. Часто
вона використовується у поєднанні з MTA exim або sendmail та з MDA procmail.

Зі зростанням популярності використання графічних настільних систем
використання графічних програм для електронної пошти, таких як evolution від
GNOME, kmail від KDE або thunderbird від Mozilla стає також все більш
популярним. Ці програми поєднують функції MUA, MTA та MDA, але можуть -- а
часто так і є -- використовуватися у поєднанні з традиційними інструментами
Linux.

8.4.1. Стандартне налаштування е-пошти

Навіть якщо Ви плануєте використовувати графічну поштову програму, було б
корисно встановити традиційний MTA/MDA та правильно налаштувати його в системі
Debian GNU/Linux. Суть у тому, що в системі працюють різні утиліти.^[16] можуть
надсилати важливі повідомлення електронною поштою для системного адміністратора
про (потенційні) проблеми або зміни.

Для цього Ви можете встановити exim4 та mutt за допомогою команди apt install
exim4 mutt. exim4 -- це програма з комбінацією MTA/MDA, яка є відносно малою,
але дуже гнучкою. Типово, вона буде налаштована на обробку лише локальної
е-пошти в самій системі, а електронні листи, адресовані системному
адміністратору (root), будуть доставлені до звичайного облікового запису
користувача, створеного під час інсталяції^[17].

Коли доставляються системні е-листи, вони додаються до файлу у /var/mail/
назва-облікового-запису. Ці електронні листи можна читати програмою mutt.

8.4.2. Надсилання пошти за межі системи

Як згадувалося раніше, після базової інсталяції Debian система може обробляти
лише пошту, що надходить із того самого комп’ютера. Надсилання назовні або
отримання пошти з інших систем не налаштовано.

Якщо Ви бажаєте, щоби exim4 також обробляв і зовнішню пошту, перегляньте
наступний підрозділ для розуміння основних параметрів. Також перевірте потім,
чи надсилання та отримання е-пошти працює правильно.

Якщо Ви збираєтеся використовувати графічну поштову програму та використовуєте
поштовий сервер свого інтернет-провайдера (ISP) або своєї компанії, то
насправді немає потреби налаштовувати exim4 для обробки зовнішньої е-пошти.
Просто налаштуйте свою улюблену графічну поштову програму на використання
правильних серверів для надсилання та отримання е-пошти (але це вже виходить за
межі цього посібника).

Однак у такому випадку можливо Вам знадобиться налаштувати окремі утиліти для
правильного надсилання електронних листів. Однією з таких утиліт є програма 
reportbug, яка спрощує надсилання звітів про помилки пакунків Debian.
Стандартно очікується, що для надсилання звітів вона зможе використовувати
exim4.

Для правильного налаштування reportbug з використанням зовнішнього поштового
сервера, виконайте команду reportbug --configure та надайте відповідь «ні» на
запитання, чи доступний MTA. Після цього Вам буде запропоновано вказати сервер
SMTP для надсилання звітів.

8.4.3. Налаштування поштового сервера Exim4

Якщо Ви бажаєте, щоби Ваша система також обробляла зовнішню електронну пошту,
Вам буде потрібно переналаштувати пакет exim4^[18]:

# dpkg-reconfigure exim4-config

Після введення команди (від імені root) Вас спочатку запитають чи Ви хочете
розбити конфігурацію на менші файли. Якщо не впевнені, залиште параметр як є.

Далі Вам буде запропоновано кілька поширених сценаріїв налаштування пошти.
Виберіть той, який найбільше відповідає Вашим потребам.

інтернет-сайт

    Ваша система під'єднана до комп’ютерної мережі, і пошта надсилається/
    отримується безпосередньо через протокол SMTP. На наступних екранах у Вас
    запитано про певну інформацію, на кшталт поштового імені або списку
    доменів, для яких Ви хочете отримувати або пересилати пошту.

пошта надсилається через smarthost

    У цьому випадку вся вихідна пошта надсилається на комп'ютер «smarthost»,
    який далі розподіляє її відповідно до призначень. Smarthost також зазвичай
    зберігає вхідну пошту на Вашому комп'ютері, тож Вам немає потреби постійно
    бути на зв’язку. Це також означає, що Вам доведеться забирати пошту зі
    smarthost за допомогою програми на кшталт fetchmail.

    У багатьох випадках smarthost буде поштовим сервером Вашого провайдера, що
    робить цей варіант дуже придатним для користувачів комутованого доступу
    (був такий раніше dial-up - прим.пер.). Це також може бути поштовий сервер
    компанії або навіть інша система у Вашій власній мережі.

пошта надсилається через smarthost; без локальної пошти

    Цей параметр в цілому такий самий, як і попередній, за винятком того, що
    систему не буде налаштовано на обробку пошти для локального домену
    електронної пошти. Пошта в самій системі (наприклад, для системного
    адміністратора) буде працювати й далі.

тільки місцева доставка

    Це стандартний параметр, на який налаштована Ваша система.

зараз конфігурації немає

    Виберіть це, якщо Ви абсолютно впевнені у тому, що робите. Це залишить Вас
    із неналаштованою поштовою системою -- доки Ви самі її не налаштуєте, -- Ви
    не зможете надсилати чи отримувати пошту та можете пропустити деякі важливі
    повідомлення від системних утиліт.

Якщо жоден із цих сценаріїв не відповідає Вашим потребам або якщо Вам потрібні
більш детальні налаштування, Вам потрібно буде відредагувати файли конфігурації
у каталозі /etc/exim4 після завершення встановлення. Більше інформації щодо
exim4 можна знайти у /usr/share/doc/exim4; файл README.Debian.gz містить
додаткові відомості про налаштування exim4 та пояснює, де можна знайти
додаткову документацію.

Зверніть увагу, що надсилання пошти безпосередньо в Інтернет, коли у Вас немає
офіційного доменного імені, може призвести до відхилення Вашої пошти заходами
захисту від спаму. Бажано використовувати поштовий сервер Вашого провайдера.
Якщо Ви все ще хочете надсилати пошту напряму, можете використовувати адресу
е-пошти, яка відрізняється від згенерованої. Якщо використовуєте як MTA exim4,
це можна зробити, додавши запис у /etc/email-addresses.

8.5. Компіляція нового ядра

Навіщо збирати нове ядро? Скоріше за все, це не потрібно, оскільки типове ядро,
яке постачається з Debian підтримує майже всі конфігурації.

Якщо Ви все ж хочете скомпілювати власне ядро, це, звичайно, можливо, і ми
радимо скористатися «make deb-pkg». Для отримання додаткової інформації
прочитайте Довідник з ядра Debian Linux.

8.6. Відновлення пошкодженої системи

Іноді щось йде не так, і система, яку Ви ретельно налаштовували, більше не
завантажується. Можливо, конфігурація завантажувача була пошкоджена під час
спроби внесення змін, або, можливо, нове ядро, яке Ви встановили, не
завантажується, або, навіть, космічні промені потрапили на Ваш диск та трохи
намішали у /sbin/init. Незалежно від причини, Вам знадобиться система, з якою
Ви зможете працювати, поки Ви її відновите, і для цього може бути корисним
режим відновлення.

Для отримання доступу до режиму відновлення, виберіть rescue у меню
завантаження, введіть rescue у командному рядку boot: або завантажтеся за
допомогою параметра завантаження rescue/enable=true. Вам буде показано кілька
перших екранів інсталятора з приміткою в кутку екрана, що вказуватиме, що це
режим відновлення, а не повна інсталяція. Не хвилюйтеся, Ваша система не буде
перезаписана! Режим відновлення просто використовує можливості виявлення
апаратного забезпечення, доступні в інсталяторі, щоб переконатися, що Ваші
диски, мережеві пристрої тощо доступні під час відновлення системи.

Замість інструменту розподілу дисків Вам буде показаний список розділів у Вашій
системі та буде запропоновано обрати один з них. Зазвичай Вам потрібен розділ з
кореневою файловою системою, яку потрібно відновити. Ви можете обрати розділи
на пристроях RAID та LVM, а також розділи, безпосередньо створені на дисках.

Якщо це можливо, інсталятор запропонує Вам командний рядок для обраної файлової
системи, яку можна буде використовувати для виконання необхідної роботи з
відновлення. Наприклад, якщо Вам потрібно перевстановити GRUB у головний
завантажувальний запис (MBR) першого диска, Ви можете скористатися командою
grub-install '(hd0)'.

Якщо інсталятор не може запустити придатну для використання оболонку в обраній
Вами кореневій файловій системі, можливо, через пошкодження файлової системи,
він покаже попередження та запропонує замість цього надати Вам командну
оболонку в середовищі інсталятора. У цьому середовищі не так багато доступних
інструментів, але їх все одно буде достатньо для відновлення системи. Обрану
кореневу файлову систему буде змонтовано у каталог /target.

У будь-якому випадку після виходу з командної оболонки система
перезавантажиться.

Нарешті, зауважте, що відновлення пошкоджених систем може бути складним
завданням і цей посібник не поглиблений до всіх можливих помилок та збоїв або
як їх виправити. Якщо у Вас виникли проблеми, зверніться до фахівця.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[15] У системі ініціалізації SysV команда halt мала той самий ефект, що й 
poweroff, але з systemd як системою ініціалізації (типово починаючи з jessie)
їхні ефекти відрізняються.

^[16] Наприклад, cron, quota, logcheck, aide, ...

^[17] Пересилання пошти для root для звичайного облікового запису користувача
налаштовано у файлі /etc/aliases. Якщо обліковий запис звичайного користувача
не був створений, то звичайно пошта буде доставлятися до облікового запису
root.

^[18] Звичайно, Ви можете видалити exim4 та замінити його іншим MTA/MDA.

Додаток A. Інструкція з установки

Зміст

A.1. Передумови
A.2. Завантаження інсталятора
    A.2.1. Оптичний диск
    A.2.2. Флешка USB
    A.2.3. Завантаження з мережі
    A.2.4. Завантаження з жорсткого диска
A.3. Встановлення
A.4. Надішліть нам звіт встановлення
A.5. І нарешті...

Цей документ містить опис як встановлювати Debian GNU/Linux trixie 64-bit PC («
amd64») з новим debian-installer. Це короткий посібник із процесу встановлення,
який охоплює більшість типових установок. У випадках, коли доречно надати
більше інформації, ми посилаємося на інші частини цього документа.

A.1. Передумови

Якщо Ви зіткнулися з помилками під час встановлення, зверніться до
Розділ 5.4.7, «Надсилання звітів про встановлення», щоб дізнатися, як про них
повідомити. Якщо маєте запитання, на які в цьому документі немає відповіді,
надішліть їх до списку розсилки debian-boot (debian-boot@lists.debian.org) або
запитайте на каналі IRC (#debian-boot у мережі OFTC).

A.2. Завантаження інсталятора

Команда debian-cd створює інсталяційні образи з використанням debian-installer
на сторінці Debian CD/DVD. Докладніше про те, де отримати образи, дивіться на
Розділ 4.1, «Офіційні Debian GNU/Linux інсталяційні образи».

Для деяких методів встановлення потрібні інші образи, окрім тих, що є для
оптичних накопичувачів. Розділ 4.2.1, «Де знайти інсталяційні файли» пояснює як
знайти образи на дзеркалах Debian.

У підрозділах нижче надано інформацію про те, які образи слід отримати для
кожного можливого способу встановлення.

A.2.1. Оптичний диск

Образ CD netinst -- популярний образ, який можна використовувати для
встановлення trixie з debian-installer. Цей метод встановлення призначений для
завантаження з образу та встановлення додаткових пакетів через мережу; звідси
назва «netinst». Образ містить програмні компоненти, необхідні для запуску
інсталятора, а також базові пакунки для забезпечення мінімальної системи
trixie. Якщо Ви хочете, можете отримати образ DVD, якому для встановлення
системи мережа не потрібна. Вам знадобиться лише перший образ з такого набору.

Завантажте будь-який тип, який Вам до вподоби, і запишіть його на оптичний
диск. Для завантаження цього диску, можливо прийдеться змінити налаштування
Вашого BIOS/UEFI, як пояснено у Розділ 3.6.1, «Виклик меню налаштування BIOS/
UEFI».

A.2.2. Флешка USB

Також можливе встановлення з USB-накопичувачів. Наприклад, USB-брелок може
стати зручним носієм для встановлення Debian, який можна брати з собою
будь-куди.

Найпростіший спосіб підготувати USB-накопичувач -- це завантажити будь-який
образ CD чи DVD Debian, який на нього поміститься, та записати образ
безпосередньо на носій. Звичайно, це знищить усе, що вже є на флешці. Це так
працює, оскільки образи CD/DVD Debian є «гібридними» образами, які можуть
завантажуватися як з оптичних, так і з USB-пристроїв.

Є також інші, більш гнучкі шляхи для підготовки флешки з інсталятором debian і
це можливо навіть з флешками меншого розміру. Для більш детальної інформації,
див. нашу wiki.

Хоча завантаження з USB-накопичувачів досить поширене в системах UEFI, це дещо
відрізняється в старішому світі BIOS. Деякі BIOS можуть завантажувати
USB-накопичувач безпосередньо, а деякі ні. Можливо, Вам знадобиться налаштувати
BIOS/UEFI, щоб увімкнути «USB legacy support» або «Legacy support». Для
завантаження з USB-пристрою меню вибору завантажувальних пристроїв повинно
містити «removable drive» або «USB-HDD». За більш детальною інформацією та
деякими порадами, зверніться до Розділ 5.1.1, «Завантаження з USB-накопичувача»
.

A.2.3. Завантаження з мережі

Також є можливість завантажити debian-installer повністю з мережі. Різноманітні
методи завантаження з мережі (netboot) залежать від Вашої архітектури та
налаштувань. Файли у netboot/ можна використати для мережевого завантаження
(netboot) debian-installer.

Найпростіше -- це напевно налаштувати завантаження з мережі PXE. Розпакуйте
файл netboot/pxeboot.tar.gz у /srv/tftp або у будь-яке інше зручне місце на
сервері tftp. Налаштуйте свій сервер DHCP для передачі клієнтам файлу
pxelinux.0 і все повинно працювати. Більш докладно див. Розділ 4.5, «Підготовка
файлів для завантаження з TFTP».

A.2.4. Завантаження з жорсткого диска

Завантажити інсталятор можна не лише за допомогою змінного носія, а й за
допомогою наявного жорсткого диска, на якому може бути інша ОС. Збережіть
hd-media/initrd.gz, hd-media/vmlinuz та Debian образ DVD у кореневий каталог
жорсткого диска. Переконайтеся, що назва файлу-образу закінчується на .iso.
Тепер залишається завантажити linux за допомогою initrd. Один зі способів
пояснюється у Розділ 5.1.3, «Завантаження з Linux за допомогою GRUB».

A.3. Встановлення

Як тільки запуститься інсталятор, Ви побачите стартовий екран. Для завантаження
натисніть Enter або прочитайте інструкції щодо інших методів та параметрів
завантаження (див. Розділ 5.3, «Параметри завантаження»).

Через деякий час Вам буде запропоновано вибрати мову. Для вибору користуйтеся
клавішами зі стрілками (курсором) та потім для продовження натисніть Enter.
Далі Вам буде запропоновано вибрати країну зі списку, де будуть країни, в яких
розмовляють Вашою мовою. Якщо її не буде в короткому списку, можна буде
відкрити список з усіма країнами.

Вам може буде запропоновано вибрати розкладку клавіатури. Якщо не знаєте яка
буде кращою, залиште стандартний вибір.

Тепер, поки інсталятор визначає обладнання та завантажує решту інсталяційного
образу, можете сісти зручніше та відпочити.

Далі інсталятор спробує визначити Ваше мережеве обладнання та налаштувати
мережу з DHCP. Якщо Ви не під'єднанні до мережі або мережа без DHCP, Ви зможете
налаштувати мережу вручну.

Налаштування мережі буде виконане після створення користувацьких облікових
записів. Стандартно Вам буде запропоновано встановити пароль для користувача «
root» (адміністратор) та надати необхідну інформацію для створення одного
звичайного облікового запису. Якщо Ви не зазначите пароль для користувача «root
», цей обліковий запис буде деактивовано, але пакет sudo для виконання
адміністративних завдань та налаштування системи, буде пізніше встановлено.
Стандартно, перший створений в системі користувач зможе використовувати команду
sudo для отримання прав root.

Наступний крок -- це налаштування годинника та часового поясу. Для перевірки
точного часу інсталятор спробує встановити зв'язок із сервером часу в
інтернеті. Часовий пояс залежить від обраної країни і якщо країна має декілька
поясів, інсталятор запитає який саме часовий пояс потрібно встановити.

Прийшла черга розподілу Ваших дисків. Спочатку Вам буде надана можливість
розподілити весь диск або лише його вільну частину в автоматичному режимі (див.
Розділ 6.3.4.2, «Кероване створення розділів»). Це рекомендовано для новачків
або якщо Ви поспішаєте. Якщо Ви хочете зробити це власноруч, виберіть в меню 
Вручну.

Якщо у Вас є розділ Windows, який би Ви хотіли зберегти, будьте дуже уважними з
автоматичним розподілом. Якщо Ви обираєте ручний розподіл, Ви зможете за
допомогою інсталятора змінити розміри розділів FAT або NTFS і таким чином
звільнити місце для встановлення Debian: просто виберіть розділ і встановіть
новий розмір.

На наступному екрані Ви побачите свою таблицю розділів, як будуть розділи
відформатовані та куди приєднані. Виберіть розділ, якщо хочете його змінити чи
видалити. Якщо Ви скористалися автоматичним розподілом, Вам потрібно для
завершення налаштування лише вибрати в меню Завершити розподіл та записати
зміни на диск. Пам'ятайте про призначення хоча б одного розділу в якості swap
та одного розділу для кореневого каталогу /. Більш докладно про використання
програми для розподілу дисків, зверніться до Розділ 6.3.4, «Створення розділів
і вибір точок кріплення»; доповнення Додаток C, Перерозподіл диска для Debian з
інформацією про розподіл.

Зараз debian-installer форматує Ваші розділи та починає встановлення основної
частини системи, що забере трохи часу. Після цього встановлюється ядро.

Основна система, встановлена раніше, -- робоча, але з мінімальним набором. Щоби
зробити систему більш функціональною, на наступному кроці Ви зможете встановити
додаткові пакунки, обираючи завдання. Перед встановленням пакунків потрібно
налаштувати apt та визначити джерела отримання пакунків. Завдання «Стандартні
системні засоби» обране стандартно та зазвичай повинне бути встановлене. Якщо
бажаєте після встановлення працювати в графічному середовищі, оберіть завдання 
«Середовище робочого столу». За додатковою інформацією щодо цього кроку
зверніться до Розділ 6.3.6.2, «Вибір та встановлення програмного забезпечення».

Останній крок встановлення -- це завантажувач системи (boot loader). Якщо
інсталятор знаходить на Вашому ПК інші операційні системи, він додає їх до
завантажувального меню та повідомляє про це. Стандартно, GRUB встановлюється на
розділ UEFI або у завантажувальний запис (boot record) на головному диску, що
зазвичай гарний вибір. Але у Вас буде можливість це змінити та встановити
завантажувач системи будь-куди.

debian-installer зараз повідомить про завершення встановлення. Вийміть cdrom
або інший завантажувальний накопичувач та натисніть для перезавантаження Enter.
Після цього ПК повинен завантажитися у нову систему та надати Вам можливість
увійти в систему. Про це докладно написано у Розділ 7, Завантаження у Вашу нову
систему Debian.

Якщо Вам потрібно більше інформації щодо процесу встановлення, див. Розділ 6, 
Використання інсталятора Debian.

A.4. Надішліть нам звіт встановлення

Якщо Ви успішно завершили встановлення debian-installer, ми будемо дуже Вам
вдячні за надання нам звіту. Найлегший шлях це зробити -- встановити пакет
reportbug (apt install reportbug), налаштувати reportbug за вказівками у
Розділ 8.4.2, «Надсилання пошти за межі системи» та виконати команду reportbug
installation-reports.

Якщо Ви не завершили встановлення, можливо Вам вдалося виявити якусь проблему
або помилку інсталятора. Для удосконалення інсталятора нам необхідно розуміти
що саме сталося, тож просимо Вас приділити трішки свого часу і надіслати нам
звіт. Для повідомлення про проблеми Ви можете використати звіт про
встановлення. Якщо Встановлення геть не вдалося, див. Розділ 5.4.6,
«Повідомлення про проблеми з установкою».

A.5. І нарешті...

Ми сподіваємося, що Debian Вам сподобається і ця система буде для Вас зручною.
Можливо, Ви захочете ознайомитися з Розділ 8, Наступні кроки та куди йти далі.

Додаток B. Автоматичне встановлення з готовими відповідями

Зміст

B.1. Вступ
    B.1.1. Методи попереднього налаштування
    B.1.2. Обмеження
B.2. Використання preseeding
    B.2.1. Завантаження файлу попередньої конфігурації
    B.2.2. Використання параметрів завантаження для попереднього вибору питань
    B.2.3. Автоматичний режим
    B.2.4. Псевдоніми, корисні для попередньої обробки
    B.2.5. Приклади попереднього завантаження завантажувального запиту
    B.2.6. Використання DHCP-сервера для вказівки файлів попередньої
    конфігурації
B.3. Створення файлу попередньої конфігурації
B.4. Вміст файлу попередньої конфігурації (для trixie)
    B.4.1. Локалізація
    B.4.2. Синтез мовлення
    B.4.3. Конфігурація мережі
    B.4.4. Мережева консоль
    B.4.5. Дзеркальні налаштування
    B.4.6. Налаштування облікового запису
    B.4.7. Налаштування годинника та часового поясу
    B.4.8. Розбиття на розділи
    B.4.9. Установка базової системи
    B.4.10. Apt setup
    B.4.11. Вибір пакета
    B.4.12. Інсталяція завантажувача
    B.4.13. Завершення установки
    B.4.14. Попередня підготовка інших пакунків
B.5. Додаткові опції
    B.5.1. Запуск користувацьких команд під час встановлення
    B.5.2. Використання попередньої обробки для зміни значень за замовчуванням
    B.5.3. Ланцюгове завантаження файлів попередньої конфігурації

Цей додаток пояснює як автоматизують встановлення debian-installer обрані
наперед відповіді на запитання.

Фрагменти конфігурації, використані у цьому додатку, також доступні як приклад
файлу попередньої конфігурації з ../example-preseed.txt.

B.1. Вступ

Попередня підготовка допомагає знайти відповіді на запитання, які виникають
протягом встановлення, без ручного введення відповідей під час інсталяції. Це
уможливлює повністю автоматизувати більшість типів встановлення та навіть
пропонує деякі функції, недоступні під час звичайного встановлення.

Попереднє налаштування не потрібне. Якщо ви використовуєте порожній файл
попереднього встановлення, програма встановлення поводитиметься так само, як і
під час звичайного ручного встановлення. Кожне питання, яке ви попередньо
введете, буде (якщо ви відповіли на нього правильно!) певним чином змінювати
інсталяцію від цієї базової лінії.

B.1.1. Методи попереднього налаштування

Існує три методи, які можна використовувати для попереднього завантаження:
initrd, file і network. Попереднє налаштування Initrd працює з будь-яким
методом встановлення і підтримує попереднє налаштування більшої кількості
речей, але вимагає найбільшої підготовки. Файлове та мережеве попереднє
встановлення можна використовувати з різними методами інсталяції.

У наступній таблиці показано, які методи попереднього налаштування можна
використовувати з якими методами встановлення.

┌────────────────────────────────────────────────────┬────────┬─────┬─────────┐
│                  Метод інсталяції                  │ initrd │файл │ мережа  │
├────────────────────────────────────────────────────┼────────┼─────┼─────────┤
│CD/DVD/USB                                          │так     │так  │так^[a]  │
├────────────────────────────────────────────────────┼────────┼─────┼─────────┤
│мережеве завантаження                               │так     │ні   │так      │
├────────────────────────────────────────────────────┼────────┼─────┼─────────┤
│hd-носій (включно з usb-накопичувачем)              │так     │так  │так^[a]  │
├────────────────────────────────────────────────────┴────────┴─────┴─────────┤
│^[a] але тільки якщо у вас є доступ до мережі, і ви правильно встановили     │
│preseed/url                                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

Важливою відмінністю між методами попереднього налаштування є момент, в який
завантажується і обробляється файл попередньої конфігурації. Для initrd це
відбувається на самому початку інсталяції, ще до того, як буде поставлено перше
запитання. Попереднє налаштування з командного рядка ядра відбувається одразу
після цього. Таким чином, можна перевизначити конфігурацію, встановлену у
initrd, відредагувавши командний рядок ядра (або у конфігурації завантажувача,
або вручну під час завантаження для завантажувачів, які це дозволяють). Для
попереднього налаштування файлів це відбувається після завантаження
інсталяційного образу. Для мережевого попереднього налаштування - тільки після
того, як мережа буде налаштована.

Важливо

Очевидно, що питання, які були оброблені до налаштування файлу попередньої
конфігурації, не можуть бути попередньо налаштовані (це стосується питань, які
відображаються лише з середнім або низьким пріоритетом, наприклад, перший
запуск виявлення апаратного забезпечення). Не дуже зручний спосіб уникнути цих
запитань - попередньо вказати їх у параметрах завантаження, як описано у
Розділ B.2.2, «Використання параметрів завантаження для попереднього вибору
питань».

Щоб легко уникнути запитань, які зазвичай з'являються перед початком
попереднього встановлення, ви можете запустити програму встановлення у режимі «
авто». Це відкладає питання, які зазвичай ставляться занадто рано для
попереднього вибору (наприклад, вибір мови, країни та клавіатури), до моменту,
коли мережа буде готова, що дає змогу їх попередньо поставити. Він також
запускає встановлення з критичним пріоритетом, що дозволяє уникнути багатьох
неважливих питань. Дивіться Розділ B.2.3, «Автоматичний режим» для отримання
детальної інформації.

B.1.2. Обмеження

Хоча більшість запитань, які використовує debian-installer, можна попередньо
задати за допомогою цього методу, є деякі помітні винятки. Ви повинні (пере)
розбити весь диск на розділи або використати наявне вільне місце на диску;
використовувати наявні розділи неможливо.

B.2. Використання preseeding

Спочатку вам потрібно створити файл попередньої конфігурації і розмістити його
в тому місці, звідки ви хочете його використовувати. Створення файлу
попередньої конфігурації описано далі у цьому додатку. Помістити його в
потрібне місце досить просто для мережевого попереднього завантаження або якщо
ви хочете прочитати файл з USB-накопичувача. Якщо ви хочете включити файл до
інсталяційного ISO-образу, вам доведеться ремастерити образ. Як отримати файл
попередньої конфігурації до initrd, не є предметом розгляду у цьому документі;
будь ласка, зверніться до документації розробників для debian-installer.

Приклад файлу попередньої конфігурації, який ви можете використати як основу
для власного файлу попередньої конфігурації, доступний за адресою ../
example-preseed.txt. Цей файл базується на фрагментах конфігурації, включених
до цього додатку.

B.2.1. Завантаження файлу попередньої конфігурації

Якщо ви використовуєте попереднє висівання initrd, вам потрібно лише
переконатися, що файл з назвою preseed.cfg включено до кореневого каталогу
initrd. Програма встановлення автоматично перевірить наявність цього файлу і
завантажить його.

Для інших методів попереднього встановлення вам потрібно вказати програмі
встановлення, який файл використовувати під час завантаження. Зазвичай це
робиться шляхом передачі ядру параметра завантаження, або вручну під час
завантаження, або шляхом редагування файлу конфігурації завантажувача 
(наприклад, syslinux.cfg) і додавання параметра в кінець рядка(ів) додавання
ядра.

Якщо ви вказали файл попередньої конфігурації у конфігурації завантажувача, ви
можете змінити конфігурацію так, щоб вам не потрібно було натискати клавішу
Enter для завантаження програми встановлення. Для syslinux це означає
встановлення тайм-ауту на 1 в syslinux.cfg.

Щоб переконатися, що програма встановлення отримає правильний файл попередньої
конфігурації, ви можете додатково вказати контрольну суму для цього файлу.
Наразі це має бути md5-сума, і якщо її вказано, вона має збігатися з файлом
попередньої конфігурації, інакше програма встановлення відмовиться її
використовувати.

Параметри завантаження, які слід вказати:
- якщо ви завантажуєтеся по мережі:
  preseed/url=http://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d
- або
  preseed/url=tftp://host/path/to/preseed.cfg
  preseed/url/checksum=5da499872becccfeda2c4872f9171c3d

- якщо ви завантажуєте відреставрований інсталяційний образ:
  preseed/file=/cdrom/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

- якщо ви встановлюєте з USB-носія (покладіть файл попередньої конфігурації в
  до каталогу верхнього рівня USB-накопичувача):
  preseed/file=/hd-media/preseed.cfg
  preseed/file/checksum=5da499872becccfeda2c4872f9171c3d

Зверніть увагу, що preseed/url можна скоротити до url, preseed/file до file і
preseed/file/checksum до preseed-md5, коли вони передаються як параметри
завантаження.

B.2.2. Використання параметрів завантаження для попереднього вибору питань

Якщо файл попередньої конфігурації не може бути використаний для попереднього
вибору деяких кроків, інсталяцію все одно можна повністю автоматизувати,
оскільки ви можете вказати значення попереднього вибору у командному рядку під
час завантаження програми встановлення.

Параметри завантаження також можна використовувати, якщо ви не хочете
використовувати преселекцію, а просто хочете отримати відповідь на конкретне
запитання. Деякі приклади, де це може бути корисно, описані в інших розділах
цього посібника.

Щоб задати значення для використання всередині debian-installer, просто
передайте path/to/variable=value для будь-якої з попередньо заданих змінних,
перелічених у прикладах у цьому додатку. Якщо значення має бути використано для
налаштування пакунків для цільової системи, вам слід додати owner^[19] змінної
як у owner:path/to/variable=value. Якщо ви не вкажете власника, значення
змінної не буде скопійовано до бази даних debconf у цільовій системі і, таким
чином, залишиться невикористаним під час конфігурування відповідного пакунка.

Зазвичай, попереднє введення запитання таким чином означає, що воно не буде
поставлене. Щоб встановити певне значення за замовчуванням для питання, але все
одно поставити його, використовуйте «?=» замість «=» як оператор. Див. також
Розділ B.5.2, «Використання попередньої обробки для зміни значень за
замовчуванням».

Зверніть увагу, що деякі змінні, які часто задаються у запрошенні до
завантаження, мають коротший псевдонім. Якщо доступний псевдонім, він
використовується в прикладах у цьому додатку замість повної змінної. Наприклад,
змінну preseed/url було змінено на url. Іншим прикладом є псевдонім tasks, який
перекладається як tasksel:tasksel/first.

«---» у параметрах завантаження має особливе значення. Параметри ядра, які
з'являються після останньої «---», можна скопіювати до конфігурації
завантажувача встановленої системи (якщо це підтримується програмою
встановлення завантажувача). Програма встановлення автоматично відфільтрує всі
параметри (наприклад, параметри попередньої конфігурації), які вона розпізнає.

Примітка

Поточні ядра linux (2.6.9 і вище) приймають максимум 32 параметри командного
рядка і 32 параметри оточення, включно з будь-якими параметрами, доданими за
замовчуванням для програми встановлення. Якщо ці числа буде перевищено, ядро
впаде у паніку (аварійно завершить роботу). (У попередніх версіях ядра ці
значення були меншими.)

Для більшості інсталяцій, деякі параметри за замовчуванням у файлі конфігурації
завантажувача, такі як vga=normal, можна безпечно вилучити, що дозволить вам
додати більше параметрів для попереднього завантаження.

Примітка

Не завжди можливо вказати значення з пробілами для параметрів завантаження,
навіть якщо ви відокремлюєте їх лапками.

B.2.3. Автоматичний режим

Існує декілька особливостей програми встановлення, які в поєднанні дозволяють
за допомогою досить простих командних рядків у завантажувальному вікні
створювати як завгодно складні налаштовані автоматичні установки.

Це можна зробити за допомогою вибору завантаження Automated install, який також
називається auto для деяких архітектур або способів завантаження. У цьому
розділі auto не є параметром, а означає вибір цього варіанта завантаження і
додавання наступних параметрів завантаження у запрошенні до завантаження. Див.
Розділ 5.1.5, «Екран завантаження» для отримання інформації про те, як додати
параметр завантаження.

Щоб проілюструвати це, наведемо кілька прикладів, які можна використовувати при
завантажувальному запиті:

auto url=autoserver

Це залежить від наявності DHCP-сервера, який доставить машину до місця, де
autoserver може бути розпізнано завдяки DNS, можливо, після додавання
локального домену, якщо це було передбачено DHCP. Якщо це було зроблено на
сайті з доменом example.com, і у них є нормальне налаштування DHCP, це призведе
до того, що файл попереднього завантаження буде отримано з http://
autoserver.example.com/d-i/trixie/./preseed.cfg.

Остання частина цієї адреси (d-i/trixie/./preseed.cfg) береться з auto-install/
defaultroot. За замовчуванням, сюди входить каталог trixie, щоб у майбутніх
версіях можна було вказати власне кодове ім'я і дозволити людям мігрувати
вперед у контрольований спосіб. Біт /./ використовується для позначення кореня,
відносно якого можна прив'язати наступні шляхи (для використання у командах
preseed/include та preseed/run). Це дозволяє вказувати файли як повні
URL-адреси, шляхи, що починаються з /, які таким чином закріплюються, або
навіть шляхи відносно місця, де було знайдено останній попередньо завантажений
файл. Це може бути використано для створення більш портативних скриптів, коли
цілу ієрархію скриптів можна перемістити в нове місце, не порушуючи її,
наприклад, скопіювавши файли на USB-накопичувач, коли вони були запущені на веб
сервері. У цьому прикладі, якщо у файлі попереднього завантаження встановити
preseed/run у /scripts/late_command.sh, то файл буде отримано з http://
autoserver.example.com/d-i/trixie/./scripts/late_command.sh.

Якщо немає локальної інфраструктури DHCP або DNS, або якщо ви не хочете
використовувати шлях за замовчуванням до preseed.cfg, ви можете використовувати
явний URL, і якщо ви не використовуєте елемент /./, він буде прив'язаний до
початку шляху (тобто до третього / в URL-адресі). Ось приклад, який вимагає
мінімальної підтримки з боку локальної мережевої інфраструктури:

auto url=http://192.168.1.2/path/to/mypreseed.file

Це працює наступним чином:

  • якщо в URL-адресі відсутній протокол, вважається, що це http,

  • якщо секція імені хоста не містить крапок, то до нього додається домен,
    отриманий з DHCP, і

  • якщо після імені хоста немає символів /, то додається шлях за
    замовчуванням.

Окрім вказівки url, ви також можете вказати налаштування, які безпосередньо не
впливають на поведінку самого debian-installer, але можуть бути передані
скриптам, вказаним за допомогою preseed/run у завантаженому файлі пресета.
Наразі єдиним прикладом цього є auto-install/classes, який має псевдонім
classes. Це можна використовувати таким чином:

auto url=example.com classes=class_A;class_B

Класи можуть, наприклад, позначати тип системи, яку буде встановлено, або
локалізацію, яку буде використано.

Звичайно, можна розширити цю концепцію, і якщо ви це зробите, доцільно
використовувати для цього простір імен автоінсталяції. Таким чином, ви можете
мати щось на кшталт auto-install/style, який потім використовуватиметься у
ваших скриптах. Якщо ви вважаєте за потрібне це зробити, будь ласка, згадайте
про це у списку розсилки <debian-boot@lists.debian.org>, щоб ми могли уникнути
конфліктів просторів імен, і, можливо, додати псевдонім для параметра для вас.

Вибір завантаження auto ще не визначено на всіх арках. Того ж ефекту можна
досягти простим додаванням двох параметрів auto=true priority=critical до
командного рядка ядра. Параметр ядра auto є псевдонімом для auto-install/
enable, і його значення true затримує питання про локаль і клавіатуру доти,
доки не буде можливості їх попередньо встановити, а priority є псевдонімом для
debconf/priority і встановлення його у значення critical зупиняє будь-які
питання з нижчим пріоритетом.

Якщо вибрано автоматичне встановлення без визначення конфігурації попереднього
завантаження, користувачеві буде запропоновано вказати розташування
попереднього завантаження. Крім того, якщо було вказано конфігурацію
попереднього запуску, цей запит зазвичай пригнічується, щоб увімкнути повністю
неінтерактивне встановлення. Однак, якщо намір полягає в тому, щоб змінити
значення за замовчуванням за допомогою preseed.cfg в initrd, тоді результат
справді має поводитись так, ніби попереднього завантаження ще не було вказано,
навіть якщо воно було. У цьому випадку для змінної debconf auto-install/
cloak_initrd_preseed можна встановити значення true (наприклад, у preseed.cfg
initrd). щоб отримати необхідну поведінку.

Додаткові опції, які можуть представляти інтерес при спробі автоматизувати
установку при використанні DHCP, такі: interface=auto netcfg/dhcp_timeout=60 що
змушує машину вибирати першу-ліпшу мережеву карту і терплячіше чекати відповіді
на свій DHCP-запит.

Підказка

Великий приклад використання цього фреймворку, включаючи приклади скриптів і
класів, можна знайти на сайті його розробника. Приклади, доступні там, також
показують багато інших приємних ефектів, яких можна досягти, творчо
використовуючи попередню конфігурацію.

B.2.4. Псевдоніми, корисні для попередньої обробки

Наступні псевдоніми можуть бути корисними при використанні (автоматичного
режиму) попередньої обробки. Зверніть увагу, що це просто короткі псевдоніми
для назв запитань, і вам завжди потрібно вказувати значення: наприклад, auto=
true або interface=eth0.

пріоритет    debconf/priority
fb           debian-installer/framebuffer
автоматично  auto-install/enable
класи        auto-install/classes
файл         preseed/file
url          preseed/url
тема         debian-installer/theme
мова         debian-installer/language
країна       debian-installer/country
локаль       debian-installer/locale
мапа клавіш  keyboard-configuration/xkb-keymap
модулі       anna/choose_modules
прошивка     hw-detect/firmware-lookup
інтерфейс    netcfg/choose_interface
домен        netcfg/get_domain
hostname     netcfg/get_hostname
протокол     дзеркало/протокол
набір        дзеркало/набір
рекомендації base-installer/install-recommends
завдання     tasksel:tasksel/first
робочий стіл tasksel:tasksel/desktop
preseed-md5  preseed/file/checksum

B.2.5. Приклади попереднього завантаження завантажувального запиту

Ось кілька прикладів того, як може виглядати запрошення до завантаження (вам
потрібно буде адаптувати його до ваших потреб); див. також Розділ 5.1.5, «Екран
завантаження»).

# Встановити французьку мову як мову та Францію як країну:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=fr country=FR --- quiet
# Щоб вибрати англійську мову як мову і Німеччину як країну, а також використовувати німецьку розкладку клавіатури:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz language=en country=DE locale=en_US.UTF-8 keymap=de --- quiet
# Щоб встановити робочий стіл MATE:
/install.amd/vmlinuz vga=788 initrd=/install.amd/gtk/initrd.gz desktop=mate-desktop --- quiet
# Щоб встановити веб-сервер завдання:
/install.amd/vmlinuz initrd=/install.amd/initrd.gz tasksel:tasksel/first=web-server ---

B.2.6. Використання DHCP-сервера для вказівки файлів попередньої конфігурації

Також можна використовувати DHCP, щоб вказати файл попередньої конфігурації для
завантаження з мережі. DHCP дозволяє вказати ім'я файлу. Зазвичай це файл для
мережевого завантаження, але якщо це URL-адреса, то інсталяційні носії, які
підтримують мережеве попереднє завантаження, завантажать файл з URL-адреси і
використають його як файл попередньої конфігурації. Ось приклад налаштування у
файлі dhcpd.conf для версії 3 DHCP-сервера ISC (пакунок isc-dhcp-server
Debian).

якщо підрядок (опція vendor-class-identifier, 0, 3) = "d-i" {
    назва файлу "http://host/preseed.cfg";
}

Зауважте, що у наведеному вище прикладі це ім'я файла обмежується
DHCP-клієнтами, які ідентифікують себе як «d-i», тому воно не вплине на
звичайних DHCP-клієнтів, а лише на програму встановлення. Ви також можете
помістити текст у строфу лише для одного конкретного хоста, щоб уникнути
попереднього завантаження всіх інсталяцій у вашій мережі.

Хорошим способом використання попереднього встановлення DHCP є встановлення
лише значень, характерних для вашої мережі, наприклад, дзеркала Debian. Таким
чином, при встановленні у вашій мережі буде автоматично вибрано хороше
дзеркало, але решту інсталяції можна виконати інтерактивно. Використання
попереднього встановлення DHCP для повної автоматизації встановлення Debian
слід використовувати з обережністю.

B.3. Створення файлу попередньої конфігурації

Файл попередньої конфігурації має формат, який використовується командою 
debconf-set-selections. Загальний формат рядка у файлі попередньої конфігурації
наступний:

<власник> <назва питання> <тип питання> <значення>

Файл повинен починатися з #_preseed_V1

Існує декілька правил, про які слід пам'ятати при написанні файлу попередньої
конфігурації.

  • Між типом і значенням має бути лише один пробіл або знак табуляції:
    будь-який додатковий пробіл буде інтерпретовано як такий, що належить
    значенню.

  • Рядок можна розбити на кілька рядків, додавши зворотну косу риску («\») як
    символ продовження рядка. Хороше місце для розділення рядка - після назви
    питання; погане місце - між типом і значенням. Розділені рядки будуть
    з'єднані в один рядок з усіма початковими/кінцевими пробілами до одного
    пробілу.

  • Для змінних (шаблонів) debconf, що використовуються лише у самій програмі
    встановлення, слід вказати власника «d-i»; для змінних, що використовуються
    у встановленій системі, слід вказати назву пакунка, який містить
    відповідний шаблон debconf. До бази даних debconf для встановленої системи
    буде передано лише ті змінні, власник яких не є «d-i».

  • Більшість запитань потрібно попередньо вводити, використовуючи значення,
    дійсні в англійській мові, а не перекладені. Однак є деякі питання
    (наприклад, у partman), де потрібно використовувати перекладені значення.

  • Деякі питання приймають в якості значення код замість англійського тексту,
    який показується під час інсталяції.

  • Почати з #_preseed_V1

  • Коментар складається з рядка, який починається з хеш-символу («#») і
    продовжується до довжини цього рядка.

Найпростіший спосіб створити файл попередньої конфігурації - взяти за основу
файл прикладу, на який є посилання в Розділ B.4, «Вміст файлу попередньої
конфігурації (для trixie)», і працювати з ним.

Альтернативним методом є ручне встановлення, а потім, після перезавантаження,
скористайтеся командою debconf-get-selections з пакунка debconf-utils, щоб
створити дамп бази даних debconf і бази даних програми встановлення cdebconf в
один файл:

$ echo "#_preseed_V1" > file
$ debconf-get-selections --installer >> file
$ debconf-get-selections >> file

Однак, створений таким чином файл міститиме деякі елементи, які не слід
попередньо вносити, і для більшості користувачів краще починати з
файлу-прикладу.

Примітка

Цей метод ґрунтується на тому, що наприкінці встановлення база даних cdebconf
програми встановлення зберігається у встановленій системі у /var/log/installer/
cdebconf. Однак, оскільки база даних може містити конфіденційну інформацію, за
замовчуванням файли доступні для читання лише користувачеві root.

Каталог /var/log/installer і всі файли у ньому буде видалено з вашої системи,
якщо ви очистите пакунок installation-report.

Щоб перевірити можливі значення питань, ви можете скористатися командою nano
для перегляду файлів у /var/lib/cdebconf під час інсталяції. Перегляньте
templates.dat для сирих шаблонів і questions.dat для поточних значень і
значень, присвоєних змінним.

Щоб перевірити правильність формату файлу попередньої конфігурації перед
виконанням встановлення, ви можете скористатися командою debconf-set-selections
-c preseed.cfg.

B.4. Вміст файлу попередньої конфігурації (для trixie)

Фрагменти конфігурації, використані у цьому додатку, також доступні як приклад
файлу попередньої конфігурації з ../example-preseed.txt.

Зверніть увагу, що цей приклад базується на встановленні для архітектури Intel
x86. Якщо ви встановлюєте іншу архітектуру, деякі з прикладів (наприклад, вибір
клавіатури та встановлення завантажувача) можуть бути неактуальними і їх слід
замінити налаштуваннями debconf, що відповідають вашій архітектурі.

Докладні відомості про те, як насправді працюють різні компоненти програми
встановлення Debian, можна знайти у Розділ 6.3, «Використання окремих
компонентів».

B.4.1. Локалізація

Під час звичайного встановлення питання про локалізацію ставляться першими,
тому ці значення можна попередньо вказати лише за допомогою методів initrd або
параметрів завантаження ядра. Автоматичний режим (Розділ B.2.3, «Автоматичний
режим») передбачає встановлення auto-install/enable=true (зазвичай через
псевдонім auto preseed). Це затримує постановку питань про локалізацію, щоб їх
можна було попередньо задати будь-яким методом.

Локалізацію можна використовувати для вказівки як мови, так і країни, і це може
бути будь-яка комбінація мови, що підтримується debian-installer, і визнаної
країни. Якщо комбінація не утворює правильну локаль, програма встановлення
автоматично вибере локаль, яка є правильною для вибраної мови. Щоб вказати
локаль як параметр завантаження, використовуйте locale=en_US.UTF-8.

Хоча цей метод дуже простий у використанні, він не дозволяє попередньо вказати
усі можливі комбінації мови, країни та локалі^[20]. Крім того, значення можуть
бути попередньо задані індивідуально. Мова та країна також можуть бути вказані
як параметри завантаження.

# Попередній вибір тільки локалі задає мову, країну та локаль.
d-i debian-installer/locale string en_US.UTF-8

# Для більшої гнучкості значення можуть бути задані індивідуально.
#d-i debian-installer/language string en
#d-i debian-installer/country string NL
#d-i debian-installer/locale string en_GB.UTF-8
# За бажанням вкажіть додаткові локалі, які потрібно згенерувати.
#d-i localechooser/supported-locales multiselect en_US.UTF-8, nl_NL.UTF-8

Конфігурація клавіатури складається з вибору розкладки і (для нелатинських
розкладок) клавіші перемикання між нелатинською і американською розкладками.
Під час інсталяції доступні лише базові варіанти розкладки клавіш. Розширені
варіанти доступні лише у встановленій системі, за допомогою dpkg-reconfigure
keyboard-configuration.

# Вибір клавіатури.
d-i keyboard-configuration/xkb-keymap select us
# d-i keyboard-configuration/toggle select No toggling

Щоб пропустити конфігурацію клавіатури, задайте keymap з skip-config. Це
призведе до того, що карта клавіш ядра залишиться активною.

B.4.2. Синтез мовлення

Під час інсталяції з програмним синтезом мовлення (напр. у командному рядку
ядра додано speakup.synth=soft), можна задати голос та звукову плату.

Оскільки синтез мовлення запускається на ранньому етапі, його можна активувати
лише з initrd або з командного рядка ядра.

Завчасне використання espeakup/voice також дає можливість налаштування
встановленої системи за допомогою мовних функцій доступності. Це працює, навіть
якщо програмний синтез мовлення не був увімкнений в інсталяторі.

# Яку карту ALSA використовувати для програмного мовлення.
# Може бути числом від 0 або ID з вказаного у
# /sys/class/sound/card*/id
#d-i espeakup/card string 0

# Який голос espeak-ng використовувати
#d-i espeakup/voice string en

B.4.3. Конфігурація мережі

Звичайно, попереднє завантаження мережевої конфігурації не працюватиме, якщо ви
завантажуєте файл попередньої конфігурації з мережі. Але це чудово, коли ви
завантажуєтеся з оптичного диска або USB-накопичувача. Якщо ви завантажуєте
файли попередньої конфігурації з мережі, ви можете передати параметри
конфігурації мережі за допомогою параметрів завантаження ядра.

Якщо вам потрібно вибрати певний інтерфейс під час мережевого завантаження
перед завантаженням файлу попередньої конфігурації з мережі, використовуйте
параметр завантаження, наприклад, interface=eth1.

Хоча попереднє встановлення конфігурації мережі зазвичай неможливе при
використанні мережевого попереднього встановлення (за допомогою «preseed/url»),
ви можете скористатися наведеним нижче хакерським прийомом, щоб обійти цю
проблему, наприклад, якщо ви хочете встановити статичну адресу для мережевого
інтерфейсу. Злом полягає в тому, щоб змусити мережеву конфігурацію запуститися
знову після завантаження файлу попередньої конфігурації, створивши скрипт «
preseed/run», що містить наступні команди:

kill-all-dhcp; netcfg

Наступні змінні debconf стосуються конфігурації мережі.

# Повністю вимкнути конфігурацію мережі. Це корисно для cdrom
# встановлення на немережевих пристроях, де виникають проблеми з мережею,
# попередження та довгі таймаути є неприємністю.
#d-i netcfg/enable boolean false

# netcfg вибере інтерфейс, який має посилання, якщо це можливо. Це дозволяє
# пропустити відображення списку, якщо існує більше одного інтерфейсу.
d-i netcfg/choose_interface select auto

# Щоб вибрати певний інтерфейс замість цього:
#d-i netcfg/choose_interface select eth1

# Встановити інший тайм-аут виявлення посилання (за замовчуванням - 3 секунди).
# Значення інтерпретуються в секундах.
#d-i netcfg/link_wait_timeout string 10

# Якщо у вас повільний dhcp-сервер і програма встановлення зависає в очікуванні
# його, це може бути корисним.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# Автоматична конфігурація мережі за замовчуванням.
# Якщо ви бажаєте налаштувати мережу вручну, видаліть цей рядок і
# статичну конфігурацію мережі нижче.
#d-i netcfg/disable_autoconfig boolean true

# Якщо ви хочете, щоб файл попередньої конфігурації працював на системах як із сервером, так і без нього
# без dhcp-сервера, розкоментуйте ці рядки і статичну мережеву
# конфігурацію мережі нижче.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Статична конфігурація мережі.
#
# Приклад IPv4
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# Приклад IPv6
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Будь-які імена хостів та доменів, призначені з dhcp, мають пріоритет над
# значеннями, заданими тут. Втім, встановлення значень все одно запобігає показу запитань
# не будуть показані, навіть якщо значення отримано з dhcp.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# Якщо ви хочете примусово визначити ім'я хоста, незалежно від того, що повертає сервер DHCP
# повертає сервер DHCP, або зворотний запис DNS для IP-адреси, видаліть коментар
# і відкоригуйте наступний рядок.
#d-i netcfg/hostname string somehost

# Вимкніть набридливе діалогове вікно з ключем WEP.
d-i netcfg/wireless_wep string
# Дивакувате ім'я хоста dhcp, яке деякі провайдери використовують як своєрідний пароль.
#d-i netcfg/dhcp_hostname string radish

# Якщо ви хочете повністю вимкнути пошук прошивок (тобто не використовувати прошивки
# файли або пакунки, які можуть бути наявні в інсталяційних образах):
#d-i hw-detect/firmware-lookup string never

# Якщо для мережі або іншого обладнання потрібне невільне програмне забезпечення, ви можете
# налаштувати програму встановлення так, щоб вона завжди намагалася завантажити її без запиту. Або
# змініть на false, щоб вимкнути запит.
#d-i hw-detect/load_firmware boolean true

Зверніть увагу, що netcfg автоматично визначить маску мережі, якщо не вказано
попередньо netcfg/get_netmask. У цьому випадку, змінна має бути позначена як
seen для автоматичного встановлення. Аналогічно, netcfg вибере відповідну
адресу, якщо netcfg/get_gateway не задано. Як окремий випадок, ви можете
встановити netcfg/get_gateway у «none», щоб вказати, що не слід використовувати
жодного шлюзу.

B.4.4. Мережева консоль

# Якщо ви бажаєте використовувати мережеву консоль, використовуйте наступні налаштування
# компонент для віддаленого встановлення по SSH. Це має сенс лише у тому випадку, якщо ви
# маєте намір виконати решту встановлення вручну.
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme

Додаткову інформацію про мережеву консоль можна знайти за посиланням
Розділ 6.3.10, «Встановлення через мережеву консоль».

B.4.5. Дзеркальні налаштування

Залежно від методу встановлення, який ви використовуєте, дзеркало може бути
використано для завантаження додаткових компонентів програми встановлення,
встановлення базової системи та налаштування /etc/apt/sources.list для
встановленої системи.

Параметр mirror/suite визначає набір для встановленої системи.

Параметр mirror/udeb/suite визначає набір додаткових компонентів для програми
встановлення. Цей параметр корисно встановлювати, лише якщо компоненти фактично
завантажуються через мережу, і він має відповідати набору, який було
використано для створення initrd для методу встановлення, який було використано
під час встановлення. Зазвичай програма встановлення автоматично використовує
правильне значення, і вам не потрібно його налаштовувати.

# Дзеркальний протокол:
# Якщо ви вибрали ftp, рядок дзеркало/країна не потрібно вказувати.
# Значення за замовчуванням для дзеркального протоколу: http.
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string http.us.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Набір для встановлення.
#d-i mirror/suite string testing
# Набір для завантаження компонентів інсталятора (необов'язково).
#d-i mirror/udeb/suite string testing

B.4.6. Налаштування облікового запису

Пароль для облікового запису root, а також ім'я та пароль для першого
облікового запису звичайного користувача можуть бути задані заздалегідь. Для
паролів ви можете використовувати як відкриті текстові значення, так і crypt(3)
хеші.

Застереження

Пам'ятайте, що попереднє встановлення паролів не є повністю безпечним, оскільки
кожен, хто має доступ до файлу попередньої конфігурації, буде знати ці паролі.
Зберігання хешованих паролів вважається безпечним, якщо не використовується
слабкий алгоритм хешування, такий як DES або MD5, які дозволяють здійснювати
атаки грубою силою. Рекомендовані алгоритми хешування паролів - SHA-256 та
SHA512.

# Пропустити створення облікового запису root (звичайний користувач зможе
# використовувати sudo).
#d-i passwd/root-login boolean false
# Або пропустити створення звичайного облікового запису користувача.
#d-i passwd/make-user boolean false

# Кореневий пароль, або відкритим текстом
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# or encrypted using a crypt(3)  hash.
#d-i passwd/root-password-crypted password [crypt(3) hash]

# Створити звичайний обліковий запис користувача.
#d-i passwd/user-fullname string Debian User
#d-i passwd/username string debian
# Звичайний пароль користувача, або відкритим текстом
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# or encrypted using a crypt(3) hash.
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Створити першого користувача з вказаним UID замість стандартного.
#d-i passwd/user-uid string 1010

# Обліковий запис користувача буде додано до деяких стандартних початкових груп. Щоб
# перевизначити це, використовуйте це.
#d-i passwd/user-default-groups string audio cdrom video

Змінні passwd/root-password-crypted і passwd/user-password-crypted також можуть
бути задані з «!» як їх значення. У такому випадку, відповідний обліковий запис
буде вимкнено. Це може бути зручно для облікового запису root, якщо, звісно,
налаштовано альтернативний метод, який дозволяє адміністративні дії або вхід у
систему від імені користувача root (наприклад, за допомогою автентифікації за
допомогою ключа SSH або sudo).

Наступна команда (доступна у пакунку whois) може бути використана для створення
хешу пароля на основі SHA-512 за алгоритмом crypt(3):

mkpasswd -m sha-512

B.4.7. Налаштування годинника та часового поясу

# Контролює, чи встановлено апаратний годинник на UTC чи ні.
d-i clock-setup/utc boolean true

# Ви можете встановити будь-яке допустиме значення для $TZ; див. вміст файлу
# /usr/share/zoneinfo/ для отримання допустимих значень.
d-i time/zone string US/Eastern

# Дозволяє вказати, чи використовувати NTP для встановлення годинника під час встановлення
d-i clock-setup/ntp boolean true
# Сервер NTP для використання. За замовчуванням тут майже завжди все гаразд.
#d-i clock-setup/ntp-server string ntp.example.com

B.4.8. Розбиття на розділи

Використання попереднього розбиття на розділи жорсткого диска обмежується тим,
що підтримується partman-auto. Ви можете розбити на розділи як наявний вільний
простір на диску, так і весь диск. Структура диска може бути визначена за
допомогою попередньо визначеного рецепта, користувацького рецепта з файлу
рецептів або рецепта, включеного до файлу попередньої конфігурації.

Підтримується попереднє створення розширених налаштувань розділів за допомогою
RAID, LVM і шифрування, але не з повною гнучкістю, можливою при створенні
розділів під час інсталяції без попереднього створення розділів.

Наведені нижче приклади надають лише базову інформацію про використання
рецептів. Докладні відомості наведено у файлах partman-auto-recipe.txt і
partman-auto-raid-recipe.txt, що входять до складу пакунка debian-installer.
Обидва файли також доступні з debian-installer репозиторію вихідних текстів.
Зверніть увагу, що підтримувана функціональність може змінюватися між
випусками.

Застереження

Ідентифікація дисків залежить від порядку завантаження їхніх драйверів. Якщо в
системі є кілька дисків, переконайтеся, що вибрано правильний диск, перш ніж
використовувати попередню підготовку.

B.4.8.1. Приклад розбиття на розділи

# Якщо у системі є вільне місце, Ви можете розділити лише цей простір.
# Це правило виконується лише якщо не задано partman-auto/method (нижче).
#d-i partman-auto/init_automatically_partition select biggest_free

# Крім того, Ви можете вказати диск для розподілу на розділи. Якщо у системі є лише
# один диск, програма встановлення стандартно використовуватиме його, в іншому разі
# потрібно вказати назву пристрою у традиційному, не devfs форматі (тобто, скажімо, /dev/sda
# а не, наприклад, /dev/discs/disc0/disc).
# Таким чином, для використання першого жорсткого диска SCSI/SATA:
#d-i partman-auto/disk string /dev/sda
# Крім того, Вам потрібно буде вказати метод, який буде використовуватися.
# Зараз доступні такі методи:
# - regular: використовувати звичайні типи розділів для Вашої архітектури
# - lvm:     використовувати LVM для розподілу диска на розділи
# - crypto:  використовувати LVM всередині зашифрованого розділу
d-i partman-auto/method string lvm

# Ви можете вказати обсяг простору, який буде використаний для групи томів LVM.
# Це може бути розмір з одиницею виміру (наприклад, 20 ГБ), відсоток від
# вільного місця або ключове слово 'max'.
d-i partman-auto-lvm/guided_size string max

# Якщо один з дисків, які заплановані для автоматичного розподілу на розділи
# містить стару конфігурацію LVM, користувач як правило отримає
# попередження. Це можна також опрацювати...
d-i partman-lvm/device_remove_lvm boolean true
# Те саме стосується вже наявних програмних RAID-масивів:
d-i partman-md/device_remove_md boolean true
# Також це стосується підтвердження запису розділів lvm.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# Ви можете вибрати один із трьох попередньо визначених планів (рецептів) розподілу:
# - atomic: всі файли в одному розділі
# - home:   виокремити розділ /home
# - multi:  виокремити розділи /home, /var, та /tmp
# - сервер: окремі розділи /var і /srv; обмін обмежено 1G
# - small_disk: схема, призначена для малих жорстких дисків (до 10 ГБ)

d-i partman-auto/choose_recipe select atomic

# Або надайте власний рецепт...
# Якщо у Вас є спосіб отримати файл рецептів у середовищі d-i, Ви можете
# просто вказати на нього.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# Якщо немає, можете помістити весь рецепт у файл попередньої конфігурації одним
# (логічним) рядком. У цьому прикладі створюється невеликий розділ /boot, придатний для
# свопу, а решта простору використовується для кореневого розділу:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# Повний формат рецептів (планів розподілу) задокументовано у файлі partman-auto-recipe.txt
# який входить до складу пакунка 'debian-installer' або доступний з репозиторію вихідного
# коду D-I. У ньому також описано, як вказати такі параметри, як файлові
# системні мітки, назви груп томів та які фізичні пристрої слід включити
# до групи томів.

## Створення розділів для EFI
# Якщо Вашій системі потрібен розділ EFI, Ви можете додати до наведеного вище рецепта
# щось на кшталт цього, як перший елемент рецепта:
#               538 538 1075 free                              \
#                      $iflabel{ gpt }                         \
#                      $reusemethod{ }                         \
#                      method{ efi }                           \
#                      format{ }                               \
#               .                                              \
#
# Наведений вище фрагмент стосується архітектури amd64; для інших
# архітектур деталі можуть відрізнятися. Пакунок 'partman-auto' у репозиторії коду
# D-I може містити приклад, який Ви можете використати.

# Це дозволить partman автоматично розбивати розділи без підтвердження, за умови,
# що Ви вказали йому що робити одним з наведених вище способів.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# Примусове завантаження UEFI (сумісність з BIOS буде втрачено). Стандартно: false.
#d-i partman-efi/non_efi_system boolean true
# Переконайтеся, що таблиця розділів у форматі GPT -- це необхідно для EFI
#d-i partman-partitioning/choose_label select gpt
#d-i partman-partitioning/default_label string gpt

# Якщо увімкнено шифрування диска, пропустити попереднє витирання розділів.
#d-i partman-auto-crypto/erase_disks boolean false

B.4.8.2. Розбиття на розділи завдяки RAID

Ви також можете використовувати попередню підготовку для створення розділів на
програмних RAID-масивах. Підтримуються рівні RAID 0, 1, 5, 6 і 10, створення
погіршених масивів і вказівка запасних пристроїв.

Якщо ви використовуєте RAID 1, ви можете попередньо завантажити grub для
встановлення на всі пристрої, що використовуються в масиві; див. Розділ B.4.12,
«Інсталяція завантажувача».

Застереження

Цей тип автоматичного розбиття на розділи може легко помилятися. Це також
функціональність, яка отримує відносно мало тестування від розробників
debian-installer. Відповідальність за правильне використання різних рецептів
(щоб вони мали сенс і не суперечили один одному) лежить на користувачеві.
Перевірте /var/log/syslog, якщо у вас виникли проблеми.

# Метод має бути встановлений на "рейд".
#d-i partman-auto/method string raid
# Вкажіть диски для розбиття на розділи. Усі вони отримають однакове розташування,
# тому це спрацює лише якщо диски однакового розміру.
#d-i partman-auto/disk string /dev/sda /dev/sdb

# Далі потрібно вказати фізичні розділи, які будуть використовуватися.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Наостанок потрібно вказати, як раніше визначені розділи
# будуть використовуватися при створенні RAID. Не забувайте використовувати правильні номери розділів
# для логічних розділів. Підтримуються рівні RAID 0, 1, 5, 6 і 10;
# пристрої розділяються за допомогою "#".
# Параметри такі:
# <raidtype> <devcount> <sparecount> <fstype> <mountpoint> \
#          <devices> <sparedevices>

#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Додаткову інформацію наведено у файлі partman-auto-raid-recipe.txt
# входить до складу пакунка 'debian-installer' або доступний у джерелі D-I
# сховища.

# Це змушує partman автоматично створювати розділи без підтвердження.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

B.4.8.3. Керування монтуванням розділів

Зазвичай, файлові системи монтуються з використанням універсального унікального
ідентифікатора (UUID) як ключа; це дозволяє монтувати їх належним чином, навіть
якщо ім'я пристрою змінюється. UUID довгі і їх важко читати, тому, якщо ви
бажаєте, програма встановлення може змонтувати файлові системи на основі
традиційних назв пристроїв або на основі мітки, яку ви призначите. Якщо ви
попросите програму встановлення змонтувати за міткою, будь-які файлові системи
без мітки буде змонтовано з використанням UUID.

Пристрої зі стабільними іменами, такі як логічні томи LVM, і надалі
використовуватимуть свої традиційні імена, а не UUID.

Застереження

Традиційні назви пристроїв можуть змінюватися залежно від порядку, у якому ядро
виявляє пристрої під час завантаження, що може призвести до монтування
неправильної файлової системи. Аналогічно, мітки можуть зіткнутися, якщо ви
під'єднаєте новий диск або USB-накопичувач, і якщо це станеться, поведінка
вашої системи під час запуску буде випадковою.

# За замовчуванням монтувати за UUID, але ви також можете вибрати параметр "традиційний", щоб
# використовувати традиційні назви пристроїв або "label", щоб спробувати мітки файлової системи перед тим, як
# повернутися до UUID.
#d-i partman/mount_style select uuid

B.4.9. Установка базової системи

Насправді не так вже й багато можна попередньо обробити на цьому етапі
інсталяції. Єдині запитання стосуються встановлення ядра.

# Налаштуйте APT так, щоб за замовчуванням не встановлювати рекомендовані пакунки.
# опція може призвести до неповноти системи і має використовуватися лише дуже
# досвідченими користувачами.
#d-i base-installer/install-recommends boolean false

# Пакунок образу ядра (мета), який потрібно встановити; можна використати "none", якщо не потрібно встановлювати жодного пакунка
# ядро не буде встановлено.
#d-i base-installer/kernel/image string linux-image-686

B.4.10. Apt setup

Налаштування /etc/apt/sources.list та основних параметрів конфігурації повністю
автоматизовано на основі вашого методу встановлення та відповідей на попередні
запитання. За бажанням ви можете додати інші (локальні) сховища.

# Виберіть, якщо хочете відсканувати додаткові інсталяційні носії
# (за замовчуванням: false).
d-i apt-setup/cdrom/set-first boolean false
# Ви можете встановити невільну прошивку.
#d-i apt-setup/non-free-firmware boolean true
# Ви можете встановити як платне, так і безплатне програмне забезпечення.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Якщо ви не бажаєте використовувати sources.list, не коментуйте наступний рядок
# запис для інсталяційного образу DVD/BD, активного у встановленій системі
# (записи для netinst або образів компакт-дисків буде вимкнено у будь-якому випадку, незалежно від
# цього параметра).
#d-i apt-setup/disable-cdrom-entries boolean true
# Не коментуйте це, якщо ви не хочете використовувати мережеве дзеркало.
#d-i apt-setup/use_mirror boolean false
# Виберіть, які служби оновлення використовувати; визначте дзеркала, які будуть використовуватися.
# Значення, наведені нижче, є стандартними значеннями за замовчуванням.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Додаткові сховища, доступно local[0-9]
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Увімкнути рядки deb-src
#d-i apt-setup/local0/source boolean true
# URL-адресу публічного ключа локального сховища; ви повинні надати ключ або
# apt поскаржиться на неавторизований репозиторій і тому
# рядок sources.list буде залишено без коментарів.
#d-i apt-setup/local0/key string http://local.server/key
# або ж можна передати його в рядку, закодувавши вміст файлу в base64
# ключовий файл (з `base64 -w0`) і вказавши його таким чином:
#d-i apt-setup/local0/key string base64://LS0tLS1CRUdJTiBQR1AgUFVCTElDIEtFWSBCTE9DSy0tLS0tCi4uLgo=
# Вміст файлу ключа перевіряється на наявність ASCII-захисту.
# Якщо так, то його буде збережено з розширенням ".asc", інакше він отримає розширення ".gpg".
# формат "keybox database" наразі не підтримується. (див. generators/60local у джерелі apt-setup).

# За замовчуванням програма встановлення вимагає автентифікації сховищ
# за допомогою відомого ключа gpg. За допомогою цього параметра можна вимкнути цю
# автентифікацію. Попередження: Небезпечно, не рекомендовано.
#d-i debian-installer/allow_unauthenticated boolean true

# Зніміть коментар, щоб додати багатоаркову конфігурацію для i386
#d-i apt-setup/multiarch string i386


B.4.11. Вибір пакета

Ви можете встановити будь-яку комбінацію доступних завдань. На момент написання
доступні наступні завдання:

  • standard (стандартні інструменти)

  • desktop (графічний робочий стіл)

  • gnome-desktop (робочий стіл Gnome)

  • xfce-desktop (робочий стіл XFCE)

  • kde-desktop (робочий стіл KDE Plasma)

  • cinnamon-desktop (робочий стіл Cinnamon)

  • mate-desktop (робочий стіл MATE)

  • lxde-desktop (робочий стіл LXDE)

  • web-server (веб сервер)

  • ssh-server (SSH сервер)

Ви також можете не встановлювати жодних завдань і примусово встановити набір
пакунків у інший спосіб. Ми рекомендуємо завжди включати завдання standard.

Або якщо ви не хочете, щоб діалогове вікно tasksel було показано взагалі,
задайте pkgsel/run_tasksel (у цьому випадку пакунки не буде встановлено за
допомогою tasksel).

Якщо ви хочете встановити деякі окремі пакунки на додаток до пакунків,
встановлених за допомогою завдань, ви можете скористатися параметром pkgsel/
include. Значенням цього параметра може бути список пакунків, розділених комами
або пробілами, що дозволяє легко використовувати його і у командному рядку
ядра.

#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Або ви можете взагалі не показувати діалогове вікно панелі завдань (і не встановлювати
# жодних пакунків):
#d-i pkgsel/run_tasksel boolean false

# Окремі додаткові пакунки для встановлення
#d-i pkgsel/include string openssh-server build-essential
# Чи оновлювати пакунки після debootstrap.
# Допустимі значення: немає, безпечне оновлення, повне оновлення
#d-i pkgsel/upgrade select none

# Ви можете вибрати, чи буде ваша система звітувати про те, яке програмне забезпечення у вас
# встановлено, і яке програмне забезпечення ви використовуєте. За замовчуванням звіти не надсилаються,
# але надсилання звітів допомагає проєкту визначити, яке програмне забезпечення є найбільш
# популярне і має бути включене до першого DVD.
#popularity-contest popularity-contest/participate boolean false

B.4.12. Інсталяція завантажувача

# Grub - це завантажувач (для x86).

# Це досить безпечний параметр, який змушує grub автоматично встановлюватися на UEFI
# запис розділу/запису завантаження, якщо на комп'ютері не виявлено жодної іншої операційної системи.
d-i grub-installer/only_debian boolean true

# Цей параметр змушує grub-installer встановлюватися до розділу/запису завантаження UEFI, якщо
# він також знайде іншу ОС, що є менш безпечним, оскільки він не зможе
# завантажити цю іншу ОС.
d-i grub-installer/with_other_os boolean true

# Через потенційні USB-накопичувачі розташування основного диска
# не може бути визначено безпечно, тому його потрібно вказати:
#d-i grub-installer/bootdev  string /dev/sda
# Для встановлення на основний пристрій (за умови, що це не флешка):
#d-i grub-installer/bootdev  string default

# Крім того, якщо ви хочете встановити в інше місце, ніж UEFI
# розділу/запису завантаження, розкоментуйте та відредагуйте ці рядки:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# Щоб встановити grub на кілька дисків:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Необов'язковий пароль для grub, або відкритим текстом
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# або зашифровані за допомогою хешу MD5, див. grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [MD5 hash]

# За допомогою цього параметра можна додати додаткові параметри завантаження для
# встановленої системи (якщо підтримується програмою встановлення завантажувача).
# Примітка: опції, передані програмі встановлення, буде додано автоматично.
#d-i debian-installer/add-kernel-opts string nousb

MD5 хеш пароля для grub можна згенерувати за допомогою grub-md5-crypt, або за
допомогою команди з прикладу в Розділ B.4.6, «Налаштування облікового запису».

B.4.13. Завершення установки

# Під час встановлення з послідовної консолі звичайні віртуальні консолі
# (VT1-VT6) зазвичай вимкнено у файлі /etc/inittab. Розкоментуйте наступний
# рядок, щоб запобігти цьому.
#d-i finish-install/keep-consoles boolean true

# Уникайте останнього повідомлення про завершення встановлення.
d-i finish-install/reboot_in_progress note

# Це не дозволить програмі встановлення витягти диск під час перезавантаження,
# що може бути корисним у деяких ситуаціях.
#d-i cdrom-detect/eject boolean false

# Ось як зробити так, щоб програма встановлення завершувала роботу після завершення, але не
# перезавантажилася у встановлену систему.
#d-i debian-installer/exit/halt boolean true
# Це вимкне машину замість того, щоб просто зупинити її.
#d-i debian-installer/exit/poweroff boolean true

B.4.14. Попередня підготовка інших пакунків

# Залежно від того, яке програмне забезпечення ви вирішили встановити, або якщо щось піде не так
# під час процесу встановлення, можливо,
# виникнуть інші запитання. Звичайно, їх теж можна попередньо підготувати. Щоб отримати список всіх
# можливих запитань, які можуть виникнути під час встановлення, виконайте
# встановлення, а потім виконайте ці команди:
#   debconf-get-selections --installer > file
#   debconf-get-selections >> file

B.5. Додаткові опції

B.5.1. Запуск користувацьких команд під час встановлення

Дуже потужною і гнучкою опцією, яку пропонують інструменти попередньої
конфігурації, є можливість запуску команд або скриптів у певні моменти
інсталяції.

Коли файлову систему цільової системи змонтовано, вона стає доступною у /
target. Якщо використовується інсталяційний CD/DVD, після монтування він буде
доступний у /cdrom.

# d-i попередньої обробки за своєю суттю не є безпечним. Ніщо у програмі встановлення не перевіряє
# на спроби переповнення буфера або інших зловживань значеннями
# файлу попередньої конфігурації, подібного до цього. Використовуйте файли попередньої конфігурації тільки з
# перевірених місць! Щоб довести це до домашнього використання, і тому що це взагалі корисно,
# ось спосіб запустити будь-яку потрібну вам команду у командному рядку інсталятора,
# автоматично.

# Ця перша команда виконується якомога раніше, одразу після того, як
# зчитано попередньо.
#d-i preseed/early_command string anna-install some-udeb
# Ця команда виконується безпосередньо перед запуском утиліти. Може бути
# корисно застосувати динамічну попередню установку розділів, яка залежить від стану
# дисків (який може бути невидимим під час виконання команди preseed/early_command).
#d-i partman/early_command \
#       string debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
# Ця команда виконується безпосередньо перед завершенням встановлення, але за наявності
# ще є придатний для використання каталог /target. Ви можете вкорінитись у /target і використовувати його
# безпосередньо, або скористатися командами apt-install і in-target, щоб легко встановити
# пакунки та запуск команд у цільовій системі.
#d-i preseed/late_command string apt-install zsh; in-target chsh -s /bin/zsh

B.5.2. Використання попередньої обробки для зміни значень за замовчуванням

Ви можете використовувати попередній вибір, щоб змінити відповідь за
замовчуванням для запитання, але все одно поставити запитання. Для цього
прапорець seen має бути скинутий на «false» після встановлення значення для
запитання.

d-i foo/bar string value
d-i foo/bar seen false

Такого ж ефекту можна досягти для запитань all, задавши параметр preseed/
interactive=true у запрошенні до завантаження. Це також може бути корисно для
тестування або налагодження вашого файлу попередньої конфігурації.

Зауважте, що власник «d-i» слід використовувати лише для змінних, які
використовуються у самій програмі встановлення. Для змінних, що належать до
пакунків, встановлених у цільовій системі, слід використовувати назву цього
пакунка. Дивіться виноску до Розділ B.2.2, «Використання параметрів
завантаження для попереднього вибору питань».

Якщо ви виконуєте попереднє встановлення за допомогою параметрів завантаження,
ви можете змусити програму встановлення поставити відповідне запитання за
допомогою оператора «?=», наприклад foo/bar?=value (або owner:foo/bar?=value).
Звичайно, це матиме ефект лише для параметрів, які відповідають питанням, що
фактично відображаються під час інсталяції, а не для «внутрішніх» параметрів.

Для отримання додаткової інформації про налагодження, використовуйте параметр
завантаження DEBCONF_DEBUG=5. Це призведе до того, що debconf надрукує значно
детальнішу інформацію про поточні налаштування кожної змінної та про хід
виконання сценаріїв встановлення кожного пакунка.

B.5.3. Ланцюгове завантаження файлів попередньої конфігурації

Можна включити інші файли попередньої конфігурації з файлу попередньої
конфігурації. Будь-які налаштування в цих файлах замінять попередні
налаштування з файлів, завантажених раніше. Це дозволяє, наприклад, зберігати
загальні мережеві налаштування для вашого розташування в одному файлі, а більш
специфічні налаштування для певних конфігурацій - в інших файлах.

# Можна перерахувати декілька файлів, розділених пробілами; всі вони будуть мати вигляд
# завантажено. Включені файли можуть мати власні директиви
# preseed/include. Зауважте, що якщо назви файлів є відносними, вони беруться з
# того ж каталогу, що і файл попередньої конфігурації, який їх містить.
#d-i preseed/include string x.cfg

# Програма встановлення може за бажанням перевіряти контрольні суми файлів попередньої конфігурації
# перед їх використанням. Наразі підтримуються лише md5-суми, перелічіть md5-суми
# у тому ж порядку, що і список файлів для включення.
#d-i preseed/include/checksum string 5da499872becccfeda2c4872f9171c3d

# Гнучкіший спосіб - запустити команду оболонки, і якщо вона виведе назви
# файлів попередньої конфігурації, включає ці файли.
#d-i preseed/include_command \
#      string if [ "`hostname`" = bob ]; then echo bob.cfg; fi

# Найбільш гнучкий спосіб - завантажити програму і запустити її. Програма
# може використовувати такі команди як debconf-set для маніпулювання базою даних debconf.
# Можна перерахувати більше одного скрипта, розділяючи їх пробілами.
# Зауважте, що якщо імена файлів є відносними, вони беруться з того ж каталогу, що і
# каталогу, що і файл попередньої конфігурації, який їх запускає.
#d-i preseed/run string foo.sh

Також можна виконати ланцюгове завантаження з фази initrd або фази попереднього
завантаження файлів у мережеве попереднє завантаження, задавши preseed/url у
попередніх файлах. Це призведе до виконання попереднього вибору мережі, коли
вона з'явиться. Ви повинні бути обережними при виконанні цієї операції,
оскільки буде виконано два різних запуски попереднього завантаження, що
означає, наприклад, що ви отримаєте ще один шанс виконати команду preseed/
early, а другий - після того, як з'явиться мережа.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[19] Власником змінної (або шаблону) debconf зазвичай є назва пакунка, який
містить відповідний шаблон debconf. Для змінних, що використовуються у самій
програмі встановлення, власником є «d-i». Шаблони і змінні можуть мати більше
одного власника, що допомагає визначити, чи можна їх вилучити з бази даних
debconf у разі очищення пакунка.

^[20] Попередня обробка locale до en_NL, наприклад, призведе до отримання
en_US.UTF-8 як локалі за замовчуванням для інстальованої системи. Якщо ви
віддаєте перевагу, наприклад, en_GB.UTF-8, значення потрібно буде вказати
окремо.

Додаток C. Перерозподіл диска для Debian

Зміст

C.1. Вибір розділів та розмірів Debian
C.2. Дерево каталогів
C.3. Рекомендована схема розподілу
C.4. Назви пристроїв у Linux
C.5. Програми для розподілу в Debian
    C.5.1. Розподіл для 64-bit PC

C.1. Вибір розділів та розмірів Debian

Як мінімум, GNU/Linux потребує один розділ для себе. Ви можете мати один
розділ, який містить всю операційну систему, програми та Ваші особисті файли.
Більшість людей вважають, що окремий розділ підкачки (swap) також є
необхідністю, хоча це не зовсім так. «Swap» - це початковий простір для
операційної системи, який дозволяє системі використовувати дискове сховище як «
віртуальну пам'ять». Розмістивши swap на окремому розділі, Linux може
використовувати його набагато ефективніше. Можна змусити Linux використовувати
звичайний файл як swap, але це не рекомендується.

Більшість людей вибирають надати для GNU/Linux більше мінімальної кількості
розділів. Є дві причини, чому Ви можете розбити файлову систему на декілька
менших розділів. Перше - для безпеки. Якщо щось станеться та пошкодиться
файлова система, зазвичай це зачіпає лише один розділ. Таким чином, Вам буде
потрібно лише замінити (з резервних копій, які Ви надійно зберігали) частину
Вашої системи. Як мінімум, Вам слід розглянути можливість створення того, що
зазвичай називають «кореневим (root) розділом». Він містить найважливіші
компоненти системи. Якщо будь-які інші розділи будуть пошкоджені, Ви все ще
зможете завантажити GNU/Linux для виправлення системи. Це може убезпечити Вас
від перевстановлювання системи з нуля.

Друга причина, як правило, більш важлива в бізнесових налаштуваннях, але це
залежить від Вашого використання машини. Наприклад, поштовий сервер, куди
приходить багато спаму, може легко зайняти розділ. Якщо на поштовому сервері Ви
зробили окремий розділ /var/mail, основна частина системи працюватиме й далі,
навіть якщо буде навала спаму.

Єдиним суттєвим недоліком використання великої кількості розділів є те, що
часто важко знати наперед, які будуть Ваші потреби. Якщо Ви зробите розділ
замалим, то потім доведеться або перевстановлювати систему, або прийдеться
постійно переміщати файли для звільнення місця в розділі, де стане тісно. З
іншого боку, якщо Ви зробите розділ завеликим, Ви можете втратити простір, який
можна було б використати в іншому місці. Дисковий простір зараз дешевий, але
навіщо викидати гроші?

C.2. Дерево каталогів

Debian GNU/Linux дотримується стандарту ієрархії файлової системи (Filesystem
Hierarchy Standard, FHS) щодо іменування каталогів та файлів. Цей стандарт
дозволяє користувачам та програмам передбачати розташування файлів та
каталогів. Кореневий каталог представлений просто косою лінією /. На кореневому
рівні всі Debian системи містять такі каталоги:

┌───────┬────────────────────────────────────────────────┐
│Каталог│                     Вміст                      │
├───────┼────────────────────────────────────────────────┤
│bin    │Основні двійкові команди                        │
├───────┼────────────────────────────────────────────────┤
│boot   │Статичні файли завантажувача                    │
├───────┼────────────────────────────────────────────────┤
│dev    │Файли пристроїв                                 │
├───────┼────────────────────────────────────────────────┤
│etc    │Власні системні налаштування                    │
├───────┼────────────────────────────────────────────────┤
│home   │Домашні каталоги користувачів                   │
├───────┼────────────────────────────────────────────────┤
│lib    │Загальні бібліотечні файли та модулі ядра       │
├───────┼────────────────────────────────────────────────┤
│media  │Точки приєднання для знімних пристроїв          │
├───────┼────────────────────────────────────────────────┤
│mnt    │Точка приєднання для тимчасової файлової системи│
├───────┼────────────────────────────────────────────────┤
│proc   │Віртуальний каталог для системної інформації    │
├───────┼────────────────────────────────────────────────┤
│root   │Домашній каталог адміністратора                 │
├───────┼────────────────────────────────────────────────┤
│run    │Операційні дані системи                         │
├───────┼────────────────────────────────────────────────┤
│sbin   │Основні системні двійкові файли                 │
├───────┼────────────────────────────────────────────────┤
│sys    │Віртуальний каталог для системної інформації    │
├───────┼────────────────────────────────────────────────┤
│tmp    │Тимчасові файли                                 │
├───────┼────────────────────────────────────────────────┤
│usr    │Другорядна структура                            │
├───────┼────────────────────────────────────────────────┤
│var    │Змінні дані                                     │
├───────┼────────────────────────────────────────────────┤
│srv    │Дані для системних служб/сервісів               │
├───────┼────────────────────────────────────────────────┤
│opt    │Додаткові пакети програмного забезпечення       │
└───────┴────────────────────────────────────────────────┘

Нижче наведений список важливих зауважень щодо каталогів та розділів. Зверніть
увагу, що використання диска залежить від системних налаштувань та конкретних
шаблонів використання. Наведені тут рекомендації є загальними вказівками та
служать відправною точкою для розподілу.

  • Кореневий розділ / завжди повинен фізично містити в собі каталоги /etc, /
    bin, /sbin, /lib , /dev та /usr, оскільки без них завантажитися не вийде.
    Це означає, що Ви повинні для кореневого каталогу надати щонайменше
    700-850МБ дискового простору, включно з /usr або 5-6ГБ для інсталяції
    робочої станції або сервера.

  • /var: змінні дані, такі як статті, електронні листи, вебсайти, бази даних,
    кеш системи пакунків тощо, будуть розміщені тут. Розмір цього каталогу
    залежить від обсягів використання Вашої системи, але для більшості людей це
    буде наслідком роботи інструменту керування пакунками. Якщо Ви збираєтеся
    виконати повне встановлення всього, що може запропонувати Debian за один
    сеанс, виділення 2 або 3 ГБ для /var має бути достатньо. Якщо збираєтеся
    встановлювати все по черзі (тобто спочатку служби та утиліти, потім
    текстові інструменти, потім X, ...), Вам може вистачити 300-500 МБ. Якщо
    місця на жорсткому диску мало і Ви не плануєте робити серйозні оновлення
    системи, вам можете вистачити навіть 30 або 40 МБ.

  • /tmp: тимчасові дані, створені програмами, найімовірніше, потраплять у цей
    каталог. Зазвичай достатньо 40-100 МБ. Деякі програми, зокрема для роботи з
    архівами, інструменти для створення CD/DVD та мультимедійне програмне
    забезпечення, можуть використовувати /tmp для тимчасового зберігання файлів
    та образів. Якщо плануєте користуватися такими програми, Вам слід
    налаштувати простір, доступний у /tmp відповідним чином.

  • /home: кожен користувач зможе зберігати свої дані у власному підкаталозі
    цього каталогу. Його розмір залежить від того, скільки користувачів будуть
    користуватися системою та які файли будуть зберігатися в їхніх каталогах.
    Залежно від майбутнього використання Вам слід запланувати близько 100 МБ
    для кожного користувача, але підлаштуйте це значення до своїх потреб.
    Зарезервуйте більше місця, якщо плануєте у своєму домашньому каталозі
    зберігати багато мультимедійних файлів (фото, MP3, фільми).

C.3. Рекомендована схема розподілу

Для новачків, хто налаштовує систему для одного користувача, наприклад, для
особистої скриньки Debian, домашньої системи або чогось подібного, вибір одного
розділу / (плюс swap) буде, мабуть, найлегшим та найпростішим шляхом.
Рекомендований тип розділу ext4.

Для багатокористувацьких систем або для систем з декількома дисками для
каталогів /var, /tmp та /home краще використовувати окремі розділи (окремо від
/).

Якщо Ви плануєте встановити багато різних програм, які не є частиною екосистеми
Debian, Вам може знадобитися окремий розділ /usr/local. Якщо Ваша машина буде
поштовим сервером, можливо знадобиться окремий розділ для /var/mail. Якщо Ви
налаштовуєте сервер із великою кількістю облікових записів користувачів, було б
добре мати окремий великий розділ /home. Загалом ситуація з розподілом
відрізняється від комп’ютера до комп’ютера залежно від його використання.

Для дуже складних систем Вам було б добре ознайомитися з Multi Disk HOWTO. Там
міститься докладна інформація, яка буде цікава провайдерам та людям, які
налаштовують сервери.

Стосовно питання розміру розділу для свопу існує багато думок. Одне просте
правило, яке гарно працює, полягає в тому, щоби використовувати стільки свопу,
скільки у Вас є системної пам’яті. У більшості випадків він також не повинен
бути меншим за 512 МБ. Звичайно, і до цих правил є винятки.

Як приклад, старий домашній комп'ютер може мати 512 МБ оперативної пам’яті та
диск SATA на 20 ГБ на /dev/sda. Тоді розподіл може бути таким: у розділі /dev/
sda1 може бути 8 ГБ для іншої операційної системи, розділ під своп розміром 512
МБ на /dev/sda3 та приблизно 11,4 ГБ на /dev/sda2 буде як розділ Linux.

Щоби зрозуміти, скільки місця займе кожне завдання після інсталяції системи,
перегляньте Розділ D.2, «Дисковий простір, необхідний для завдань».

C.4. Назви пристроїв у Linux

Назви дисків і розділів Linux можуть відрізнятися від назв в інших операційних
системах. Вам потрібно знати назви, які використовує Linux, коли створюєте та
приєднуєте розділи. Основна схема іменування має такий вигляд:

  • Перший визначений жорсткий диск називається /dev/sda.

  • Другий визначений жорсткий диск матиме назву /dev/sdb і далі за схемою.

  • Перший SCSI CD-ROM отримує назву /dev/scd0, або /dev/sr0.

Розділи кожного диска створюються через додавання десяткового числа до його
назви: sda1 та sda2 відповідно перший та другий розділи першого визначеного у
Вашій системі жорсткого диска SCSI.

Розглянемо приклад із життя. Припустімо, що у Вас є система з 2 дисками SCSI,
один з адресою SCSI 2, а інший -- з адресою 4. Перший диск (за адресою 2)
отримає назву sda, а другий -- sdb. Якщо диск sda містить 3 розділи, вони
матимуть назви sda1, sda2 та sda3. Те саме стосується диска sdb та його
розділів.

Зверніть увагу, що якщо в системі два контролери SCSI, порядок дисків, щоби не
заплутатися, краще дивитися у повідомленнях про завантаження, припускаючи, що
Ви знаєте моделі дисків та/або їх обсяг.

Linux представляє основні розділи як ім’я диска з доданими цифрами від 1 до 4.
Наприклад, перший основний розділ на першому диску буде названий /dev/sda1.
Логічні розділи нумеруються від 5, тому перший логічний розділ на цьому самому
диску є /dev/sda5. Пам’ятайте, що розширений розділ, тобто основний розділ, в
якому містяться логічні розділи, сам по собі не можна використовувати.

C.5. Програми для розподілу в Debian

Кожна системна архітектура та тип дисків можуть підтримуватися різними
програмами для розподілу дисків. Розробники Debian адаптували багато з них.
Придатні для Вашої системи нижче в списку.

partman

    Рекомендований інструмент для розподілу в Debian. Цей швейцарський
    армійський ніж може також змінювати розміри розділів, створювати файлові
    системи («форматувати» мовою Windows) та призначати їх точкам монтування.

fdisk

    Оригінальний Linux-засіб для розподілу дисків, підходить для гуру.

    Будьте обережні, якщо на Вашій машині містяться розділи FreeBSD.
    Інсталяційні ядра мають підтримку цих розділів, але те, як fdisk їх
    представляє (або ні) може призвести до того, що назви пристроїв
    відрізнятимуться. Перегляньте Linux+FreeBSD HOWTO.

cfdisk

    Простий у використанні повноекранний інструмент розподілу дисків для
    звичайних людей.

    Зверніть увагу, що cfdisk взагалі не розпізнає розділи FreeBSD, і, знову ж
    таки, назви пристроїв можуть відрізнятися.

Типово буде запущена одна з цих програм, якщо Ви виберете Розділи дисків (або
подібне). Ймовірно, є можливість використання іншого інструмента розподілу з
командного рядка на VT2, але це не рекомендовано.

Не забудьте свій «Завантажувальний» розділ відповідно позначити (bootable).

C.5.1. Розподіл для 64-bit PC

Якщо Ви використовуєте новий жорсткий диск (або хочете стерти всю таблицю
розділів на диску), необхідно створити нову таблицю розділів. «Керований
розподіл» робить це автоматично, але під час ручного розподілу перемістіть
виділення на запис верхнього рівня цього диска та натисніть Enter. Це створить
на цьому диску нову таблицю розділів. У експертному режимі Вам буде також
запропоновано вказати тип таблиці розділів. Типовим значенням для систем з UEFI
є «gpt», а для старішої версії BIOS це «msdos». У стандартному основному
встановленні ці параметри використовуються автоматично.

Примітка

Якщо вибрано таблицю розділів типу «gpt» (стандарт для систем UEFI), на початку
диска автоматично буде збережений вільний простір розміром 1 МБ. Це призначено
та необхідно для вбудовування завантажувача GRUB2.

Якщо у Вас є інша операційна система, наприклад Windows, і Ви бажаєте зберегти
цю операційну систему під час встановлення Debian, можливо Вам буде потрібно
змінити розмір її розділу для звільнення місця під Debian. Інсталятор підтримує
зміну розміру для файлових систем FAT та NTFS; як дійдете до етапу розподілу
програмою встановлення, виберіть параметр Вручну (Manual), а потім просто
виберіть потрібний розділ та змініть його розмір.

Хоча сучасні системи UEFI не мають перерахованих нижче обмежень, BIOS для
старих ПК зазвичай додає додаткові обмеження для розподілу диска. Існує
обмеження щодо кількості «основних» та «логічних» розділів, які може містити
диск.

У старих ПК з системою BIOS «основні» розділи є оригінальною схемою розподілу
дисків. Однак їх може бути тільки чотири. Для подолання цього обмеження, були
винайдені «extended» (розширені) та «logical» (логічні) розділи. Встановивши
один з основних розділів як розширений, можна розділити весь простір цього
розділу на логічні розділи. Ви можете створити до 60 логічних розділів в
розширеному розділі; однак на диску можна мати лише один розширений розділ.

Додаток D. Різні поради

Зміст

D.1. Пристрої Linux
    D.1.1. Налаштування вашої миші
D.2. Дисковий простір, необхідний для завдань
D.3. Встановлення Debian GNU/Linux із системи Unix/Linux
    D.3.1. Початок роботи
    D.3.2. Встановити debootstrap
    D.3.3. Запуск debootstrap
    D.3.4. Конфігурація базової системи
    D.3.5. Встановлення ядра
    D.3.6. Налаштування завантажувача
    D.3.7. Віддалений доступ: Встановлення SSH та налаштування доступу
    D.3.8. Останні штрихи
D.4. Встановлення Debian GNU/Linux через паралельну лінію IP (PLIP)
    D.4.1. Вимоги
    D.4.2. Налаштування джерела
    D.4.3. Встановлення цілі
D.5. Встановлення Debian GNU/Linux за допомогою PPP через Ethernet (PPPoE)

D.1. Пристрої Linux

У Linux в каталозі /dev можна знайти різні спеціальні файли. Ці файли
називаються файлами пристроїв і відрізняються від звичайних файлів.
Найпоширенішими типами файлів пристроїв є блокові та символьні пристрої. Ці
файли є інтерфейсами до фактичних драйверів (частин ядра Linux), які, своєю
чергою, отримують доступ до обладнання. Інший, менш поширений тип файлу
пристрою -- це pipe. Найважливіші файли пристроїв перераховані нижче в
таблицях.

┌────┬─────────────────────────────────────┐
│sda │Перший жорсткий диск                 │
├────┼─────────────────────────────────────┤
│sdb │Другий жорсткий диск                 │
├────┼─────────────────────────────────────┤
│sda1│Перший розділ першого жорсткого диска│
├────┼─────────────────────────────────────┤
│sdb7│Сьомий розділ другого жорсткого диска│
└────┴─────────────────────────────────────┘

┌───┬──────────────┐
│sr0│Перший CD-ROM │
├───┼──────────────┤
│sr1│Другий CD-ROM │
└───┴──────────────┘

┌───────┬───────────────────────────────────────────────────────┐
│ttyS0  │Послідовний порт 0, також відомий як COM1              │
├───────┼───────────────────────────────────────────────────────┤
│ttyS1  │Послідовний порт 1, також відомий як COM2              │
├───────┼───────────────────────────────────────────────────────┤
│psaux  │Пристрій миші PS/2                                     │
├───────┼───────────────────────────────────────────────────────┤
│gpmdata│Псевдо-пристрій, що повторює дані від daemon GPM (миші)│
└───────┴───────────────────────────────────────────────────────┘

┌─────┬──────────────────────────────────────────┐
│cdrom│Символічне посилання на привід CD-ROM     │
├─────┼──────────────────────────────────────────┤
│миша │Символічне посилання на файл пристрою миші│
└─────┴──────────────────────────────────────────┘

┌────┬─────────────────────────────────────────────────┐
│null│Все, що записано на цей пристрій, зникне         │
├────┼─────────────────────────────────────────────────┤
│нуль│З цього пристрою можна нескінченно зчитувати нулі│
└────┴─────────────────────────────────────────────────┘

D.1.1. Налаштування вашої миші

Мишу можна використовувати як у консолі Linux (з gpm), так і у віконному
середовищі X. Зазвичай, це проста справа встановлення gpm і самого X-сервера.
Обидві програми слід налаштувати на використання /dev/input/mice як пристрою
миші. Правильний протокол миші має назву exps2 у gpm та ExplorerPS/2 у X.
Відповідні конфігураційні файли: /etc/gpm.conf та /etc/X11/xorg.conf.

D.2. Дисковий простір, необхідний для завдань

Стандартна інсталяція для архітектури amd64, що включає всі стандартні пакунки
і використовує ядро за замовчуванням, займає 843МБ дискового простору.
Мінімальна базова інсталяція, без обраного завдання «Стандартні системні
утиліти», займе 647МБ.

Важливо

В обох випадках це фактичний обсяг дискового простору, використаний після
завершення інсталяції і видалення всіх тимчасових файлів. Він також не враховує
накладні витрати файлової системи, наприклад, для файлів журналів. Це означає,
що потрібно значно більше місця на диску як під час встановлення, так і для
звичайного використання системи.

У наступній таблиці наведені розміри, вказані відповідно до здібностей до
завдань, перелічених у tasksel. Зверніть увагу, що деякі завдання перекривають
один одного, тому загальний встановлений розмір для двох завдань разом може
бути меншим, ніж загальний розмір, отриманий шляхом додавання чисел.

За замовчуванням програма встановлення встановить стільничне оточення GNOME,
але альтернативні стільничні оточення можна вибрати або за допомогою одного зі
спеціальних інсталяційних образів, або вказавши бажане стільничне оточення під
час встановлення (див. Розділ 6.3.6.2, «Вибір та встановлення програмного
забезпечення»).

Зверніть увагу, що при визначенні розмірів перегородок вам потрібно буде додати
розміри, вказані в таблиці, до розмірів стандартної інсталяції. Більша частина
розміру, вказаного як «Встановлений розмір», опиниться у /usr та у /lib;
розмір, вказаний як «Зкачаний розмір», (тимчасово) потрібен у /var.

┌──────────────────┬────────────────┬────────────────┬────────────────────────┐
│                  │  Встановлений  │     Розмір     │  Необхідно місця для   │
│     Завдання     │  розмір (МБ)   │  завантаження  │   встановлення (МБ)    │
│                  │                │      (МБ)      │                        │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│Середовище        │                │                │                        │
│робочого столу    │                │                │                        │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • GNOME (за     │3323            │861             │4184                    │
│замовчуванням)    │                │                │                        │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • KDE Plasma    │5429            │1499            │6928                    │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • Xfce          │2771            │734             │3505                    │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • LXDE          │2635            │708             │3343                    │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • MATE          │3197            │832             │4029                    │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│  • Cinnamon      │3852            │1027            │4879                    │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│Веб сервер        │116             │26              │142                     │
├──────────────────┼────────────────┼────────────────┼────────────────────────┤
│SSH сервер        │2               │1               │3                       │
└──────────────────┴────────────────┴────────────────┴────────────────────────┘

Якщо ви встановлюєте систему мовою, відмінною від англійської, tasksel може
автоматично встановити завдання локалізації, якщо воно доступне для вашої мови.
Вимоги до місця відрізняються залежно від мови; загалом для завантаження та
інсталяції потрібно до 350МБ.

D.3. Встановлення Debian GNU/Linux із системи Unix/Linux

У цьому розділі описано, як встановити Debian GNU/Linux з наявної системи Unix
або Linux, не використовуючи програму встановлення за допомогою меню, як
описано у решті частини посібника. Це «посібник з перехресного встановлення»
було запитано користувачами, які переходять на Debian GNU/Linux з Red Hat,
Mandriva та SUSE. У цьому розділі передбачається, що ви маєте певні навички
введення команд *nix та навігації по файловій системі. У цьому розділі, $
символізує команду, яку потрібно ввести у поточній системі користувача, а # -
команду, яку потрібно ввести у Debian chroot.

Після того, як ви налаштували нову систему відповідно до ваших уподобань, ви
можете перенести до неї наявні дані користувачів (якщо такі є) і продовжити
роботу. Отже, це «нульовий час простою» Debian GNU/Linux встановлення. Це також
розумний спосіб роботи з обладнанням, яке інакше не дружить з різними
завантажувальними або інсталяційними носіями.

Примітка

Оскільки це переважно ручна процедура, вам слід пам'ятати, що вам доведеться
самостійно виконати багато базових налаштувань системи, що також вимагатиме
більше знань про Debian і про Linux загалом, ніж при виконанні звичайного
встановлення. Не варто очікувати, що в результаті цієї процедури ви отримаєте
систему, яка буде ідентичною системі, встановленій за допомогою звичайної
інсталяції. Ви також повинні пам'ятати, що ця процедура описує лише основні
кроки з налаштування системи. Можуть знадобитися додаткові кроки з інсталяції
та/або налаштування.

D.3.1. Початок роботи

За допомогою ваших поточних інструментів для роботи з розділами *nix,
перерозподіліть жорсткий диск за потреби, створивши принаймні одну файлову
систему плюс область підкачки. Вам потрібно близько 647МБ вільного місця для
встановлення лише консолі, або близько 2635МБ, якщо ви плануєте встановити X
(більше, якщо ви маєте намір встановити середовища робочого столу, такі як
GNOME або KDE Plasma).

Далі створіть файлові системи на розділах. Наприклад, створити файлову систему
ext3 на розділі /dev/sda6 (це наш приклад кореневого розділу):

# mke2fs -j /dev/sda6

Щоб створити файлову систему ext2, пропустіть -j.

Ініціалізуйте та активуйте підкачку (підставте номер розділу для
передбачуваного розділу Debian підкачки):

# mkswap /dev/sda5
# sync
# swapon /dev/sda5

Змонтуйте один розділ як /mnt/debinst (точка встановлення, яка буде кореневою
(/) файловою системою у вашій новій системі). Ім'я точки монтування суто
довільне, посилання на нього буде вказано нижче.

# mkdir /mnt/debinst
# mount /dev/sda6 /mnt/debinst

Примітка

Якщо ви хочете змонтувати частину файлової системи (наприклад, /usr) на окремих
розділах, вам потрібно буде створити і змонтувати ці каталоги вручну, перш ніж
переходити до наступного етапу.

D.3.2. Встановити debootstrap

Утиліта, яка використовується програмою встановлення Debian і визнана офіційним
способом встановлення базової системи Debian, є debootstrap. Вона використовує 
wget і ar, але в іншому залежить лише від /bin/sh і основних інструментів Unix/
Linux^[21]. Встановіть wget і ar, якщо їх ще немає у вашій системі, потім
завантажте і встановіть debootstrap.

Або, ви можете скористатися наступною процедурою, щоб встановити його вручну.
Створіть робочу папку для розпакування .deb:

# mkdir work
# cd work

Двійковий файл debootstrap знаходиться в архіві Debian (переконайтеся, що
вибрано правильний файл для вашої архітектури). Завантажте debootstrap .deb з
пулу, скопіюйте пакунок до робочої теки і витягніть з нього файли. Для
встановлення файлів вам знадобляться привілеї root.

# ar -x debootstrap_0.X.X_all.deb
# cd /
# zcat /full-path-to-work/work/data.tar.gz | tar xv

D.3.3. Запуск debootstrap

debootstrap може завантажувати потрібні файли безпосередньо з архіву під час
його запуску. Ви можете замінити будь-яке дзеркало архіву Debian на
http.us.debian.org/debian у наведеному нижче прикладі команди, бажано, щоб воно
було близьким до вас у мережі. Дзеркала перераховані за посиланням http://
www.debian.org/mirror/list.

Якщо у вас є інсталяційний образ trixie Debian GNU/Linux, змонтований за
адресою /cdrom, ви можете підставити URL-адресу файлу замість http URL: file:/
cdrom/debian/

Замість ARCH у команді debootstrap підставте один з наступних параметрів: amd64
, arm64, armhf, ppc64el, riscv64, s390x.

# /usr/sbin/debootstrap --arch ARCH trixie \
     /mnt/debinst http://ftp.us.debian.org/debian

Якщо цільова архітектура відрізняється від хоста, слід додати параметр
--foreign.

D.3.4. Конфігурація базової системи

Тепер у вас на диску є справжня система Debian, хоча і досить схудла. chroot в
неї:

# LANG=C.UTF-8 chroot /mnt/debinst /bin/bash

Якщо цільова архітектура відрізняється від хоста, вам слід спочатку скопіювати
qemu-user-static на новий хост:

# cp /usr/bin/qemu-ARCH-static /mnt/debinst/usr/bin
# LANG=C.UTF-8 chroot /mnt/debinst qemu-ARCH-static /bin/bash

Після вкорінення вам може знадобитися встановити визначення терміналу,
наприклад, щоб воно було сумісним з базовою системою Debian, наприклад:

# export TERM=xterm-color

Залежно від значення TERM, можливо, вам доведеться встановити пакунок
ncurses-term, щоб отримати його підтримку.

Якщо цільова архітектура відрізняється від хоста, вам потрібно завершити
багатоетапне завантаження:

/debootstrap/debootstrap --second-stage

D.3.4.1. Створити файли пристрою

Наразі /dev/ містить лише найпростіші файли пристрою. Для наступних кроків
інсталяції можуть знадобитися додаткові файли пристрою. Існує декілька способів
зробити це, і те, який з них ви оберете, залежить від хост-системи, яку ви
використовуєте для встановлення, від того, чи збираєтеся ви використовувати
модульне ядро, і від того, чи збираєтеся ви використовувати динамічні
(наприклад, за допомогою udev) або статичні файли пристроїв у новій системі.

Ось кілька доступних варіантів:

  • встановіть пакунок makedev і створіть набір статичних файлів пристроїв за
    замовчуванням за допомогою (після chrooting)

    # apt install makedev
    # mount none /proc -t proc
    # cd /dev
    # MAKEDEV generic

  • вручну створити лише певні файли пристрою за допомогою MAKEDEV

  • прив'язати монтування /dev з хост-системи до каталогу /dev у цільовій
    системі; зауважте, що скрипти постінсталяції деяких пакунків можуть
    спробувати створити файли пристроїв, тому цей параметр слід використовувати
    з обережністю

D.3.4.2. Монтувати розділи

Вам потрібно створити /etc/fstab.

# editor /etc/fstab

Ось зразок, який ви можете модифікувати під себе:

# /etc/fstab: статична інформація про файлову систему.
#
# file system    mount point   type    options                  dump pass
/dev/XXX         /             ext3    defaults                 0    1
/dev/XXX         /boot         ext3    ro,nosuid,nodev          0    2

/dev/XXX         none          swap    sw                       0    0
proc             /proc         proc    defaults                 0    0

/dev/cdrom       /media/cdrom  iso9660 noauto,ro,user,exec      0    0

/dev/XXX         /tmp          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /var          ext3    rw,nosuid,nodev          0    2
/dev/XXX         /usr          ext3    rw,nodev                 0    2
/dev/XXX         /home         ext3    rw,nosuid,nodev          0    2

Використовуйте mount -a для монтування усіх файлових систем, які ви вказали у /
etc/fstab, або, щоб змонтувати кожну файлову систему окремо, використовуйте

# mount /path   # e.g.: mount /usr

Поточні системи Debian мають точки монтування для знімних носіїв у /media, але
зберігають посилання на сумісність у /. Створюйте їх за потреби, наприклад:

# cd /media
# mkdir cdrom0
# ln -s cdrom0 cdrom
# cd /
# ln -s media/cdrom

Файлову систему proc можна змонтувати декілька разів і у довільне місце, хоча
загальноприйнятим є /proc. Якщо ви не використовували mount -a, обов'язково
змонтуйте proc перед продовженням:

# mount -t proc proc /proc

Команда ls /proc тепер має показувати непорожній каталог. Якщо це не вдасться,
ви можете змонтувати proc ззовні кореня:

# mount -t proc proc /mnt/debinst/proc

D.3.4.3. Налаштування часового поясу

Встановлення у третьому рядку файлу /etc/adjtime значення «UTC» або «LOCAL»
визначає, чи буде система інтерпретувати апаратний годинник як такий, що
встановлений у відповідному місцевому часі UTC. Наступна команда дозволяє вам
це налаштувати.

# editor /etc/adjtime

Ось зразок:

0.0 0 0.0
0
UTC

Наступна команда дозволяє вибрати часовий пояс.

# dpkg-reconfigure tzdata

D.3.4.4. Налаштування мережевих підключень

Щоб налаштувати мережу, відредагуйте /etc/network/interfaces, /etc/resolv.conf,
/etc/hostname та /etc/hosts.

# editor /etc/network/interfaces

Ось кілька простих прикладів з /usr/share/doc/ifupdown/examples:

######################################################################
# /etc/network/interfaces -- конфігураційний файл для ifup(8), ifdown(8)
# Дивіться сторінку інтерфейсів(5) для отримання інформації про те, які опції
# доступні.
######################################################################

# Інтерфейс зворотного зв'язку більше не потрібен, але його можна використати,
# якщо потрібно.
#
# auto lo
# iface lo inet loopback

# Для використання dhcp:
#
# auto eth0
# iface eth0 inet dhcp

# Приклад статичного налаштування IP-адреси: (мережа, трансляція та шлюз необов'язкові)
#
# auto eth0
# iface eth0 inet static
#     адреса 192.168.0.42
#     мережа 192.168.0.0
#     мережева маска 255.255.255.0
#     трансляція 192.168.0.255
#     шлюз 192.168.0.1

Введіть ваш(і) сервер(и) імен та директиви пошуку в /etc/resolv.conf:

# editor /etc/resolv.conf

Простий приклад /etc/resolv.conf:

search example.com
nameserver 10.1.1.36
nameserver 192.168.9.100

Введіть ім'я хоста вашої системи (від 2 до 63 символів):

# echo DebianHostName > /etc/hostname

І базовий /etc/hosts з підтримкою IPv6:

127.0.0.1 localhost
127.0.1.1 DebianHostName

# Для хостів з підтримкою IPv6 бажано вказати наступні рядки
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

Якщо у вас декілька мережевих карт, вам слід впорядкувати назви модулів
драйверів у файлі /etc/modules у потрібному порядку. Тоді під час завантаження,
кожна карта буде пов'язана з іменем інтерфейсу (eth0, eth1 і т.д.), яке ви
очікуєте.

D.3.4.5. Конфігурація Apt

Debootstrap створить базовий файл /etc/apt/sources.list, який дозволить
встановити додаткові пакунки. Однак, можливо, ви захочете додати деякі
додаткові джерела, наприклад, для пакунків з вихідними текстами та оновлень
безпеки:

deb-src http://ftp.us.debian.org/debian trixie main

deb http://security.debian.org/ trixie-security main
deb-src http://security.debian.org/ trixie-security main

Не забудьте виконати apt update після внесення змін до списку джерел.

D.3.4.6. Налаштування локалей і клавіатури

Щоб налаштувати параметри локалі для використання мови, відмінної від
англійської, встановіть пакет підтримки locales і налаштуйте його. Наразі
рекомендується використовувати локалі UTF-8.

# apt install locales
# dpkg-reconfigure locales

Налаштувати клавіатуру (якщо потрібно):

# apt install console-setup
# dpkg-reconfigure keyboard-configuration

Зверніть увагу, що клавіатуру не можна налаштувати у chroot, але її буде
налаштовано під час наступного перезавантаження.

D.3.5. Встановлення ядра

Якщо ви маєте намір завантажувати цю систему, вам, ймовірно, знадобиться ядро
Linux та завантажувач. Визначте доступні попередньо запаковані ядра за
допомогою:

# apt search linux-image

Потім встановіть обраний вами пакунок ядра, скориставшись назвою пакунка.

# apt install linux-image-arch-etc

D.3.6. Налаштування завантажувача

Щоб зробити вашу Debian GNU/Linux систему завантажуваною, налаштуйте ваш
завантажувач так, щоб він завантажував встановлене ядро з вашого нового
кореневого розділу. Зауважте, що debootstrap не встановлює завантажувач, але ви
можете використати apt у вашому Debian chroot для цього.

Перевірте info grub для отримання інструкцій щодо налаштування завантажувача.
Якщо ви зберігаєте систему, яку використовували для встановлення Debian, просто
додайте запис для встановлення Debian до існуючого grub2 grub.cfg.

Встановлення та налаштування grub2 дуже просте:

# apt install grub-pc
# grub-install /dev/sda
# update-grub

Друга команда встановить grub2 (у цьому випадку у MBR диска sda). Остання
команда створить нормальний і робочий /boot/grub/grub.cfg.

Зауважте, що це передбачає, що файл пристрою /dev/sda було створено. Існують
альтернативні методи встановлення grub2, але вони виходять за рамки цього
додатка.

D.3.7. Віддалений доступ: Встановлення SSH та налаштування доступу

Якщо ви можете увійти в систему через консоль, ви можете пропустити цей розділ.
Якщо згодом система буде доступна через мережу, вам потрібно встановити SSH і
налаштувати доступ.

# apt install ssh

За замовчуванням root-логін з паролем вимкнено, тому налаштувати доступ можна,
встановивши пароль і повторно увімкнувши root-логін з паролем:

# passwd
# editor /etc/ssh/sshd_config

Цю опцію слід увімкнути:

PermitRootLogin yes

Доступ також можна налаштувати, додавши ключ ssh до облікового запису root:

# mkdir /root/.ssh
# cat << EOF > /root/.ssh/authorized_keys
ssh-rsa ....
EOF

Нарешті, доступ можна налаштувати, додавши не root-користувача і встановивши
пароль:

# adduser joe
# passwd joe

D.3.8. Останні штрихи

Як згадувалося раніше, встановлена система буде дуже простою. Якщо ви хочете
зробити систему більш зрілою, існує простий спосіб встановити усі пакунки з
пріоритетом «стандартний»:

# tasksel install standard

Звісно, ви також можете скористатися командою apt для встановлення пакунків
окремо.

Після встановлення у папці /var/cache/apt/archives/ буде багато завантажених
пакунків. Ви можете звільнити трохи місця на диску під час бігу:

# apt clean

D.4. Встановлення Debian GNU/Linux через паралельну лінію IP (PLIP)

У цьому розділі описано, як встановити Debian GNU/Linux на комп'ютері без карти
Ethernet, але з віддаленим комп'ютером-шлюзом, підключеним за допомогою
нуль-модемного кабелю (також званого нуль-принтерним кабелем). Комп'ютер-шлюз
має бути підключено до мережі, яка має дзеркало Debian (наприклад, до
Інтернету).

У прикладі в цьому додатку ми налаштуємо PLIP-з'єднання за допомогою шлюзу,
підключеного до Інтернету через комутоване з'єднання (ppp0). Ми будемо
використовувати IP-адреси 192.168.0.1 та 192.168.0.2 для інтерфейсів PLIP на
цільовій системі та системі-джерелі відповідно (ці адреси не повинні
використовуватися у вашому мережевому адресному просторі).

Підключення PLIP, налаштоване під час інсталяції, також буде доступне після
перезавантаження у встановлену систему (див. Розділ 7, Завантаження у Вашу нову
систему Debian).

Перед початком роботи, потрібно перевірити конфігурацію BIOS (базову адресу
вводу-виводу та IRQ) для паралельних портів як вихідної, так і цільової систем.
Найпоширенішими значеннями є io=0x378, irq=7.

D.4.1. Вимоги

  • Цільовий комп'ютер, який називається target, на якому буде встановлено
    Debian.

  • Інсталяційний носій системи; див. Розділ 2.4, «Інсталяційний носій».

  • Інший комп'ютер, підключений до Інтернету, називається джерело, який буде
    функціонувати як шлюз.

  • Нуль-модемний кабель DB-25. Дивіться PLIP-Install-HOWTO для отримання
    додаткової інформації про цей кабель та інструкції, як зробити свій
    власний.

D.4.2. Налаштування джерела

Наступний сценарій командного інтерпретатора є простим прикладом того, як
налаштувати комп'ютер-джерело як шлюз до Інтернету за допомогою ppp0.

#!/bin/sh

# Ми вилучаємо запущені модулі з ядра, щоб уникнути конфліктів і щоб
# переналаштувати їх вручну.
modprobe -r lp parport_pc
modprobe parport_pc io=0x378 irq=7
modprobe plip

# Налаштуйте інтерфейс plip (plip0 для мене, див. dmesg | grep plip)
ifconfig plip0 192.168.0.2 pointopoint 192.168.0.1 netmask 255.255.255.255 up

# Налаштуйте шлюз
modprobe iptable_nat
iptables -t nat -A POSTROUTING -o ppp0 -j MASQUERADE
echo 1 > /proc/sys/net/ipv4/ip_forward

D.4.3. Встановлення цілі

Завантажте інсталяційний носій. Інсталяцію потрібно запустити в експертному
режимі; введіть expert у запрошенні до завантаження. Якщо вам потрібно задати
параметри для модулів ядра, вам також потрібно зробити це під час завантаження.
Наприклад, щоб завантажити програму встановлення і встановити значення
параметрів «io» і «irq» для модуля parport_pc, введіть у запиті до завантаження
наступне:

expert parport_pc.io=0x378 parport_pc.irq=7

Нижче наведені відповіді, які слід давати на різних етапах інсталяції.

 1. Завантаження компонентів інсталятора з інсталяційного носія

    Виберіть зі списку опцію plip-modules; це зробить драйвери PLIP доступними
    для системи встановлення.

 2. Виявлення мережевого обладнання

      □ Якщо ціль має мережеву карту, буде показано список модулів драйверів
        для виявлених карт. Якщо ви хочете змусити debian-installer
        використовувати plip замість цього, вам слід зняти позначку з усіх
        перелічених модулів драйверів. Очевидно, що якщо ціль не має мережевої
        карти, програма встановлення не покаже цей список.

      □ Оскільки раніше не було виявлено/вибрано жодної мережевої карти,
        програма встановлення попросить вас вибрати модуль мережевого драйвера
        зі списку. Виберіть модуль plip.

 3. Налаштуйте мережу

      □ Автоматичне налаштування мережі за допомогою DHCP: Ні

      □ IP адреса: 192.168.0.1

      □ Адреса «точка-точка».: 192.168.0.2

      □ Адреси серверів імен: ви можете ввести ті самі адреси, що й у джерелі
        (див. /etc/resolv.conf)

D.5. Встановлення Debian GNU/Linux за допомогою PPP через Ethernet (PPPoE)

У деяких країнах PPP через Ethernet (PPPoE) є поширеним протоколом для
широкосмугового (ADSL або кабельного) з'єднання з інтернет-провайдером.
Налаштування мережевого з'єднання за допомогою PPPoE не підтримується за
замовчуванням у програмі встановлення, але його можна зробити дуже просто. Цей
розділ пояснює, як це зробити.

PPPoE-з'єднання, налаштоване під час встановлення, також буде доступне після
перезавантаження у встановлену систему (див. Розділ 7, Завантаження у Вашу нову
систему Debian).

Щоб мати можливість налаштувати і використовувати PPPoE під час інсталяції, вам
потрібно буде інсталювати з одного з доступних образів CD-ROM/DVD. Він не
підтримується для інших методів встановлення (наприклад, netboot).

Встановлення через PPPoE здебільшого не відрізняється від будь-якого іншого
встановлення. Наступні кроки пояснюють відмінності.

  • Завантажте програму встановлення з параметром завантаження modules=ppp-udeb
    ^[22]. Це забезпечить автоматичне завантаження і запуск компонента,
    відповідального за налаштування PPPoE (ppp-udeb).

  • Виконайте звичайні початкові кроки встановлення (вибір мови, країни і
    клавіатури; завантаження додаткових компонентів програми встановлення^[23]
    ).

  • Наступним кроком є виявлення мережевого обладнання, щоб ідентифікувати всі
    Ethernet-карти, присутні в системі.

  • Після цього починається власне налаштування PPPoE. Програма встановлення
    опитає всі виявлені інтерфейси Ethernet у спробі знайти концентратор PPPoE
    (тип сервера, який обробляє PPPoE-з'єднання).

    Не виключено, що концентратор не вдасться знайти з першої спроби. Це може
    траплятися у повільних або перевантажених мережах або з несправними
    серверами. У більшості випадків друга спроба виявити концентратор буде
    успішною; щоб повторити спробу, виберіть Налаштувати і запустити
    PPPoE-з'єднання у головному меню програми встановлення.

  • Після того, як концентратор буде знайдено, користувачеві буде запропоновано
    ввести інформацію для входу (ім'я користувача та пароль PPPoE).

  • На цьому етапі інсталятор використає надану інформацію для встановлення
    PPPoE-з'єднання. Якщо було надано правильну інформацію, з'єднання PPPoE має
    бути налаштоване, і програма встановлення зможе використовувати його для
    підключення до Інтернету та отримання пакунків через нього (за потреби).
    Якщо інформація для входу невірна або з'явиться якась помилка, інсталятор
    зупиниться, але конфігурацію можна спробувати ще раз, вибравши пункт меню 
    Налаштувати і запустити PPPoE-з'єднання.


━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

^[21] До них належать основні утиліти GNU і такі команди як sed, grep, tar та 
gzip.

^[22] Дивіться Розділ 5.1.5, «Екран завантаження» для отримання інформації про
те, як додати параметр завантаження.

^[23] Компонент ppp-udeb буде завантажено як один з додаткових компонентів на
цьому кроці. Якщо ви хочете встановити з середнім або низьким пріоритетом
(експертний режим), ви також можете вручну вибрати ppp-udeb замість того, щоб
вводити параметр «modules» у запиті до завантаження.

Додаток E. Адміністративна інформація

Зміст

E.1. Про цей документ
E.2. Зробити внесок у цей документ
E.3. Основні співрозробники
E.4. Торговий знак Acknowledgement

E.1. Про цей документ

Цей посібник було створено для інсталятора debian від Sarge і він ґрунтується
на посібнику від Woody зі встановлення з гнучких дисків, який своєю чергою
базувався на попередніх посібниках зі встановлення Debian, а також на посібнику
з розповсюдження Progeny, випущеному під GPL у 2003 році.

Цей документ написано у DocBook XML. Вихідні формати генеруються різними
програмами, використовуючи інформацію з пакетів docbook-xml та docbook-xsl.

Щоб підвищити зручність обслуговування цього документа, ми використовуємо низку
функцій XML, таких як сутності та атрибути профілювання. Вони відіграють роль,
подібну до змінних і умовних умов у мовах програмування. Джерело XML для цього
документа містить інформацію для кожної окремої архітектури -- Атрибути
профілювання використовуються для виділення певних фрагментів тексту як
специфічних для архітектури.

E.2. Зробити внесок у цей документ

Якщо у вас є проблеми або пропозиції щодо цього документа, ви, ймовірно,
подаєте їх у вигляді звіту про помилки щодо пакету installation-guide.
Переглянути ім'я reportbug пакет або прочитайте онлайн-документацію Система
відстеження помилок Debian. Це буде приємно, якщо ви можете перевірити відкриті
помилки щодо установочного гайду, щоб побачити, чи вже було повідомлено про
вашу проблему. Якщо так, ви можете надати додаткову інформацію до <XXXX
@bugs.debian.org>, де XXXX є числом для вже зареєстрованих помилок.

А ще краще - отримати копію вихідного коду DocBook для цього документа та
виправити його. Джерело DocBook можна знайти в проекті посібника зі
встановлення на salsa. Якщо ви не знайомі з DocBook, не хвилюйтеся: у каталозі
посібників є проста шпаргалка, яка допоможе вам почати роботу. Це як html, але
орієнтований на зміст тексту, а не на презентацію. Патчі, надіслані до списку
розсилки debian-boot (див. нижче), вітаються. Щоб отримати вказівки щодо того,
як перевірити джерела за допомогою git, перегляньте README у кореневому
каталозі джерела.

Будь ласка, не звертайтеся безпосередньо до авторів цього документа. Існує
також список обговорень для debian-installer, який містить обговорення цього
посібника. Список розсилки: <debian-boot@lists.debian.org>. Інструкції щодо
підписки на цей список можна знайти на сторінці Підписка на список розсилки
Debian; або ви можете переглянути Архіви списків розсилки Debian онлайн.

E.3. Основні співрозробники

Цей документ був спочатку написаний Брюсом Перенсом, Свеном Рудольфом, Ігорем
Гробманом, Джеймсом Трісі та Адамом Ді Карло. Себастьян Лей написав посібник із
встановлення.

Мирослав Куре задокументував багато нових функцій у програмі Sarge встановлення
debian. Франс Поп був головним редактором і менеджером випуску під час випусків
Etch, Lenny і Squeeze.

Багато, багато користувачів і розробників Debian зробили свій внесок у цей
документ. Особливо слід звернути увагу на Майкла Шміца (підтримка m68k), Френка
Ноймана (оригінальний автор посібника зі встановлення Amiga), Арто Астала,
Еріка Делоне/Бену Коллінзу (інформація SPARC), Тапіо Лехтонену та Стефану
Борцмайеру за численні редагування та текст. Ми повинні подякувати Pascal Le
Bail за корисну інформацію про завантаження з USB-накопичувачів.

Надзвичайно корисним текстом та інформацією була знайдена в Джим Мінта для
мережевого завантаження (немає доступної URL-адреси), Debian ЧаПи, Linux/m68k
ЧаПи, Linux для SPARC Процесорів ЧаПи, Linux/Alpha FAQ, серед інших.
Підтримувачам цих вільно доступних і багатих джерел інформації повинні бути
визнані.

Розділ, присвячений chroot-інсталяціям у цьому посібнику (Розділ D.3,
«Встановлення Debian GNU/Linux із системи Unix/Linux»), частково взято з
документів, авторські права на які належать Karsten M. Self.

В розділі на інсталяцій над плипом в цьому посібнику (Розділ D.4, «Встановлення
Debian GNU/Linux через паралельну лінію IP (PLIP)») було засновано на
PLIP-Install-HOWTO від Жиля Ламіраля.

E.4. Торговий знак Acknowledgement

Всі торгові марки є власністю власників відповідних торгових марок.

Додаток F. Загальна громадська ліцензія GNU

Версія 2, червень 1991

Авторські права (C) 1989, 1991 Free Software Foundation, Inc.
51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA.

Кожен може копіювати і розповсюджувати дослівні копії
документа цієї ліцензії, але змінювати його не дозволено.

F.1. Передмова

Ліцензії на більшість програмного забезпечення розроблено таким чином, щоби
позбавити Вас свободи на його розповсюдження та на внесення змін. Але Загальна
публічна ліцензія gnu (gnu GPL) призначена навпаки для того, щоби гарантувати
Вашу свободу у розповсюдженні та внесенні змін у вільне програмне забезпечення
-- для запевнення, що програмне забезпечення є безплатним для всіх його
користувачів. Ця Загальна публічна ліцензія поширюється на більшість програм
Free Software Foundation та на будь-яку іншу програму, автори якої
зобов’язуються її використовувати. (Натомість на деякі інші програми Free
Software Foundation поширюється Загальна публічна ліцензія gnu Library.) Ви
можете також застосувати її до своїх програм.

Коли ми говоримо про вільне програмне забезпечення, ми маємо на увазі свободу,
а не ціну. Наші Загальні публічні ліцензії призначені для переконання в тому,
що Ви маєте свободу розповсюджувати копії безплатного програмного забезпечення
(і стягувати плату за цю послугу, якщо хочете), що Ви отримуєте вихідний код
або можете отримати його, якщо захочете, що Ви можете змінювати програмне
забезпечення або використовувати його частини в нових безплатних програмах; і
щоби Ви знали, що можете це робити.

Для захисту Ваших прав ми повинні ввести обмеження, які забороняють будь-кому
відмовляти Вам у цих правах або просити Вас відмовитися від прав. Ці обмеження
передбачають для Вас певні обов’язки, якщо Ви поширюєте копії програмного
забезпечення або змінюєте його.

Наприклад, якщо Ви розповсюджуєте копії такої програми безплатно чи за плату,
Ви повинні надати отримувачам усі права, якими Ви володієте. Ви повинні
переконатися, що вони також отримують або можуть отримати вихідний код. І Ви
повинні показати їм ці умови, щоби вони знали свої права.

Ми захищаємо Ваші права у два кроки: (1) забезпечуємо авторські права на
програмне забезпечення та (2) пропонуємо Вам цю ліцензію, яка надає Вам законне
право копіювати, розповсюджувати та/або змінювати програмне забезпечення.

Також, для захисту кожного автора та себе, ми хочемо переконатися, що всі
розуміють, що для безплатного програмного забезпечення немає жодних гарантій.
Якщо програма змінена кимось іншим і пішла далі, ми хочемо, щоб кінцеві
отримувачі знали, що те, що вони мають, не є оригіналом, і разі якихось
проблем, створених іншими, не вплинули на репутацію оригінальних авторів.

Нарешті, будь-якій безплатній програмі постійно загрожують патенти на програмне
забезпечення. Ми хочемо уникнути такої небезпеки, що розповсюджувачі безплатної
програми отримають патентні свідоцтва окремо і таким чином зроблять програму
приватною. Щоби цього уникнути, ми озвучили, що кожен патент має бути виданий
із розумінням того, що він дозволяє кожному вільно ним користуватися, або його
не можна видавати взагалі.

Нижче наведені точні умови копіювання, розповсюдження та модифікації.

F.2. ЗАГАЛЬНА ГРОМАДСЬКА ЛІЦЕНЗІЯ GNU

УМОВИ ТА ОБОВʼЯЗКИ КОПІЮВАННЯ, РОЗПОВСЮДЖЕННЯ І ЗМІНИ

0. Ця Ліцензія поширюється на будь-яку програму чи іншу роботу, яка містить
повідомлення від власника авторських прав про те, що її можна поширювати згідно
з умовами цієї Загальної публічної ліцензії. «Програма», наведена нижче,
відноситься до будь-якої такої програми або роботи, а «твір, заснований на
Програмі» означає або Програму, або будь-яку похідну роботу відповідно до
закону про авторське право: тобто , твір, що містить Програму або її частину,
дослівно або зі змінами та/або перекладений іншою мовою. (Тут і далі переклад
включається без обмежень у термін «модифікація».) Кожен користувач ліцензії
називається «Ви».

Дії, окрім копіювання, розповсюдження та модифікації, не охоплюється цією
Ліцензією; вони знаходяться поза його рамок. Виконання Програми не обмежено, а
вихідні дані Програми охоплюються лише в тому випадку, якщо зміст виведених
даних становить твір, заснований на програмі (незалежно від того, чи був він
створений діяльністю програми). Оцінка правильності попереднього речення
залежить від того, що робить програма.

1. Ви можете копіювати та розповсюджувати дослівні копії вихідного коду
Програми в отриманому вигляді на будь-якому носії за умови, що Ви розміщуєте на
кожній копії повідомлення про авторські права на помітному місці та належним
чином, а також відмови від гарантій; Ви залишаєте недоторканими всі
повідомлення, що стосуються цієї ліцензії та відсутності гарантії та надасте
кожному одержувачу копію цієї ліцензії разом із Програмою.

Ви можете стягувати плату за фізичну дію передачі копії, а також можете за
власним бажанням запропонувати гарантійний захист в обмін на плату.

2. Ви можете змінювати свою копію або копії Програми або будь-яку її частину,
створюючи таким чином твір на основі Програми, а також копіювати та поширювати
такі модифікації чи роботу відповідно до умов згаданого вище Розділу 1, якщо Ви
також відповідаєте усім цим умовам:

 a. Ви повинні забезпечити наявність у змінених файлах чітке зазначення того,
    що Ви змінили у файлі, а також включити дату кожної зміни.

 b. Ви повинні гарантувати, що будь-яка робота, яку Ви розповсюджуєте або
    публікуєте, яка повністю або частково містить або є похідною від Програми
    або будь-якої її частини, ліцензується в цілому безоплатно для всіх третіх
    сторін згідно з умовами цієї Ліцензії.

 c. Якщо нормальна робота модифікованої програми передбачає читання команд в
    інтерактивному режимі, Ви повинні змусити її, коли вона запускається у
    такому інтерактивному режимі, надрукувати або відобразити сповіщення,
    включаючи відповідне повідомлення про авторські права та повідомлення про
    відсутність гарантії (або що Ви надаєте гарантію) і що користувачі можуть
    повторно поширювати програму за цих умов, і повідомлення користувачеві, як
    переглянути копію цієї Ліцензії. (Виняток: якщо сама Програма є
    інтерактивною, але зазвичай не друкує таке оголошення, Ваша робота,
    заснована на Програмі, не вимагає друку оголошення.)

Ці вимоги стосуються модифікованої частини в цілому. Якщо можна ідентифікувати
фрагменти такої роботи, які, здається, не є похідними від Програми та можуть
обґрунтовано вважатися незалежними та окремими роботами самостійно, тоді ця
Ліцензія та її положення не застосовуються до цих фрагментів, коли вони
розповсюджуються як незалежні роботи. Однак, коли Ви розповсюджуєте ці самі
фрагменти як частину цілого, що становить твір на основі Програми,
розповсюдження цього цілого має відповідати положенням цієї ліцензії, щоб
дозволи, надані іншим користувачам, поширювалися на всю роботу, тобто до всіх
її частин, незалежно від того, хто її написав.

Таким чином, цей розділ не призначений для отримання або відмови від Ваших прав
на твір, повністю написаний Вами; справжньою метою є здійснення права контролю
за розповсюдженням похідних або колективних творів, заснованих на Програмі.

Окрім того, просте об’єднання іншої роботи, не заснованої на Програмі, з
Програмою (або твором, заснованим на Програмі) на носії для зберігання чи
розповсюдження не поширює цю іншу роботу під дію цієї Ліцензії.

3. Ви можете копіювати та розповсюджувати Програму (або засновану на ній
роботу, під Розділом 2) в об'єктному коді чи у виконуваній формі в сенсі умов
Розділу 1 та 2 вище за умови, якщо Ви відповідаєте будь-якій із наступних
вимог:

 a. Ви супроводжуєте його вихідним кодом у машинозчитуваній формі, який має
    бути розповсюджений відповідно до положень Розділів 1 та 2 вище на носії,
    який зазвичай використовується для обміну програмним забезпеченням; або

 b. Ви супроводжуєте його з письмовою пропозицією, дійсною щонайменше протягом
    трьох років, за якою Ви надаєте будь-якій третій стороні за плату, що не
    перевищує Ваших витрат, понесених під час фізичного виробництва вихідного
    розповсюдження, повну машиночитну копію відповідного вихідного коду, які
    мають розповсюджуватися відповідно до положень Розділів 1 та 2 вище на
    пристрої, які зазвичай використовуються для обміну програмним
    забезпеченням; або

 c. Ви супроводжуєте його інформацією, яку Ви отримали щодо пропозиції надання
    вихідного коду. (Ця альтернатива дозволена лише для некомерційного
    розповсюдження та лише якщо Ви отримали програму в об’єктному коді або у
    виконуваній формі разом із такою пропозицією відповідно до Підрозділу b
    вище.)

Вихідний код для роботи є найбільш прийнятною формою роботи для її модифікації.
Для роботи у виконуваній формі повний вихідний код означає весь вихідний код
для усіх модулів, які він містить, а також будь-які додаткові файли визначення
інтерфейсу, а також скрипти, необхідні для компіляції та встановлення
виконуваної програми. Однак, як особливий виняток, розповсюджуваний вихідний
код не повинен включати нічого, що зазвичай розповсюджується (у вихідній або
двійковій формі) разом з основними компонентами (компілятором, ядром тощо)
операційної системи, на якій працює виконуваний файл, якщо цей компонент сам не
супроводжує виконуваний файл.

Якщо розповсюдження об’єктного або виконуваного коду здійснюється шляхом
надання доступу до копіювання з певного місця, тоді пропозиція еквівалентного
доступу до копіювання вихідного коду з того самого місця вважається
розповсюдженням вихідного коду, навіть якщо треті сторони не вимушені копіювати
вихідний код разом з об'єктним кодом.

4. Ви не можете копіювати, змінювати, субліцензувати або розповсюджувати
Програму у спосіб, окрім того, що чітко зазначено в цій Ліцензії. Будь-яка інша
спроба скопіювати, змінити, субліцензувати або розповсюдити Програму є
порушенням та автоматично припиняє Ваші права за цією Ліцензією. Однак дія
Ліцензії для сторін, які отримали від Вас копії або права відповідно до цієї
Ліцензії, не припиняється, доки вони повністю дотримуються її.

5. Ви не відповідаєте за прийняття цієї Ліцензії, оскільки Ви її не
підписували. Однак ніщо інше не надає Вам права модифікувати або поширювати
програму чи похідні роботи. Якщо Ви не приймаєте цю Ліцензію, ця діяльність
заборонена законом. Таким чином, змінюючи або розповсюджуючи Програму (або
будь-яку роботу, засновану на Програмі), Ви виражаєте свою згоду з Ліцензією та
всіма її положеннями та умовами щодо копіювання, модифікації та розповсюдження
Програми або творів на її основі.

6. Кожного разу, коли Ви розповсюджуєте Програму (або будь-яку роботу,
засновану на Програмі), одержувач автоматично отримує від оригінального
ліцензіара Ліцензію на копіювання, розповсюдження або модифікацію Програми
відповідно до цих умов. Ви не маєте права накладати будь-які додаткові
обмеження на здійснення одержувачами прав, наданих тут. Ви не несете
відповідальності за дотримання цієї Ліцензії третіми сторонами.

7. Якщо внаслідок рішення суду або звинувачення в порушенні патенту, або з
будь-якої іншої причини (не обмежуючись патентними випадками) на Вас
накладаються умови (судовим порядком, угодою чи інше), які суперечать умовам
цієї Ліцензії, вони не звільняють Вас від умов цієї Ліцензії. Якщо Ви не можете
розповсюджувати Програму в такий спосіб, щоб одночасно виконати свої
зобов’язання за цією Ліцензією та будь-які інші відповідні зобов’язання, то, як
наслідок, Ви не можете розповсюджувати Програму взагалі. Наприклад, якщо
Патентна Ліцензія не дозволяє безоплатне наступне розповсюдження Програми
ніким, хто отримує копії прямо чи опосередковано через Вас, то єдиним способом,
яким Ви могли б задовольнити як її, так і цю Ліцензію, було б абсолютним
утриманням від розповсюдження Програми.

Якщо будь-яка частина цього розділу визнається недійсною або не має позовної
сили за будь-яких конкретних обставин, залишок розділу має застосовуватися, а
розділ у цілому має застосовуватися за інших обставин.

Метою цього розділу не є спонукання Вас до порушення будь-яких патентів чи
інших претензій на права власності, чи до оскарження дійсності будь-яких таких
претензій; єдиною метою цього розділу є захист цілісності системи
розповсюдження вільного програмного забезпечення, яка реалізується через
використання публічної ліцензії. Багато людей зробили щедрі внески в широкий
спектр програмного забезпечення, що поширюється через цю систему, покладаючись
на послідовне застосування цієї системи; автор/донор сам вирішує, чи бажає він
або вона поширювати програмне забезпечення через будь-яку іншу систему, і
ліцензіат не може нав’язувати такий вибір.

Цей розділ має на меті ретельно пояснити, що вважається наслідком решти цієї
Ліцензії.

8. Якщо розповсюдження або використання Програми в певних країнах обмежено
патентами або захищеними авторським правом інтерфейсами, оригінальний власник
авторських прав, який передає Програму за цією Ліцензією, може додати точне
географічне обмеження розповсюдження, за винятком таких країн. Таким чином
розповсюдження дозволено лише в країнах або між країнами, які не виключені. У
цьому випадку ця Ліцензія містить таке саме обмеження, як це було б написано у
тексті цієї Ліцензії.

9. Free Software Foundation може час від часу випускати виправлені або нові
версії Загальної публічної Ліцензії. Такі нові версії будуть схожі за духом на
поточну версію, але можуть відрізнятися у деталях щодо нових проблем або
занепокоєнь. Кожній версії присвоюється окремий номер версії. Якщо у Програмі
вказано номер версії, який застосовується до неї та «усіх наступних версій», Ви
можете, на свій розсуд, бути зв’язаними умовами цієї версії або будь-якої
наступної версії, опублікованої Free Software Foundation. Якщо у Програмі не
вказано номер версії цієї ліцензії, Ви можете вибрати будь-яку версію,
будь-коли випущену Free Software Foundation.

10. Якщо Ви бажаєте включити частини Програми до інших безплатних програм,
умови розповсюдження яких відрізняються, надішліть, будь ласка, запит про такий
дозвіл автору. Для програмного забезпечення, захищеного авторським правом Free
Software Foundation, напишіть Free Software Foundation; ми іноді робимо винятки
з положень на такі випадки. Наше рішення буде керуватися двома цілями:
збереження вільного характеру всіх похідних від нашого вільного програмного
забезпечення та заохочення спільного використання та повторного використання
програмного забезпечення в цілому.

БЕЗ ГАРАНТІЇ

11. ОСКІЛЬКИ ПРОГРАМА ЛІЦЕНЗОВАНА, ЯК БЕЗПЛАТНА, НА ПРОГРАМУ НЕ НАДАЄТЬСЯ
ЖОДНОЇ ГАРАНТІЇ В МЕЖАХ, ДОЗВОЛЕНИХ ЧИННИМ ЗАКОНОДАВСТВОМ. ЗА ВИНЯТКОМ
ПИСЬМОВОГО ЗАЯВЛЕННЯ ІНШОГО, ВЛАСНИКИ АВТОРСЬКИХ ПРАВ ТА/АБО ІНШІ СТОРОНИ
НАДАЮТЬ ПРОГРАМУ «ЯК Є» БЕЗ БУДЬ-ЯКИХ ГАРАНТІЙ, ЯВНИХ АБО НЕПРЯМИХ, ВКЛЮЧАЮЧИ,
АЛЕ НЕ ОБМЕЖУЮЧИСЬ, ОПОСЕРЕДКОВАНІ ГАРАНТІЇ КОМЕРЦІЙНОЇ ВИГОДИ ТА ПРИДАТНІСТЬ
ДЛЯ КОНКРЕТНОГО ПРИЗНАЧЕННЯ. ВЕСЬ РИЗИК ЩОДО ЯКОСТІ ТА ПРОДУКТИВНОСТІ ПРОГРАМИ
ПОКЛАДАЄТЬСЯ НА ВАС. ЯКЩО ПРОГРАМА ВИЯВИТЬСЯ ДЕФЕКТНОЮ, ВИ НЕСЕТЕ ВИТРАТИ ЗА
ВСІ НЕОБХІДНІ ОБСЛУГОВУВАННЯ, РЕМОНТИ АБО ВИПРАВЛЕННЯ.

12. БУДЬ-ЯКИЙ ВЛАСНИК АВТОРСЬКИХ ПРАВ АБО ІНША СТОРОНА, ЯКА МОЖЕ МОДИФІКУВАТИ
ТА/АБО ДАЛІ ПОШИРЮВАТИ ПРОГРАМУ, ЯК ДОЗВОЛЕНО ВИЩЕ, НЕ НЕСЕ ПЕРЕД ВАМИ
ВІДПОВІДАЛЬНОСТІ ЗА ЗБИТКИ, ВКЛЮЧНО БУДЬ-ЯКОГО ЗАГАЛЬНОГО ХАРАКТЕРУ, ОСОБЛИВО
ВИЗНАЧЕНІ, ВИПАДКОВІ АБО ПОБІЧНІ ЗБИТКИ, ЩО ВИНИКАЮТЬ ВНАСЛІДОК ВИКОРИСТАННЯ
АБО НЕМОЖЛИВОСТІ ВИКОРИСТАННЯ ПРОГРАМИ (ЗОКРЕМА, АЛЕ НЕ ОБМЕЖУЮЧИСЬ, ВТРАТУ
ДАНИХ АБО НЕТОЧНІСТЬ ДАНИХ АБО ЗБИТКИ, ПОНЕСЕНІ ВАМИ АБО ТРЕТІМИ ОСОБАМИ АБО
ВІДМОВУ РОБОТИ ПРОГРАМИ З БУДЬ-ЯКИМИ ІНШИМИ ПРОГРАМАМИ), НАВІТЬ ЯКЩО ТАКИЙ
ВЛАСНИК АБО ІНША СТОРОНА БУЛИ ПОВІДОМЛЕНІ ПРО МОЖЛИВІСТЬ ТАКИХ ЗБИТКІВ.

КІНЕЦЬ УМОВ ТА ОБОВʼЯЗКІВ

F.3. Як застосувати ці умови до Ваших нових програм

Якщо Ви розробляєте нову програму і хочете, щоб вона приносила якомога більше
користі людям, найкращий спосіб досягти цього -- зробити її вільним програмним
забезпеченням, яке кожен може поширювати та змінювати відповідно до цих умов.

Для цього додайте до програми такі примітки. Найбезпечніше додавати їх на
початку кожного вихідного файлу, щоб найбільш ефективно передати виключення
гарантії; і кожен файл повинен мати принаймні рядок «авторських прав» та
посилання на те, де знаходиться повне повідомлення.

один рядок для назви програми та короткого пояснення, що вона робить.
Copyright (C) рік  ім'я автора

Ця програма безплатна; Ви можете передавати її далі та/або
змінювати її за умовами Ліцензії GNU General Public License,
виданої Free Software Foundation; або версією 2
цієї Ліцензії, або (на Ваш вибір) будь-якою пізнішою версією.

Ця програма розповсюджується в надії, що буде корисною,
але БЕЗ ЖОДНИХ ГАРАНТІЙ; навіть без непрямої гарантії
ПРИДАТНОСТІ ДО ПРОДАЖУ АБО ДЛЯ КОНКРЕТНОЇ МЕТИ.
Більш детально у Ліцензії GNU General Public License.

Ви повинні були отримати копію Ліцензії GNU General Public License
разом з цією програмою; якщо ні, напишіть до Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Також додайте інформацію про те, як зв’язатися з Вами електронною та паперовою
поштою.

Якщо програма інтерактивна, зробіть відтворення короткого повідомлення, такого
як це, під час запуску в інтерактивному режимі:

Gnomovision версія 69, Copyright (C) рік ім'я автора.
Gnomovision надається без будь-яких гарантій; Для детальної інформації
напишіть show w. Це безплатна програма і Ви можете її
передавати далі за певних умов; для детальної інформації напишіть
show c.

Гіпотетичні команди «show w» та «show c» мають показати відповідні частини
Загальної публічної ліцензії GPL. Звичайно, команди, які Ви використовуєте,
можуть називатися інакше, ніж «show w» та «show c»; це можуть бути навіть
клацання мишею або пункти меню -- все, що підходить Вашій програмі.

Ви також за необхідності повинні попросити свого роботодавця (якщо Ви працюєте
програмістом) або свій навчальний заклад, якщо такий є, підписати «відмову від
авторських прав» для програми. Тут є зразок; замініть імена:

ТОВ "Козацькі писарі" цим відмовляється від усіх авторських прав у
програмі Брама (що керує наглядом за периметром), яка
написана Савою Костюченко.

Юхим Пиріг - підпис , 07 серпня 2011р.
Юхим Пиріг, віцепрезидент ТОВ "Козацькі писарі"

Ця Загальна публічна ліцензія GPL не дозволяє включати Вашу програму до інших
програм, які з закритим кодом. Якщо Ваша програма є бібліотекою з підпрограмою,
можливо Вам буде більш корисним дозволити з'єднувати програми з закритим кодом
з Вашою бібліотекою. Якщо це те, що Ви хочете зробити, користуйтеся замість
цієї Ліцензії іншою -- GNU Lesser General Public License.

